var Fe=Object.defineProperty;var Ee=(w,_,$)=>_ in w?Fe(w,_,{enumerable:!0,configurable:!0,writable:!0,value:$}):w[_]=$;var N=(w,_,$)=>(Ee(w,typeof _!="symbol"?_+"":_,$),$);import{z as ee,Y as te,P as S,r as T,S as W,b as Ae,t as ue,R as Ce,c as De}from"./index-d09297ab.js";import"./index-d4bae25f.js";var Se=Object.defineProperty,Re=(w,_,$)=>_ in w?Se(w,_,{enumerable:!0,configurable:!0,writable:!0,value:$}):w[_]=$,z=(w,_,$)=>(Re(w,typeof _!="symbol"?_+"":_,$),$),be={exports:{}};(function(w,_){(function($,A){w.exports=A()})(self,()=>{return $={7629:(E,k,f)=>{const i=f(375),b=f(8571),y=f(9474),d=f(1687),e=f(8652),n=f(8160),o=f(3292),s=f(6354),t=f(8901),l=f(9708),r=f(6914),a=f(2294),u=f(6133),h=f(1152),g=f(8863),x=f(2036),v={Base:class{constructor(c){this.type=c,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new a.Ids,this._preferences=null,this._refs=new u.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return i(typeof l.describe=="function","Manifest functionality disabled"),l.describe(this)}allow(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return n.verifyFlat(p,"allow"),this._values(p,"_valids")}alter(c){i(c&&typeof c=="object"&&!Array.isArray(c),"Invalid targets argument"),i(!this._inRuleset(),"Cannot set alterations inside a ruleset");const p=this.clone();p.$_terms.alterations=p.$_terms.alterations||[];for(const m in c){const F=c[m];i(typeof F=="function","Alteration adjuster for",m,"must be a function"),p.$_terms.alterations.push({target:m,adjuster:F})}return p.$_temp.ruleset=!1,p}artifact(c){return i(c!==void 0,"Artifact cannot be undefined"),i(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",c)}cast(c){return i(c===!1||typeof c=="string","Invalid to value"),i(c===!1||this._definition.cast[c],"Type",this.type,"does not support casting to",c),this.$_setFlag("cast",c===!1?void 0:c)}default(c,p){return this._default("default",c,p)}description(c){return i(c&&typeof c=="string","Description must be a non-empty string"),this.$_setFlag("description",c)}empty(c){const p=this.clone();return c!==void 0&&(c=p.$_compile(c,{override:!1})),p.$_setFlag("empty",c,{clone:!1})}error(c){return i(c,"Missing error"),i(c instanceof Error||typeof c=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",c)}example(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i(c!==void 0,"Missing example"),n.assertOptions(p,["override"]),this._inner("examples",c,{single:!0,override:p.override})}external(c,p){return typeof c=="object"&&(i(!p,"Cannot combine options with description"),p=c.description,c=c.method),i(typeof c=="function","Method must be a function"),i(p===void 0||p&&typeof p=="string","Description must be a non-empty string"),this._inner("externals",{method:c,description:p},{single:!0})}failover(c,p){return this._default("failover",c,p)}forbidden(){return this.presence("forbidden")}id(c){return c?(i(typeof c=="string","id must be a non-empty string"),i(/^[^\.]+$/.test(c),"id cannot contain period character"),this.$_setFlag("id",c)):this.$_setFlag("id",void 0)}invalid(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return this._values(p,"_invalids")}label(c){return i(c&&typeof c=="string","Label name must be a non-empty string"),this.$_setFlag("label",c)}meta(c){return i(c!==void 0,"Meta cannot be undefined"),this._inner("metas",c,{single:!0})}note(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];i(p.length,"Missing notes");for(const F of p)i(F&&typeof F=="string","Notes must be non-empty strings");return this._inner("notes",p)}only(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return i(typeof c=="boolean","Invalid mode:",c),this.$_setFlag("only",c)}optional(){return this.presence("optional")}prefs(c){i(c,"Missing preferences"),i(c.context===void 0,"Cannot override context"),i(c.externals===void 0,"Cannot override externals"),i(c.warnings===void 0,"Cannot override warnings"),i(c.debug===void 0,"Cannot override debug"),n.checkPreferences(c);const p=this.clone();return p._preferences=n.preferences(p._preferences,c),p}presence(c){return i(["optional","required","forbidden"].includes(c),"Unknown presence mode",c),this.$_setFlag("presence",c)}raw(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("result",c?"raw":void 0)}result(c){return i(["raw","strip"].includes(c),"Unknown result mode",c),this.$_setFlag("result",c)}required(){return this.presence("required")}strict(c){const p=this.clone(),m=c!==void 0&&!c;return p._preferences=n.preferences(p._preferences,{convert:m}),p}strip(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("result",c?"strip":void 0)}tag(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];i(p.length,"Missing tags");for(const F of p)i(F&&typeof F=="string","Tags must be non-empty strings");return this._inner("tags",p)}unit(c){return i(c&&typeof c=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",c)}valid(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];n.verifyFlat(p,"valid");const F=this.allow(...p);return F.$_setFlag("only",!!F._valids,{clone:!1}),F}when(c,p){const m=this.clone();m.$_terms.whens||(m.$_terms.whens=[]);const F=o.when(m,c,p);if(!["any","link"].includes(m.type)){const C=F.is?[F]:F.switch;for(const D of C)i(!D.then||D.then.type==="any"||D.then.type===m.type,"Cannot combine",m.type,"with",D.then&&D.then.type),i(!D.otherwise||D.otherwise.type==="any"||D.otherwise.type===m.type,"Cannot combine",m.type,"with",D.otherwise&&D.otherwise.type)}return m.$_terms.whens.push(F),m.$_mutateRebuild()}cache(c){i(!this._inRuleset(),"Cannot set caching inside a ruleset"),i(!this._cache,"Cannot override schema cache"),i(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const p=this.clone();return p._cache=c||e.provider.provision(),p.$_temp.ruleset=!1,p}clone(){const c=Object.create(Object.getPrototypeOf(this));return this._assign(c)}concat(c){i(n.isSchema(c),"Invalid schema object"),i(this.type==="any"||c.type==="any"||c.type===this.type,"Cannot merge type",this.type,"with another type:",c.type),i(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),i(!c._inRuleset(),"Cannot concatenate a schema with open ruleset");let p=this.clone();if(this.type==="any"&&c.type!=="any"){const m=c.clone();for(const F of Object.keys(p))F!=="type"&&(m[F]=p[F]);p=m}p._ids.concat(c._ids),p._refs.register(c,u.toSibling),p._preferences=p._preferences?n.preferences(p._preferences,c._preferences):c._preferences,p._valids=x.merge(p._valids,c._valids,c._invalids),p._invalids=x.merge(p._invalids,c._invalids,c._valids);for(const m of c._singleRules.keys())p._singleRules.has(m)&&(p._rules=p._rules.filter(F=>F.keep||F.name!==m),p._singleRules.delete(m));for(const m of c._rules)c._definition.rules[m.method].multi||p._singleRules.set(m.name,m),p._rules.push(m);if(p._flags.empty&&c._flags.empty){p._flags.empty=p._flags.empty.concat(c._flags.empty);const m=Object.assign({},c._flags);delete m.empty,d(p._flags,m)}else if(c._flags.empty){p._flags.empty=c._flags.empty;const m=Object.assign({},c._flags);delete m.empty,d(p._flags,m)}else d(p._flags,c._flags);for(const m in c.$_terms){const F=c.$_terms[m];F?p.$_terms[m]?p.$_terms[m]=p.$_terms[m].concat(F):p.$_terms[m]=F.slice():p.$_terms[m]||(p.$_terms[m]=F)}return this.$_root._tracer&&this.$_root._tracer._combine(p,[this,c]),p.$_mutateRebuild()}extend(c){return i(!c.base,"Cannot extend type with another base"),t.type(this,c)}extract(c){return c=Array.isArray(c)?c:c.split("."),this._ids.reach(c)}fork(c,p){i(!this._inRuleset(),"Cannot fork inside a ruleset");let m=this;for(let F of[].concat(c))F=Array.isArray(F)?F:F.split("."),m=m._ids.fork(F,p,m);return m.$_temp.ruleset=!1,m}rule(c){const p=this._definition;n.assertOptions(c,Object.keys(p.modifiers)),i(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const m=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;i(m>=0&&m<this._rules.length,"Cannot apply rules to empty ruleset");const F=this.clone();for(let C=m;C<F._rules.length;++C){const D=F._rules[C],R=b(D);for(const j in c)p.modifiers[j](R,c[j]),i(R.name===D.name,"Cannot change rule name");F._rules[C]=R,F._singleRules.get(R.name)===D&&F._singleRules.set(R.name,R)}return F.$_temp.ruleset=!1,F.$_mutateRebuild()}get ruleset(){i(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const c=this.clone();return c.$_temp.ruleset=c._rules.length,c}get $(){return this.ruleset}tailor(c){c=[].concat(c),i(!this._inRuleset(),"Cannot tailor inside a ruleset");let p=this;if(this.$_terms.alterations)for(const{target:m,adjuster:F}of this.$_terms.alterations)c.includes(m)&&(p=F(p),i(n.isSchema(p),"Alteration adjuster for",m,"failed to return a schema object"));return p=p.$_modify({each:m=>m.tailor(c),ref:!1}),p.$_temp.ruleset=!1,p.$_mutateRebuild()}tracer(){return h.location?h.location(this):this}validate(c,p){return g.entry(c,this,p)}validateAsync(c,p){return g.entryAsync(c,this,p)}$_addRule(c){typeof c=="string"&&(c={name:c}),i(c&&typeof c=="object","Invalid options"),i(c.name&&typeof c.name=="string","Invalid rule name");for(const D in c)i(D[0]!=="_","Cannot set private rule properties");const p=Object.assign({},c);p._resolve=[],p.method=p.method||p.name;const m=this._definition.rules[p.method],F=p.args;i(m,"Unknown rule",p.method);const C=this.clone();if(F){i(Object.keys(F).length===1||Object.keys(F).length===this._definition.rules[p.name].args.length,"Invalid rule definition for",this.type,p.name);for(const D in F){let R=F[D];if(m.argsByName){const j=m.argsByName.get(D);if(j.ref&&n.isResolvable(R))p._resolve.push(D),C.$_mutateRegister(R);else if(j.normalize&&(R=j.normalize(R),F[D]=R),j.assert){const B=n.validateArg(R,D,j);i(!B,B,"or reference")}}R!==void 0?F[D]=R:delete F[D]}}return m.multi||(C._ruleRemove(p.name,{clone:!1}),C._singleRules.set(p.name,p)),C.$_temp.ruleset===!1&&(C.$_temp.ruleset=null),m.priority?C._rules.unshift(p):C._rules.push(p),C}$_compile(c,p){return o.schema(this.$_root,c,p)}$_createError(c,p,m,F,C){let D=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};const R=D.flags!==!1?this._flags:{},j=D.messages?r.merge(this._definition.messages,D.messages):this._definition.messages;return new s.Report(c,p,m,R,j,F,C)}$_getFlag(c){return this._flags[c]}$_getRule(c){return this._singleRules.get(c)}$_mapLabels(c){return c=Array.isArray(c)?c:c.split("."),this._ids.labels(c)}$_match(c,p,m,F){(m=Object.assign({},m)).abortEarly=!0,m._externals=!1,p.snapshot();const C=!g.validate(c,this,p,m,F).errors;return p.restore(),C}$_modify(c){return n.assertOptions(c,["each","once","ref","schema"]),a.schema(this,c)||this}$_mutateRebuild(){return i(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(c,p)=>{let{source:m,name:F,path:C,key:D}=p;const R=this._definition[m][F]&&this._definition[m][F].register;R!==!1&&this.$_mutateRegister(c,{family:R,key:D})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(c){let{family:p,key:m}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._refs.register(c,p),this._ids.register(c,{key:m})}$_property(c){return this._definition.properties[c]}$_reach(c){return this._ids.reach(c)}$_rootReferences(){return this._refs.roots()}$_setFlag(c,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i(c[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const F=this._definition.flags[c]||{};if(y(p,F.default)&&(p=void 0),y(p,this._flags[c]))return this;const C=m.clone!==!1?this.clone():this;return p!==void 0?(C._flags[c]=p,C.$_mutateRegister(p)):delete C._flags[c],c[0]!=="_"&&(C.$_temp.ruleset=!1),C}$_parent(c){for(var p=arguments.length,m=new Array(p>1?p-1:0),F=1;F<p;F++)m[F-1]=arguments[F];return this[c][n.symbols.parent].call(this,...m)}$_validate(c,p,m){return g.validate(c,this,p,m)}_assign(c){c.type=this.type,c.$_root=this.$_root,c.$_temp=Object.assign({},this.$_temp),c.$_temp.whens={},c._ids=this._ids.clone(),c._preferences=this._preferences,c._valids=this._valids&&this._valids.clone(),c._invalids=this._invalids&&this._invalids.clone(),c._rules=this._rules.slice(),c._singleRules=b(this._singleRules,{shallow:!0}),c._refs=this._refs.clone(),c._flags=Object.assign({},this._flags),c._cache=null,c.$_terms={};for(const p in this.$_terms)c.$_terms[p]=this.$_terms[p]?this.$_terms[p].slice():null;c.$_super={};for(const p in this.$_super)c.$_super[p]=this._super[p].bind(c);return c}_bare(){const c=this.clone();c._reset();const p=c._definition.terms;for(const m in p){const F=p[m];c.$_terms[m]=F.init}return c.$_mutateRebuild()}_default(c,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n.assertOptions(m,"literal"),i(p!==void 0,"Missing",c,"value"),i(typeof p=="function"||!m.literal,"Only function value supports literal option"),typeof p=="function"&&m.literal&&(p={[n.symbols.literal]:!0,literal:p}),this.$_setFlag(c,p)}_generate(c,p,m){if(!this.$_terms.whens)return{schema:this};const F=[],C=[];for(let j=0;j<this.$_terms.whens.length;++j){const B=this.$_terms.whens[j];if(B.concat){F.push(B.concat),C.push(`${j}.concat`);continue}const O=B.ref?B.ref.resolve(c,p,m):c,I=B.is?[B]:B.switch,P=C.length;for(let Y=0;Y<I.length;++Y){const{is:M,then:L,otherwise:q}=I[Y],U=`${j}${B.switch?"."+Y:""}`;if(M.$_match(O,p.nest(M,`${U}.is`),m)){if(L){const J=p.localize([...p.path,`${U}.then`],p.ancestors,p.schemas),{schema:ne,id:Q}=L._generate(c,J,m);F.push(ne),C.push(`${U}.then${Q?`(${Q})`:""}`);break}}else if(q){const J=p.localize([...p.path,`${U}.otherwise`],p.ancestors,p.schemas),{schema:ne,id:Q}=q._generate(c,J,m);F.push(ne),C.push(`${U}.otherwise${Q?`(${Q})`:""}`);break}}if(B.break&&C.length>P)break}const D=C.join(", ");if(p.mainstay.tracer.debug(p,"rule","when",D),!D)return{schema:this};if(!p.mainstay.tracer.active&&this.$_temp.whens[D])return{schema:this.$_temp.whens[D],id:D};let R=this;this._definition.generate&&(R=this._definition.generate(this,c,p,m));for(const j of F)R=R.concat(j);return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,...F]),this.$_temp.whens[D]=R,{schema:R,id:D}}_inner(c,p){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i(!this._inRuleset(),`Cannot set ${c} inside a ruleset`);const F=this.clone();return F.$_terms[c]&&!m.override||(F.$_terms[c]=[]),m.single?F.$_terms[c].push(p):F.$_terms[c].push(...p),F.$_temp.ruleset=!1,F}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._singleRules.has(c))return this;const m=p.clone!==!1?this.clone():this;m._singleRules.delete(c);const F=[];for(let C=0;C<m._rules.length;++C){const D=m._rules[C];D.name!==c||D.keep?F.push(D):m._inRuleset()&&C<m.$_temp.ruleset&&--m.$_temp.ruleset}return m._rules=F,m}_values(c,p){n.verifyFlat(c,p.slice(1,-1));const m=this.clone(),F=c[0]===n.symbols.override;if(F&&(c=c.slice(1)),!m[p]&&c.length?m[p]=new x:F&&(m[p]=c.length?new x:null,m.$_mutateRebuild()),!m[p])return m;F&&m[p].override();for(const C of c){i(C!==void 0,"Cannot call allow/valid/invalid with undefined"),i(C!==n.symbols.override,"Override must be the first value");const D=p==="_invalids"?"_valids":"_invalids";m[D]&&(m[D].remove(C),m[D].length||(i(p==="_valids"||!m._flags.only,"Setting invalid value",C,"leaves schema rejecting all values due to previous valid rule"),m[D]=null)),m[p].add(C,m._refs)}return m}}};v.Base.prototype[n.symbols.any]={version:n.version,compile:o.compile,root:"$_root"},v.Base.prototype.isImmutable=!0,v.Base.prototype.deny=v.Base.prototype.invalid,v.Base.prototype.disallow=v.Base.prototype.invalid,v.Base.prototype.equal=v.Base.prototype.valid,v.Base.prototype.exist=v.Base.prototype.required,v.Base.prototype.not=v.Base.prototype.invalid,v.Base.prototype.options=v.Base.prototype.prefs,v.Base.prototype.preferences=v.Base.prototype.prefs,E.exports=new v.Base},8652:(E,k,f)=>{const i=f(375),b=f(8571),y=f(8160),d={max:1e3,supported:new Set(["undefined","boolean","number","string"])};k.provider={provision:e=>new d.Cache(e)},d.Cache=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};y.assertOptions(e,["max"]),i(e.max===void 0||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||d.max,this._map=new Map,this._list=new d.List}get length(){return this._map.size}set(e,n){if(e!==null&&!d.supported.has(typeof e))return;let o=this._map.get(e);if(o)return o.value=n,void this._list.first(o);o=this._list.unshift({key:e,value:n}),this._map.set(e,o),this._compact()}get(e){const n=this._map.get(e);if(n)return this._list.first(n),b(n.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},d.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:n,prev:o}=e;return n.prev=o,o&&(o.next=n),e===this.tail&&(this.tail=n),e.prev=null,e.next=null,e}}},8160:(E,k,f)=>{const i=f(375),b=f(7916),y=f(5934);let d,e;const n={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};k.version=y.version,k.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},k.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},k.assertOptions=function(o,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Options";i(o&&typeof o=="object"&&!Array.isArray(o),"Options must be of type object");const l=Object.keys(o).filter(r=>!s.includes(r));i(l.length===0,`${t} contain unknown keys: ${l}`)},k.checkPreferences=function(o){e=e||f(3378);const s=e.preferences.validate(o);if(s.error)throw new b([s.error.details[0].message])},k.compare=function(o,s,t){switch(t){case"=":return o===s;case">":return o>s;case"<":return o<s;case">=":return o>=s;case"<=":return o<=s}},k.default=function(o,s){return o===void 0?s:o},k.isIsoDate=function(o){return n.isoDate.test(o)},k.isNumber=function(o){return typeof o=="number"&&!isNaN(o)},k.isResolvable=function(o){return!!o&&(o[k.symbols.ref]||o[k.symbols.template])},k.isSchema=function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=o&&o[k.symbols.any];return!!t&&(i(s.legacy||t.version===k.version,"Cannot mix different versions of joi schemas"),!0)},k.isValues=function(o){return o[k.symbols.values]},k.limit=function(o){return Number.isSafeInteger(o)&&o>=0},k.preferences=function(o,s){d=d||f(6914),o=o||{},s=s||{};const t=Object.assign({},o,s);return s.errors&&o.errors&&(t.errors=Object.assign({},o.errors,s.errors),t.errors.wrap=Object.assign({},o.errors.wrap,s.errors.wrap)),s.messages&&(t.messages=d.compile(s.messages,o.messages)),delete t[k.symbols.prefs],t},k.tryWithPath=function(o,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{return o()}catch(l){throw l.path!==void 0?l.path=s+"."+l.path:l.path=s,t.append&&(l.message=`${l.message} (${l.path})`),l}},k.validateArg=function(o,s,t){let{assert:l,message:r}=t;if(k.isSchema(l)){const a=l.validate(o);return a.error?a.error.message:void 0}if(!l(o))return s?`${s} ${r}`:r},k.verifyFlat=function(o,s){for(const t of o)i(!Array.isArray(t),"Method no longer accepts array arguments:",s)}},3292:(E,k,f)=>{const i=f(375),b=f(8160),y=f(6133),d={};k.schema=function(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.assertOptions(o,["appendPath","override"]);try{return d.schema(e,n,o)}catch(s){throw o.appendPath&&s.path!==void 0&&(s.message=`${s.message} (${s.path})`),s}},d.schema=function(e,n,o){i(n!==void 0,"Invalid undefined schema"),Array.isArray(n)&&(i(n.length,"Invalid empty array schema"),n.length===1&&(n=n[0]));const s=function(t){for(var l=arguments.length,r=new Array(l>1?l-1:0),a=1;a<l;a++)r[a-1]=arguments[a];return o.override!==!1?t.valid(e.override,...r):t.valid(...r)};if(d.simple(n))return s(e,n);if(typeof n=="function")return e.custom(n);if(i(typeof n=="object","Invalid schema content:",typeof n),b.isResolvable(n))return s(e,n);if(b.isSchema(n))return n;if(Array.isArray(n)){for(const t of n)if(!d.simple(t))return e.alternatives().try(...n);return s(e,...n)}return n instanceof RegExp?e.string().regex(n):n instanceof Date?s(e.date(),n):(i(Object.getPrototypeOf(n)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(n))},k.ref=function(e,n){return y.isRef(e)?e:y.create(e,n)},k.compile=function(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.assertOptions(o,["legacy"]);const s=n&&n[b.symbols.any];if(s)return i(o.legacy||s.version===b.version,"Cannot mix different versions of joi schemas:",s.version,b.version),n;if(typeof n!="object"||!o.legacy)return k.schema(e,n,{appendPath:!0});const t=d.walk(n);return t?t.compile(t.root,n):k.schema(e,n,{appendPath:!0})},d.walk=function(e){if(typeof e!="object")return null;if(Array.isArray(e)){for(const o of e){const s=d.walk(o);if(s)return s}return null}const n=e[b.symbols.any];if(n)return{root:e[n.root],compile:n.compile};i(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const o in e){const s=d.walk(e[o]);if(s)return s}return null},d.simple=function(e){return e===null||["boolean","string","number"].includes(typeof e)},k.when=function(e,n,o){if(o===void 0&&(i(n&&typeof n=="object","Missing options"),o=n,n=y.create(".")),Array.isArray(o)&&(o={switch:o}),b.assertOptions(o,["is","not","then","otherwise","switch","break"]),b.isSchema(n))return i(o.is===void 0,'"is" can not be used with a schema condition'),i(o.not===void 0,'"not" can not be used with a schema condition'),i(o.switch===void 0,'"switch" can not be used with a schema condition'),d.condition(e,{is:n,then:o.then,otherwise:o.otherwise,break:o.break});if(i(y.isRef(n)||typeof n=="string","Invalid condition:",n),i(o.not===void 0||o.is===void 0,'Cannot combine "is" with "not"'),o.switch===void 0){let t=o;o.not!==void 0&&(t={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let l=t.is!==void 0?e.$_compile(t.is):e.$_root.invalid(null,!1,0,"").required();return i(t.then!==void 0||t.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),i(t.break===void 0||t.then===void 0||t.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),o.is===void 0||y.isRef(o.is)||b.isSchema(o.is)||(l=l.required()),d.condition(e,{ref:k.ref(n),is:l,then:t.then,otherwise:t.otherwise,break:t.break})}i(Array.isArray(o.switch),'"switch" must be an array'),i(o.is===void 0,'Cannot combine "switch" with "is"'),i(o.not===void 0,'Cannot combine "switch" with "not"'),i(o.then===void 0,'Cannot combine "switch" with "then"');const s={ref:k.ref(n),switch:[],break:o.break};for(let t=0;t<o.switch.length;++t){const l=o.switch[t],r=t===o.switch.length-1;b.assertOptions(l,r?["is","then","otherwise"]:["is","then"]),i(l.is!==void 0,'Switch statement missing "is"'),i(l.then!==void 0,'Switch statement missing "then"');const a={is:e.$_compile(l.is),then:e.$_compile(l.then)};if(y.isRef(l.is)||b.isSchema(l.is)||(a.is=a.is.required()),r){i(o.otherwise===void 0||l.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const u=o.otherwise!==void 0?o.otherwise:l.otherwise;u!==void 0&&(i(s.break===void 0,"Cannot specify both otherwise and break"),a.otherwise=e.$_compile(u))}s.switch.push(a)}return s},d.condition=function(e,n){for(const o of["then","otherwise"])n[o]===void 0?delete n[o]:n[o]=e.$_compile(n[o]);return n}},6354:(E,k,f)=>{const i=f(5688),b=f(8160),y=f(3328);k.Report=class{constructor(d,e,n,o,s,t,l){if(this.code=d,this.flags=o,this.messages=s,this.path=t.path,this.prefs=l,this.state=t,this.value=e,this.message=null,this.template=null,this.local=n||{},this.local.label=k.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const r=this.path[this.path.length-1];typeof r!="object"&&(this.local.key=r)}}_setTemplate(d){if(this.template=d,!this.flags.label&&this.path.length===0){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const d=this.code;if(!this.prefs.errors.render)return this.code;const e=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return e===void 0?`Error code "${d}" is not defined, your custom type is missing the correct messages definition`:(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(d,e){return k.template(this.value,d,e||this.code,this.state,this.prefs)}},k.path=function(d){let e="";for(const n of d)typeof n!="object"&&(typeof n=="string"?(e&&(e+="."),e+=n):e+=`[${n}]`);return e},k.template=function(d,e,n,o,s){if(!e)return;if(y.isTemplate(e))return n!=="root"?e:null;let t=s.errors.language;if(b.isResolvable(t)&&(t=t.resolve(d,o,s)),t&&e[t]){if(e[t][n]!==void 0)return e[t][n];if(e[t]["*"]!==void 0)return e[t]["*"]}return e[n]?e[n]:e["*"]},k.label=function(d,e,n,o){if(d.label)return d.label;if(!n.errors.label)return"";let s=e.path;return n.errors.label==="key"&&e.path.length>1&&(s=e.path.slice(-1)),k.path(s)||k.template(null,n.messages,"root",e,n)||o&&k.template(null,o,"root",e,n)||"value"},k.process=function(d,e,n){if(!d)return null;const{override:o,message:s,details:t}=k.details(d);if(o)return o;if(n.errors.stack)return new k.ValidationError(s,t,e);const l=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new k.ValidationError(s,t,e);return Error.stackTraceLimit=l,r},k.details=function(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];const o=[];for(const s of d){if(s instanceof Error){if(e.override!==!1)return{override:s};const l=s.toString();n.push(l),o.push({message:l,type:"override",context:{error:s}});continue}const t=s.toString();n.push(t),o.push({message:t,path:s.path.filter(l=>typeof l!="object"),type:s.code,context:s.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:o}},k.ValidationError=class extends Error{constructor(d,e,n){super(d),this._original=n,this.details=e}static isError(d){return d instanceof k.ValidationError}},k.ValidationError.prototype.isJoi=!0,k.ValidationError.prototype.name="ValidationError",k.ValidationError.prototype.annotate=i.error},8901:(E,k,f)=>{const i=f(375),b=f(8571),y=f(8160),d=f(6914),e={};k.type=function(n,o){const s=Object.getPrototypeOf(n),t=b(s),l=n._assign(Object.create(t)),r=Object.assign({},o);delete r.base,t._definition=r;const a=s._definition||{};r.messages=d.merge(a.messages,r.messages),r.properties=Object.assign({},a.properties,r.properties),l.type=r.type,r.flags=Object.assign({},a.flags,r.flags);const u=Object.assign({},a.terms);if(r.terms)for(const v in r.terms){const c=r.terms[v];i(l.$_terms[v]===void 0,"Invalid term override for",r.type,v),l.$_terms[v]=c.init,u[v]=c}r.terms=u,r.args||(r.args=a.args),r.prepare=e.prepare(r.prepare,a.prepare),r.coerce&&(typeof r.coerce=="function"&&(r.coerce={method:r.coerce}),r.coerce.from&&!Array.isArray(r.coerce.from)&&(r.coerce={method:r.coerce.method,from:[].concat(r.coerce.from)})),r.coerce=e.coerce(r.coerce,a.coerce),r.validate=e.validate(r.validate,a.validate);const h=Object.assign({},a.rules);if(r.rules)for(const v in r.rules){const c=r.rules[v];i(typeof c=="object","Invalid rule definition for",r.type,v);let p=c.method;if(p===void 0&&(p=function(){return this.$_addRule(v)}),p&&(i(!t[v],"Rule conflict in",r.type,v),t[v]=p),i(!h[v],"Rule conflict in",r.type,v),h[v]=c,c.alias){const m=[].concat(c.alias);for(const F of m)t[F]=c.method}c.args&&(c.argsByName=new Map,c.args=c.args.map(m=>(typeof m=="string"&&(m={name:m}),i(!c.argsByName.has(m.name),"Duplicated argument name",m.name),y.isSchema(m.assert)&&(m.assert=m.assert.strict().label(m.name)),c.argsByName.set(m.name,m),m)))}r.rules=h;const g=Object.assign({},a.modifiers);if(r.modifiers)for(const v in r.modifiers){i(!t[v],"Rule conflict in",r.type,v);const c=r.modifiers[v];i(typeof c=="function","Invalid modifier definition for",r.type,v);const p=function(m){return this.rule({[v]:m})};t[v]=p,g[v]=c}if(r.modifiers=g,r.overrides){t._super=s,l.$_super={};for(const v in r.overrides)i(s[v],"Cannot override missing",v),r.overrides[v][y.symbols.parent]=s[v],l.$_super[v]=s[v].bind(l);Object.assign(t,r.overrides)}r.cast=Object.assign({},a.cast,r.cast);const x=Object.assign({},a.manifest,r.manifest);return x.build=e.build(r.manifest&&r.manifest.build,a.manifest&&a.manifest.build),r.manifest=x,r.rebuild=e.rebuild(r.rebuild,a.rebuild),l},e.build=function(n,o){return n&&o?function(s,t){return o(n(s,t),t)}:n||o},e.coerce=function(n,o){return n&&o?{from:n.from&&o.from?[...new Set([...n.from,...o.from])]:null,method(s,t){let l;if((!o.from||o.from.includes(typeof s))&&(l=o.method(s,t),l)){if(l.errors||l.value===void 0)return l;s=l.value}if(!n.from||n.from.includes(typeof s)){const r=n.method(s,t);if(r)return r}return l}}:n||o},e.prepare=function(n,o){return n&&o?function(s,t){const l=n(s,t);if(l){if(l.errors||l.value===void 0)return l;s=l.value}return o(s,t)||l}:n||o},e.rebuild=function(n,o){return n&&o?function(s){o(s),n(s)}:n||o},e.validate=function(n,o){return n&&o?function(s,t){const l=o(s,t);if(l){if(l.errors&&(!Array.isArray(l.errors)||l.errors.length))return l;s=l.value}return n(s,t)||l}:n||o}},5107:(E,k,f)=>{const i=f(375),b=f(8571),y=f(8652),d=f(8160),e=f(3292),n=f(6354),o=f(8901),s=f(9708),t=f(6133),l=f(3328),r=f(1152);let a;const u={types:{alternatives:f(4946),any:f(8068),array:f(546),boolean:f(4937),date:f(7500),function:f(390),link:f(8785),number:f(3832),object:f(8966),string:f(7417),symbol:f(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const h={_types:new Set(Object.keys(u.types))};for(const g of h._types)h[g]=function(){for(var x=arguments.length,v=new Array(x),c=0;c<x;c++)v[c]=arguments[c];return i(!v.length||["alternatives","link","object"].includes(g),"The",g,"type does not allow arguments"),u.generate(this,u.types[g],v)};for(const g of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])h[g]=function(){return this.any()[g](...arguments)};Object.assign(h,u.methods);for(const g in u.aliases){const x=u.aliases[g];h[g]=h[x]}return h.x=h.expression,r.setup&&r.setup(h),h}};u.methods={ValidationError:n.ValidationError,version:d.version,cache:y.provider,assert(h,g){for(var x=arguments.length,v=new Array(x>2?x-2:0),c=2;c<x;c++)v[c-2]=arguments[c];u.assert(h,g,!0,v)},attempt(h,g){for(var x=arguments.length,v=new Array(x>2?x-2:0),c=2;c<x;c++)v[c-2]=arguments[c];return u.assert(h,g,!1,v)},build(h){return i(typeof s.build=="function","Manifest functionality disabled"),s.build(this,h)},checkPreferences(h){d.checkPreferences(h)},compile(h,g){return e.compile(this,h,g)},defaults(h){i(typeof h=="function","modifier must be a function");const g=Object.assign({},this);for(const x of g._types){const v=h(g[x]());i(d.isSchema(v),"modifier must return a valid schema object"),g[x]=function(){for(var c=arguments.length,p=new Array(c),m=0;m<c;m++)p[m]=arguments[m];return u.generate(this,v,p)}}return g},expression(){for(var h=arguments.length,g=new Array(h),x=0;x<h;x++)g[x]=arguments[x];return new l(...g)},extend(){for(var h=arguments.length,g=new Array(h),x=0;x<h;x++)g[x]=arguments[x];d.verifyFlat(g,"extend"),a=a||f(3378),i(g.length,"You need to provide at least one extension"),this.assert(g,a.extensions);const v=Object.assign({},this);v._types=new Set(v._types);for(let c of g){typeof c=="function"&&(c=c(v)),this.assert(c,a.extension);const p=u.expandExtension(c,v);for(const m of p){i(v[m.type]===void 0||v._types.has(m.type),"Cannot override name",m.type);const F=m.base||this.any(),C=o.type(F,m);v._types.add(m.type),v[m.type]=function(){for(var D=arguments.length,R=new Array(D),j=0;j<D;j++)R[j]=arguments[j];return u.generate(this,C,R)}}}return v},isError:n.ValidationError.isError,isExpression:l.isTemplate,isRef:t.isRef,isSchema:d.isSchema,in(){return t.in(...arguments)},override:d.symbols.override,ref(){return t.create(...arguments)},types(){const h={};for(const g of this._types)h[g]=this[g]();for(const g in u.aliases)h[g]=this[g]();return h}},u.assert=function(h,g,x,v){const c=v[0]instanceof Error||typeof v[0]=="string"?v[0]:null,p=c!==null?v[1]:v[0],m=g.validate(h,d.preferences({errors:{stack:!0}},p||{}));let F=m.error;if(!F)return m.value;if(c instanceof Error)throw c;const C=x&&typeof F.annotate=="function"?F.annotate():F.message;throw F instanceof n.ValidationError==0&&(F=b(F)),F.message=c?`${c} ${C}`:C,F},u.generate=function(h,g,x){return i(h,"Must be invoked on a Joi instance."),g.$_root=h,g._definition.args&&x.length?g._definition.args(g,...x):g},u.expandExtension=function(h,g){if(typeof h.type=="string")return[h];const x=[];for(const v of g._types)if(h.type.test(v)){const c=Object.assign({},h);c.type=v,c.base=g[v](),x.push(c)}return x},E.exports=u.root()},6914:(E,k,f)=>{const i=f(375),b=f(8571),y=f(3328);k.compile=function(d,e){if(typeof d=="string")return i(!e,"Cannot set single message string"),new y(d);if(y.isTemplate(d))return i(!e,"Cannot set single message template"),d;i(typeof d=="object"&&!Array.isArray(d),"Invalid message options"),e=e?b(e):{};for(let n in d){const o=d[n];if(n==="root"||y.isTemplate(o)){e[n]=o;continue}if(typeof o=="string"){e[n]=new y(o);continue}i(typeof o=="object"&&!Array.isArray(o),"Invalid message for",n);const s=n;for(n in e[s]=e[s]||{},o){const t=o[n];n==="root"||y.isTemplate(t)?e[s][n]=t:(i(typeof t=="string","Invalid message for",n,"in",s),e[s][n]=new y(t))}}return e},k.decompile=function(d){const e={};for(let n in d){const o=d[n];if(n==="root"){e.root=o;continue}if(y.isTemplate(o)){e[n]=o.describe({compact:!0});continue}const s=n;for(n in e[s]={},o){const t=o[n];n!=="root"?e[s][n]=t.describe({compact:!0}):e[s].root=t}}return e},k.merge=function(d,e){if(!d)return k.compile(e);if(!e)return d;if(typeof e=="string")return new y(e);if(y.isTemplate(e))return e;const n=b(d);for(let o in e){const s=e[o];if(o==="root"||y.isTemplate(s)){n[o]=s;continue}if(typeof s=="string"){n[o]=new y(s);continue}i(typeof s=="object"&&!Array.isArray(s),"Invalid message for",o);const t=o;for(o in n[t]=n[t]||{},s){const l=s[o];o==="root"||y.isTemplate(l)?n[t][o]=l:(i(typeof l=="string","Invalid message for",o,"in",t),n[t][o]=new y(l))}}return n}},2294:(E,k,f)=>{const i=f(375),b=f(8160),y=f(6133),d={};k.Ids=d.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new d.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[n,o]of e._byId.entries())i(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,o);for(const[n,o]of e._byKey.entries())i(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,o)}fork(e,n,o){const s=this._collect(e);s.push({schema:o});const t=s.shift();let l={id:t.id,schema:n(t.schema)};i(b.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const r of s)l={id:r.id,schema:d.fork(r.schema,l.id,l.schema)};return l.schema}labels(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const o=e[0],s=this._get(o);if(!s)return[...n,...e].join(".");const t=e.slice(1);return n=[...n,s.schema._flags.label||o],t.length?s.schema._ids.labels(t,n):n.join(".")}reach(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const o=e[0],s=this._get(o);i(s,"Schema does not contain path",[...n,...e].join("."));const t=e.slice(1);return t.length?s.schema._ids.reach(t,[...n,o]):s.schema}register(e){let{key:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!b.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const o=e._flags.id;if(o){const s=this._byId.get(o);i(!s||s.schema===e,"Cannot add different schemas with the same id:",o),i(!this._byKey.has(o),"Schema id conflicts with existing key:",o),this._byId.set(o,{schema:e,id:o})}n&&(i(!this._byKey.has(n),"Schema already contains key:",n),i(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,{schema:e,id:n}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const s=e[0],t=this._get(s);i(t,"Schema does not contain path",[...n,...e].join(".")),o=[t,...o];const l=e.slice(1);return l.length?t.schema._ids._collect(l,[...n,s],o):o}_get(e){return this._byId.get(e)||this._byKey.get(e)}},d.fork=function(e,n,o){const s=k.schema(e,{each:(t,l)=>{let{key:r}=l;if(n===(t._flags.id||r))return o},ref:!1});return s?s.$_mutateRebuild():e},k.schema=function(e,n){let o;for(const s in e._flags){if(s[0]==="_")continue;const t=d.scan(e._flags[s],{source:"flags",name:s},n);t!==void 0&&(o=o||e.clone(),o._flags[s]=t)}for(let s=0;s<e._rules.length;++s){const t=e._rules[s],l=d.scan(t.args,{source:"rules",name:t.name},n);if(l!==void 0){o=o||e.clone();const r=Object.assign({},t);r.args=l,o._rules[s]=r,o._singleRules.get(t.name)===t&&o._singleRules.set(t.name,r)}}for(const s in e.$_terms){if(s[0]==="_")continue;const t=d.scan(e.$_terms[s],{source:"terms",name:s},n);t!==void 0&&(o=o||e.clone(),o.$_terms[s]=t)}return o},d.scan=function(e,n,o,s,t){const l=s||[];if(e===null||typeof e!="object")return;let r;if(Array.isArray(e)){for(let a=0;a<e.length;++a){const u=n.source==="terms"&&n.name==="keys"&&e[a].key,h=d.scan(e[a],n,o,[a,...l],u);h!==void 0&&(r=r||e.slice(),r[a]=h)}return r}if(o.schema!==!1&&b.isSchema(e)||o.ref!==!1&&y.isRef(e)){const a=o.each(e,{...n,path:l,key:t});return a===e?void 0:a}for(const a in e){if(a[0]==="_")continue;const u=d.scan(e[a],n,o,[a,...l],t);u!==void 0&&(r=r||Object.assign({},e),r[a]=u)}return r}},6133:(E,k,f)=>{const i=f(375),b=f(8571),y=f(9621),d=f(8160);let e;const n={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};k.create=function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(typeof o=="string","Invalid reference key:",o),d.assertOptions(s,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),i(!s.prefix||typeof s.prefix=="object","options.prefix must be of type object");const t=Object.assign({},n.defaults,s);delete t.prefix;const l=t.separator,r=n.context(o,l,s.prefix);if(t.type=r.type,o=r.key,t.type==="value")if(r.root&&(i(!l||o[0]!==l,"Cannot specify relative path with root prefix"),t.ancestor="root",o||(o=null)),l&&l===o)o=null,t.ancestor=0;else if(t.ancestor!==void 0)i(!l||!o||o[0]!==l,"Cannot combine prefix with ancestor option");else{const[a,u]=n.ancestor(o,l);u&&(o=o.slice(u))===""&&(o=null),t.ancestor=a}return t.path=l?o===null?[]:o.split(l):[o],new n.Ref(t)},k.in=function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k.create(o,{...s,in:!0})},k.isRef=function(o){return!!o&&!!o[d.symbols.ref]},n.Ref=class{constructor(o){i(typeof o=="object","Invalid reference construction"),d.assertOptions(o,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),i([!1,void 0].includes(o.separator)||typeof o.separator=="string"&&o.separator.length===1,"Invalid separator"),i(!o.adjust||typeof o.adjust=="function","options.adjust must be a function"),i(!o.map||Array.isArray(o.map),"options.map must be an array"),i(!o.map||!o.adjust,"Cannot set both map and adjust options"),Object.assign(this,n.defaults,o),i(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(o,s,t,l){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return i(!this.in||r.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(t.context,s,r):this.type==="local"?this._resolve(l,s,r):this.ancestor?this.ancestor==="root"?this._resolve(s.ancestors[s.ancestors.length-1],s,r):(i(this.ancestor<=s.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(s.ancestors[this.ancestor-1],s,r)):this._resolve(o,s,r)}_resolve(o,s,t){let l;if(this.type==="value"&&s.mainstay.shadow&&t.shadow!==!1&&(l=s.mainstay.shadow.get(this.absolute(s))),l===void 0&&(l=y(o,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(l=this.adjust(l)),this.map){const r=this.map.get(l);r!==void 0&&(l=r)}return s.mainstay&&s.mainstay.tracer.resolve(s,this,l),l}toString(){return this.display}absolute(o){return[...o.path.slice(0,-this.ancestor),...this.path]}clone(){return new n.Ref(this)}describe(){const o={path:this.path};this.type!=="value"&&(o.type=this.type),this.separator!=="."&&(o.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(o.ancestor=this.ancestor),this.map&&(o.map=[...this.map]);for(const s of["adjust","iterables","render"])this[s]!==null&&this[s]!==void 0&&(o[s]=this[s]);return this.in!==!1&&(o.in=!0),{ref:o}}updateDisplay(){const o=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${o}`);if(!this.separator)return void(this.display=`ref:${o}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${o}`);if(this.ancestor==="root")return void(this.display=`ref:root:${o}`);if(this.ancestor===1)return void(this.display=`ref:${o||".."}`);const s=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${s}${o||""}`}},n.Ref.prototype[d.symbols.ref]=!0,k.build=function(o){return(o=Object.assign({},n.defaults,o)).type==="value"&&o.ancestor===void 0&&(o.ancestor=1),new n.Ref(o)},n.context=function(o,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(o=o.trim(),t){const l=t.global===void 0?"$":t.global;if(l!==s&&o.startsWith(l))return{key:o.slice(l.length),type:"global"};const r=t.local===void 0?"#":t.local;if(r!==s&&o.startsWith(r))return{key:o.slice(r.length),type:"local"};const a=t.root===void 0?"/":t.root;if(a!==s&&o.startsWith(a))return{key:o.slice(a.length),type:"value",root:!0}}return{key:o,type:"value"}},n.ancestor=function(o,s){if(!s)return[1,0];if(o[0]!==s)return[1,0];if(o[1]!==s)return[0,1];let t=2;for(;o[t]===s;)++t;return[t-1,t]},k.toSibling=0,k.toParent=1,k.Manager=class{constructor(){this.refs=[]}register(o,s){if(o)if(s=s===void 0?k.toParent:s,Array.isArray(o))for(const t of o)this.register(t,s);else if(d.isSchema(o))for(const t of o._refs.refs)t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root});else k.isRef(o)&&o.type==="value"&&o.ancestor-s>=0&&this.refs.push({ancestor:o.ancestor-s,root:o.root}),e=e||f(3328),e.isTemplate(o)&&this.register(o.refs(),s)}get length(){return this.refs.length}clone(){const o=new k.Manager;return o.refs=b(this.refs),o}reset(){this.refs=[]}roots(){return this.refs.filter(o=>!o.ancestor).map(o=>o.root)}}},3378:(E,k,f)=>{const i=f(5107),b={};b.wrap=i.string().min(1).max(2).allow(!1),k.preferences=i.object({allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),context:i.object(),convert:i.boolean(),dateFormat:i.valid("date","iso","string","time","utc"),debug:i.boolean(),errors:{escapeHtml:i.boolean(),label:i.valid("path","key",!1),language:[i.string(),i.object().ref()],render:i.boolean(),stack:i.boolean(),wrap:{label:b.wrap,array:b.wrap,string:b.wrap}},externals:i.boolean(),messages:i.object(),noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:i.valid("required","optional","forbidden"),skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()}).strict(),b.nameRx=/^[a-zA-Z0-9]\w*$/,b.rule=i.object({alias:i.array().items(i.string().pattern(b.nameRx)).single(),args:i.array().items(i.string(),i.object({name:i.string().pattern(b.nameRx).required(),ref:i.boolean(),assert:i.alternatives([i.function(),i.object().schema()]).conditional("ref",{is:!0,then:i.required()}),normalize:i.function(),message:i.string().when("assert",{is:i.function(),then:i.required()})})),convert:i.boolean(),manifest:i.boolean(),method:i.function().allow(!1),multi:i.boolean(),validate:i.function()}),k.extension=i.object({type:i.alternatives([i.string(),i.object().regex()]).required(),args:i.function(),cast:i.object().pattern(b.nameRx,i.object({from:i.function().maxArity(1).required(),to:i.function().minArity(1).maxArity(2).required()})),base:i.object().schema().when("type",{is:i.object().regex(),then:i.forbidden()}),coerce:[i.function().maxArity(3),i.object({method:i.function().maxArity(3).required(),from:i.array().items(i.string()).single()})],flags:i.object().pattern(b.nameRx,i.object({setter:i.string(),default:i.any()})),manifest:{build:i.function().arity(2)},messages:[i.object(),i.string()],modifiers:i.object().pattern(b.nameRx,i.function().minArity(1).maxArity(2)),overrides:i.object().pattern(b.nameRx,i.function()),prepare:i.function().maxArity(3),rebuild:i.function().arity(1),rules:i.object().pattern(b.nameRx,b.rule),terms:i.object().pattern(b.nameRx,i.object({init:i.array().allow(null).required(),manifest:i.object().pattern(/.+/,[i.valid("schema","single"),i.object({mapped:i.object({from:i.string().required(),to:i.string().required()}).required()})])})),validate:i.function().maxArity(3)}).strict(),k.extensions=i.array().items(i.object(),i.function().arity(1)).strict(),b.desc={buffer:i.object({buffer:i.string()}),func:i.object({function:i.function().required(),options:{literal:!0}}),override:i.object({override:!0}),ref:i.object({ref:i.object({type:i.valid("value","global","local"),path:i.array().required(),separator:i.string().length(1).allow(!1),ancestor:i.number().min(0).integer().allow("root"),map:i.array().items(i.array().length(2)).min(1),adjust:i.function(),iterables:i.boolean(),in:i.boolean(),render:i.boolean()}).required()}),regex:i.object({regex:i.string().min(3)}),special:i.object({special:i.valid("deep").required()}),template:i.object({template:i.string().required(),options:i.object()}),value:i.object({value:i.alternatives([i.object(),i.array()]).required()})},b.desc.entity=i.alternatives([i.array().items(i.link("...")),i.boolean(),i.function(),i.number(),i.string(),b.desc.buffer,b.desc.func,b.desc.ref,b.desc.regex,b.desc.special,b.desc.template,b.desc.value,i.link("/")]),b.desc.values=i.array().items(null,i.boolean(),i.function(),i.number().allow(1/0,-1/0),i.string().allow(""),i.symbol(),b.desc.buffer,b.desc.func,b.desc.override,b.desc.ref,b.desc.regex,b.desc.template,b.desc.value),b.desc.messages=i.object().pattern(/.+/,[i.string(),b.desc.template,i.object().pattern(/.+/,[i.string(),b.desc.template])]),k.description=i.object({type:i.string().required(),flags:i.object({cast:i.string(),default:i.any(),description:i.string(),empty:i.link("/"),failover:b.desc.entity,id:i.string(),label:i.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:i.boolean(),unit:i.string()}).unknown(),preferences:{allowUnknown:i.boolean(),abortEarly:i.boolean(),artifacts:i.boolean(),cache:i.boolean(),convert:i.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:i.boolean(),label:["path","key"],language:[i.string(),b.desc.ref],wrap:{label:b.wrap,array:b.wrap}},externals:i.boolean(),messages:b.desc.messages,noDefaults:i.boolean(),nonEnumerables:i.boolean(),presence:["required","optional","forbidden"],skipFunctions:i.boolean(),stripUnknown:i.object({arrays:i.boolean(),objects:i.boolean()}).or("arrays","objects").allow(!0,!1),warnings:i.boolean()},allow:b.desc.values,invalid:b.desc.values,rules:i.array().min(1).items({name:i.string().required(),args:i.object().min(1),keep:i.boolean(),message:[i.string(),b.desc.messages],warn:i.boolean()}),keys:i.object().pattern(/.*/,i.link("/")),link:b.desc.ref}).pattern(/^[a-z]\w*$/,i.any())},493:(E,k,f)=>{const i=f(8571),b=f(9621),y=f(8160),d={value:Symbol("value")};E.exports=d.State=class{constructor(e,n,o){this.path=e,this.ancestors=n,this.mainstay=o.mainstay,this.schemas=o.schemas,this.debug=null}localize(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const s=new d.State(e,n,this);return o&&s.schemas&&(s.schemas=[d.schemas(o),...s.schemas]),s}nest(e,n){const o=new d.State(this.path,this.ancestors,this);return o.schemas=o.schemas&&[d.schemas(e),...o.schemas],o.debug=n,o}shadow(e,n){this.mainstay.shadow=this.mainstay.shadow||new d.Shadow,this.mainstay.shadow.set(this.path,e,n)}snapshot(){this.mainstay.shadow&&(this._snapshot=i(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},d.schemas=function(e){return y.isSchema(e)?{schema:e}:e},d.Shadow=class{constructor(){this._values=null}set(e,n,o){if(!e.length||o==="strip"&&typeof e[e.length-1]=="number")return;this._values=this._values||new Map;let s=this._values;for(let t=0;t<e.length;++t){const l=e[t];let r=s.get(l);r||(r=new Map,s.set(l,r)),s=r}s[d.value]=n}get(e){const n=this.node(e);if(n)return n[d.value]}node(e){if(this._values)return b(this._values,e,{iterables:!0})}override(e,n){if(!this._values)return;const o=e.slice(0,-1),s=e[e.length-1],t=b(this._values,o,{iterables:!0});n?t.set(s,n):t&&t.delete(s)}}},3328:(E,k,f)=>{const i=f(375),b=f(8571),y=f(5277),d=f(1447),e=f(8160),n=f(6354),o=f(6133),s={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};E.exports=s.Template=class{constructor(t,l){if(i(typeof t=="string","Template source must be a string"),i(!t.includes("\0")&&!t.includes(""),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this._template=null,l){const{functions:r,...a}=l;this._settings=Object.keys(a).length?b(a):void 0,this._functions=r,this._functions&&(i(Object.keys(this._functions).every(u=>typeof u=="string"),"Functions keys must be strings"),i(Object.values(this._functions).every(u=>typeof u=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const t=s.encode(this.source),l=s.split(t);let r=!1;const a=[],u=l.shift();u&&a.push(u);for(const h of l){const g=h[0]!=="{",x=g?"}":"}}",v=h.indexOf(x);if(v===-1||h[1]==="{"){a.push(`{${s.decode(h)}`);continue}let c=h.slice(g?0:1,v);const p=c[0]===":";p&&(c=c.slice(1));const m=this._ref(s.decode(c),{raw:g,wrapped:p});a.push(m),typeof m!="string"&&(r=!0);const F=h.slice(v+x.length);F&&a.push(s.decode(F))}r?this._template=a:this.rendered=a.join("")}static date(t,l){return s.dateFormat[l.dateFormat].call(t)}describe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._settings&&t.compact)return this.source;const l={template:this.source};return this._settings&&(l.options=this._settings),this._functions&&(l.functions=this._functions),l}static build(t){return new s.Template(t.template,t.options||t.functions?{...t.options,functions:t.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(t){return!!t&&!!t[e.symbols.template]}refs(){if(!this._template)return;const t=[];for(const l of this._template)typeof l!="string"&&t.push(...l.refs);return t}resolve(t,l,r,a){return this._template&&this._template.length===1?this._part(this._template[0],t,l,r,a,{}):this.render(t,l,r,a)}_part(t){for(var l=arguments.length,r=new Array(l>1?l-1:0),a=1;a<l;a++)r[a-1]=arguments[a];return t.ref?t.ref.resolve(...r):t.formula.evaluate(r)}render(t,l,r,a){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(!this.isDynamic())return this.rendered;const h=[];for(const g of this._template)if(typeof g=="string")h.push(g);else{const x=this._part(g,t,l,r,a,u),v=s.stringify(x,t,l,r,a,u);if(v!==void 0){const c=g.raw||(u.errors&&u.errors.escapeHtml)===!1?v:y(v);h.push(s.wrap(c,g.wrapped&&r.errors.wrap.label))}}return h.join("")}_ref(t,l){let{raw:r,wrapped:a}=l;const u=[],h=x=>{const v=o.create(x,this._settings);return u.push(v),c=>{const p=v.resolve(...c);return p!==void 0?p:null}};try{const x=this._functions?{...s.functions,...this._functions}:s.functions;var g=new d.Parser(t,{reference:h,functions:x,constants:s.constants})}catch(x){throw x.message=`Invalid template variable "${t}" fails due to: ${x.message}`,x}if(g.single){if(g.single.type==="reference"){const x=u[0];return{ref:x,raw:r,refs:u,wrapped:a||x.type==="local"&&x.key==="label"}}return s.stringify(g.single.value)}return{formula:g,raw:r,refs:u}}toString(){return this.source}},s.Template.prototype[e.symbols.template]=!0,s.Template.prototype.isImmutable=!0,s.encode=function(t){return t.replace(/\\(\{+)/g,(l,r)=>s.opens.slice(0,r.length)).replace(/\\(\}+)/g,(l,r)=>s.closes.slice(0,r.length))},s.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},s.split=function(t){const l=[];let r="";for(let a=0;a<t.length;++a){const u=t[a];if(u==="{"){let h="";for(;a+1<t.length&&t[a+1]==="{";)h+="{",++a;l.push(r),r=h}else r+=u}return l.push(r),l},s.wrap=function(t,l){return l?l.length===1?`${l}${t}${l}`:`${l[0]}${t}${l[1]}`:t},s.stringify=function(t,l,r,a,u){let h=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};const g=typeof t,x=a&&a.errors&&a.errors.wrap||{};let v=!1;if(o.isRef(t)&&t.render&&(v=t.in,t=t.resolve(l,r,a,u,{in:t.in,...h})),t===null)return"null";if(g==="string")return s.wrap(t,h.arrayItems&&x.string);if(g==="number"||g==="function"||g==="symbol")return t.toString();if(g!=="object")return JSON.stringify(t);if(t instanceof Date)return s.Template.date(t,a);if(t instanceof Map){const p=[];for(const[m,F]of t.entries())p.push(`${m.toString()} -> ${F.toString()}`);t=p}if(!Array.isArray(t))return t.toString();const c=[];for(const p of t)c.push(s.stringify(p,l,r,a,u,{arrayItems:!0,...h}));return s.wrap(c.join(", "),!v&&x.array)},s.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},s.functions={if:(t,l,r)=>t?l:r,length:t=>typeof t=="string"?t.length:t&&typeof t=="object"?Array.isArray(t)?t.length:Object.keys(t).length:null,msg(t){const[l,r,a,u,h]=this,g=h.messages;if(!g)return"";const x=n.template(l,g[0],t,r,a)||n.template(l,g[1],t,r,a);return x?x.render(l,r,a,u,h):""},number:t=>typeof t=="number"?t:typeof t=="string"?parseFloat(t):typeof t=="boolean"?t?1:0:t instanceof Date?t.getTime():null}},4946:(E,k,f)=>{const i=f(375),b=f(1687),y=f(8068),d=f(8160),e=f(3292),n=f(6354),o=f(6133),s={};E.exports=y.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:o.toSibling}},args(t){for(var l=arguments.length,r=new Array(l>1?l-1:0),a=1;a<l;a++)r[a-1]=arguments[a];return r.length===1&&Array.isArray(r[0])?t.try(...r[0]):t.try(...r)},validate(t,l){const{schema:r,error:a,state:u,prefs:h}=l;if(r._flags.match){const x=[],v=[];for(let p=0;p<r.$_terms.matches.length;++p){const m=r.$_terms.matches[p],F=u.nest(m.schema,`match.${p}`);F.snapshot();const C=m.schema.$_validate(t,F,h);C.errors?(v.push(C.errors),F.restore()):(x.push(C.value),F.commit())}if(x.length===0)return{errors:a("alternatives.any",{details:v.map(p=>n.details(p,{override:!1}))})};if(r._flags.match==="one")return x.length===1?{value:x[0]}:{errors:a("alternatives.one")};if(x.length!==r.$_terms.matches.length)return{errors:a("alternatives.all",{details:v.map(p=>n.details(p,{override:!1}))})};const c=p=>p.$_terms.matches.some(m=>m.schema.type==="object"||m.schema.type==="alternatives"&&c(m.schema));return c(r)?{value:x.reduce((p,m)=>b(p,m,{mergeArrays:!1}))}:{value:x[x.length-1]}}const g=[];for(let x=0;x<r.$_terms.matches.length;++x){const v=r.$_terms.matches[x];if(v.schema){const m=u.nest(v.schema,`match.${x}`);m.snapshot();const F=v.schema.$_validate(t,m,h);if(!F.errors)return m.commit(),F;m.restore(),g.push({schema:v.schema,reports:F.errors});continue}const c=v.ref?v.ref.resolve(t,u,h):t,p=v.is?[v]:v.switch;for(let m=0;m<p.length;++m){const F=p[m],{is:C,then:D,otherwise:R}=F,j=`match.${x}${v.switch?"."+m:""}`;if(C.$_match(c,u.nest(C,`${j}.is`),h)){if(D)return D.$_validate(t,u.nest(D,`${j}.then`),h)}else if(R)return R.$_validate(t,u.nest(R,`${j}.otherwise`),h)}}return s.errors(g,l)},rules:{conditional:{method(t,l){i(!this._flags._endedSwitch,"Unreachable condition"),i(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),i(l.break===void 0,"Cannot use break option with alternatives conditional");const r=this.clone(),a=e.when(r,t,l),u=a.is?[a]:a.switch;for(const h of u)if(h.then&&h.otherwise){r.$_setFlag("_endedSwitch",!0,{clone:!1});break}return r.$_terms.matches.push(a),r.$_mutateRebuild()}},match:{method(t){if(i(["any","one","all"].includes(t),"Invalid alternatives match mode",t),t!=="any")for(const l of this.$_terms.matches)i(l.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];i(l.length,"Missing alternative schemas"),d.verifyFlat(l,"try"),i(!this._flags._endedSwitch,"Unreachable condition");const a=this.clone();for(const u of l)a.$_terms.matches.push({schema:a.$_compile(u)});return a.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(l,r)=>r.path[0]!=="is"?l.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:l=>{d.isSchema(l)&&l.type==="array"&&t.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(t,l){if(l.matches)for(const r of l.matches){const{schema:a,ref:u,is:h,not:g,then:x,otherwise:v}=r;t=a?t.try(a):u?t.conditional(u,{is:h,then:x,not:g,otherwise:v,switch:r.switch}):t.conditional(h,{then:x,otherwise:v})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),s.errors=function(t,l){let{error:r,state:a}=l;if(!t.length)return{errors:r("alternatives.any")};if(t.length===1)return{errors:t[0].reports};const u=new Set,h=[];for(const{reports:g,schema:x}of t){if(g.length>1)return s.unmatched(t,r);const v=g[0];if(v instanceof n.Report==0)return s.unmatched(t,r);if(v.state.path.length!==a.path.length){h.push({type:x.type,report:v});continue}if(v.code==="any.only"){for(const m of v.local.valids)u.add(m);continue}const[c,p]=v.code.split(".");p==="base"?u.add(c):h.push({type:x.type,report:v})}return h.length?h.length===1?{errors:h[0].report}:s.unmatched(t,r):{errors:r("alternatives.types",{types:[...u]})}},s.unmatched=function(t,l){const r=[];for(const a of t)r.push(...a.reports);return{errors:l("alternatives.match",n.details(r,{override:!1}))}}},8068:(E,k,f)=>{const i=f(375),b=f(7629),y=f(8160),d=f(6914);E.exports=b.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,n){return i(typeof e=="function","Method must be a function"),i(n===void 0||n&&typeof n=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:n}})},validate(e,n,o){let{method:s}=o;try{return s(e,n)}catch(t){return n.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){i(y.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const n=this.clone();return n.$_terms.shared=n.$_terms.shared||[],n.$_terms.shared.push(e),n.$_mutateRegister(e),n}},warning:{method(e,n){return i(e&&typeof e=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:n},warn:!0})},validate(e,n,o){let{code:s,local:t}=o;return n.error(s,t)},args:["code","local"],multi:!0}},modifiers:{keep(e){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];e.keep=n},message(e,n){e.message=d.compile(n)},warn(e){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];e.warn=n}},manifest:{build(e,n){for(const o in n){const s=n[o];if(["examples","externals","metas","notes","tags"].includes(o))for(const t of s)e=e[o.slice(0,-1)](t);else if(o!=="alterations")if(o!=="whens"){if(o==="shared")for(const t of s)e=e.shared(t)}else for(const t of s){const{ref:l,is:r,not:a,then:u,otherwise:h,concat:g}=t;e=g?e.concat(g):l?e.when(l,{is:r,not:a,then:u,otherwise:h,switch:t.switch,break:t.break}):e.when(r,{then:u,otherwise:h,break:t.break})}else{const t={};for(const{target:l,adjuster:r}of s)t[l]=r;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(E,k,f)=>{const i=f(375),b=f(9474),y=f(9621),d=f(8068),e=f(8160),n=f(3292),o={};E.exports=d.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(s,t){let{schema:l,state:r,prefs:a}=t;if(!Array.isArray(s))return;const u=l.$_getRule("sort");return u?o.sort(l,s,u.args.options,r,a):void 0}},validate(s,t){let{schema:l,error:r}=t;if(!Array.isArray(s)){if(l._flags.single){const a=[s];return a[e.symbols.arraySingle]=!0,{value:a}}return{errors:r("array.base")}}if(l.$_getRule("items")||l.$_terms.externals)return{value:s.slice()}},rules:{has:{method(s){s=this.$_compile(s,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:s}});return t.$_mutateRegister(s),t},validate(s,t,l){let{state:r,prefs:a,error:u}=t,{schema:h}=l;const g=[s,...r.ancestors];for(let v=0;v<s.length;++v){const c=r.localize([...r.path,v],g,h);if(h.$_match(s[v],c,a))return s}const x=h._flags.label;return x?u("array.hasKnown",{patternLabel:x}):u("array.hasUnknown",null)},multi:!0},items:{method(){for(var s=arguments.length,t=new Array(s),l=0;l<s;l++)t[l]=arguments[l];e.verifyFlat(t,"items");const r=this.$_addRule("items");for(let a=0;a<t.length;++a){const u=e.tryWithPath(()=>this.$_compile(t[a]),a,{append:!0});r.$_terms.items.push(u)}return r.$_mutateRebuild()},validate(s,t){let{schema:l,error:r,state:a,prefs:u,errorsArray:h}=t;const g=l.$_terms._requireds.slice(),x=l.$_terms.ordered.slice(),v=[...l.$_terms._inclusions,...g],c=!s[e.symbols.arraySingle];delete s[e.symbols.arraySingle];const p=h();let m=s.length;for(let F=0;F<m;++F){const C=s[F];let D=!1,R=!1;const j=c?F:new Number(F),B=[...a.path,j];if(!l._flags.sparse&&C===void 0){if(p.push(r("array.sparse",{key:j,path:B,pos:F,value:void 0},a.localize(B))),u.abortEarly)return p;x.shift();continue}const O=[s,...a.ancestors];for(const M of l.$_terms._exclusions)if(M.$_match(C,a.localize(B,O,M),u,{presence:"ignore"})){if(p.push(r("array.excludes",{pos:F,value:C},a.localize(B))),u.abortEarly)return p;D=!0,x.shift();break}if(D)continue;if(l.$_terms.ordered.length){if(x.length){const M=x.shift(),L=M.$_validate(C,a.localize(B,O,M),u);if(L.errors){if(p.push(...L.errors),u.abortEarly)return p}else if(M._flags.result==="strip")o.fastSplice(s,F),--F,--m;else{if(!l._flags.sparse&&L.value===void 0){if(p.push(r("array.sparse",{key:j,path:B,pos:F,value:void 0},a.localize(B))),u.abortEarly)return p;continue}s[F]=L.value}continue}if(!l.$_terms.items.length){if(p.push(r("array.orderedLength",{pos:F,limit:l.$_terms.ordered.length})),u.abortEarly)return p;break}}const I=[];let P=g.length;for(let M=0;M<P;++M){const L=a.localize(B,O,g[M]);L.snapshot();const q=g[M].$_validate(C,L,u);if(I[M]=q,!q.errors){if(L.commit(),s[F]=q.value,R=!0,o.fastSplice(g,M),--M,--P,!l._flags.sparse&&q.value===void 0&&(p.push(r("array.sparse",{key:j,path:B,pos:F,value:void 0},a.localize(B))),u.abortEarly))return p;break}L.restore()}if(R)continue;const Y=u.stripUnknown&&!!u.stripUnknown.arrays||!1;P=v.length;for(const M of v){let L;const q=g.indexOf(M);if(q!==-1)L=I[q];else{const U=a.localize(B,O,M);if(U.snapshot(),L=M.$_validate(C,U,u),!L.errors){U.commit(),M._flags.result==="strip"?(o.fastSplice(s,F),--F,--m):l._flags.sparse||L.value!==void 0?s[F]=L.value:(p.push(r("array.sparse",{key:j,path:B,pos:F,value:void 0},a.localize(B))),D=!0),R=!0;break}U.restore()}if(P===1){if(Y){o.fastSplice(s,F),--F,--m,R=!0;break}if(p.push(...L.errors),u.abortEarly)return p;D=!0;break}}if(!D&&(l.$_terms._inclusions.length||l.$_terms._requireds.length)&&!R){if(Y){o.fastSplice(s,F),--F,--m;continue}if(p.push(r("array.includes",{pos:F,value:C},a.localize(B))),u.abortEarly)return p}}return g.length&&o.fillMissedErrors(l,p,g,s,a,u),x.length&&(o.fillOrderedErrors(l,p,x,s,a,u),p.length||o.fillDefault(x,s,a,u)),p.length?p:s},priority:!0,manifest:!1},length:{method(s){return this.$_addRule({name:"length",args:{limit:s},operator:"="})},validate(s,t,l,r){let{limit:a}=l,{name:u,operator:h,args:g}=r;return e.compare(s.length,a,h)?s:t.error("array."+u,{limit:g.limit,value:s})},args:[{name:"limit",ref:!0,assert:e.limit,message:"must be a positive integer"}]},max:{method(s){return this.$_addRule({name:"max",method:"length",args:{limit:s},operator:"<="})}},min:{method(s){return this.$_addRule({name:"min",method:"length",args:{limit:s},operator:">="})}},ordered:{method(){for(var s=arguments.length,t=new Array(s),l=0;l<s;l++)t[l]=arguments[l];e.verifyFlat(t,"ordered");const r=this.$_addRule("items");for(let a=0;a<t.length;++a){const u=e.tryWithPath(()=>this.$_compile(t[a]),a,{append:!0});o.validateSingle(u,r),r.$_mutateRegister(u),r.$_terms.ordered.push(u)}return r.$_mutateRebuild()}},single:{method(s){const t=s===void 0||!!s;return i(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.assertOptions(s,["by","order"]);const t={order:s.order||"ascending"};return s.by&&(t.by=n.ref(s.by,{ancestor:0}),i(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(s,t,l){let{error:r,state:a,prefs:u,schema:h}=t,{options:g}=l;const{value:x,errors:v}=o.sort(h,s,g,a,u);if(v)return v;for(let c=0;c<s.length;++c)if(s[c]!==x[c])return r("array.sort",{order:g.order,by:g.by?g.by.key:"value"});return s},convert:!0},sparse:{method(s){const t=s===void 0||!!s;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(!s||typeof s=="function"||typeof s=="string","comparator must be a function or a string"),e.assertOptions(t,["ignoreUndefined","separator"]);const l={name:"unique",args:{options:t,comparator:s}};if(s)if(typeof s=="string"){const r=e.default(t.separator,".");l.path=r?s.split(r):[s]}else l.comparator=s;return this.$_addRule(l)},validate(s,t,l,r){let{state:a,error:u,schema:h}=t,{comparator:g,options:x}=l,{comparator:v,path:c}=r;const p={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=v||b,F=x.ignoreUndefined;for(let C=0;C<s.length;++C){const D=c?y(s[C],c):s[C],R=v?p.custom:p[typeof D];if(i(R,"Failed to find unique map container for type",typeof D),R instanceof Map){const j=R.entries();let B;for(;!(B=j.next()).done;)if(m(B.value[0],D)){const O=a.localize([...a.path,C],[s,...a.ancestors]),I={pos:C,value:s[C],dupePos:B.value[1],dupeValue:s[B.value[1]]};return c&&(I.path=g),u("array.unique",I,O)}R.set(D,C)}else{if((!F||D!==void 0)&&R[D]!==void 0){const j={pos:C,value:s[C],dupePos:R[D],dupeValue:s[R[D]]};return c&&(j.path=g),u("array.unique",j,a.localize([...a.path,C],[s,...a.ancestors]))}R[D]=C}}return s},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(s,t)=>new Set(s)}},rebuild(s){s.$_terms._inclusions=[],s.$_terms._exclusions=[],s.$_terms._requireds=[];for(const t of s.$_terms.items)o.validateSingle(t,s),t._flags.presence==="required"?s.$_terms._requireds.push(t):t._flags.presence==="forbidden"?s.$_terms._exclusions.push(t):s.$_terms._inclusions.push(t);for(const t of s.$_terms.ordered)o.validateSingle(t,s)},manifest:{build:(s,t)=>(t.items&&(s=s.items(...t.items)),t.ordered&&(s=s.ordered(...t.ordered)),s)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),o.fillMissedErrors=function(s,t,l,r,a,u){const h=[];let g=0;for(const x of l){const v=x._flags.label;v?h.push(v):++g}h.length?g?t.push(s.$_createError("array.includesRequiredBoth",r,{knownMisses:h,unknownMisses:g},a,u)):t.push(s.$_createError("array.includesRequiredKnowns",r,{knownMisses:h},a,u)):t.push(s.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:g},a,u))},o.fillOrderedErrors=function(s,t,l,r,a,u){const h=[];for(const g of l)g._flags.presence==="required"&&h.push(g);h.length&&o.fillMissedErrors(s,t,h,r,a,u)},o.fillDefault=function(s,t,l,r){const a=[];let u=!0;for(let h=s.length-1;h>=0;--h){const g=s[h],x=[t,...l.ancestors],v=g.$_validate(void 0,l.localize(l.path,x,g),r).value;if(u){if(v===void 0)continue;u=!1}a.unshift(v)}a.length&&t.push(...a)},o.fastSplice=function(s,t){let l=t;for(;l<s.length;)s[l++]=s[l];--s.length},o.validateSingle=function(s,t){(s.type==="array"||s._flags._arrayItems)&&(i(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},o.sort=function(s,t,l,r,a){const u=l.order==="ascending"?1:-1,h=-1*u,g=u,x=(v,c)=>{let p=o.compare(v,c,h,g);if(p!==null||(l.by&&(v=l.by.resolve(v,r,a),c=l.by.resolve(c,r,a)),p=o.compare(v,c,h,g),p!==null))return p;const m=typeof v;if(m!==typeof c)throw s.$_createError("array.sort.mismatching",t,null,r,a);if(m!=="number"&&m!=="string")throw s.$_createError("array.sort.unsupported",t,{type:m},r,a);return m==="number"?(v-c)*u:v<c?h:g};try{return{value:t.slice().sort(x)}}catch(v){return{errors:v}}},o.compare=function(s,t,l,r){return s===t?0:s===void 0?1:t===void 0?-1:s===null?r:t===null?l:null}},4937:(E,k,f)=>{const i=f(375),b=f(8068),y=f(8160),d=f(2036),e={isBool:function(n){return typeof n=="boolean"}};E.exports=b.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(n,o){let{schema:s}=o;if(typeof n!="boolean"){if(typeof n=="string"){const t=s._flags.sensitive?n:n.toLowerCase();n=t==="true"||t!=="false"&&n}return typeof n!="boolean"&&(n=s.$_terms.truthy&&s.$_terms.truthy.has(n,null,null,!s._flags.sensitive)||(!s.$_terms.falsy||!s.$_terms.falsy.has(n,null,null,!s._flags.sensitive))&&n),{value:n}}},validate(n,o){let{error:s}=o;if(typeof n!="boolean")return{value:n,errors:s("boolean.base")}},rules:{truthy:{method(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];y.verifyFlat(o,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new d;for(let l=0;l<o.length;++l){const r=o[l];i(r!==void 0,"Cannot call truthy with undefined"),t.$_terms.truthy.add(r)}return t}},falsy:{method(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];y.verifyFlat(o,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new d;for(let l=0;l<o.length;++l){const r=o[l];i(r!==void 0,"Cannot call falsy with undefined"),t.$_terms.falsy.add(r)}return t}},sensitive:{method(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("sensitive",n)}}},cast:{number:{from:e.isBool,to:(n,o)=>n?1:0},string:{from:e.isBool,to:(n,o)=>n?"true":"false"}},manifest:{build:(n,o)=>(o.truthy&&(n=n.truthy(...o.truthy)),o.falsy&&(n=n.falsy(...o.falsy)),n)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(E,k,f)=>{const i=f(375),b=f(8068),y=f(8160),d=f(3328),e={isDate:function(n){return n instanceof Date}};E.exports=b.extend({type:"date",coerce:{from:["number","string"],method(n,o){let{schema:s}=o;return{value:e.parse(n,s._flags.format)||n}}},validate(n,o){let{schema:s,error:t,prefs:l}=o;if(n instanceof Date&&!isNaN(n.getTime()))return;const r=s._flags.format;return l.convert&&r&&typeof n=="string"?{value:n,errors:t("date.format",{format:r})}:{value:n,errors:t("date.base")}},rules:{compare:{method:!1,validate(n,o,s,t){let{date:l}=s,{name:r,operator:a,args:u}=t;const h=l==="now"?Date.now():l.getTime();return y.compare(n.getTime(),h,a)?n:o.error("date."+r,{limit:u.date,value:n})},args:[{name:"date",ref:!0,normalize:n=>n==="now"?n:e.parse(n),assert:n=>n!==null,message:"must have a valid date format"}]},format:{method(n){return i(["iso","javascript","unix"].includes(n),"Unknown date format",n),this.$_setFlag("format",n)}},greater:{method(n){return this.$_addRule({name:"greater",method:"compare",args:{date:n},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(n){return this.$_addRule({name:"less",method:"compare",args:{date:n},operator:"<"})}},max:{method(n){return this.$_addRule({name:"max",method:"compare",args:{date:n},operator:"<="})}},min:{method(n){return this.$_addRule({name:"min",method:"compare",args:{date:n},operator:">="})}},timestamp:{method(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"javascript";return i(["javascript","unix"].includes(n),'"type" must be one of "javascript, unix"'),this.format(n)}}},cast:{number:{from:e.isDate,to:(n,o)=>n.getTime()},string:{from:e.isDate,to(n,o){let{prefs:s}=o;return d.date(n,s)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),e.parse=function(n,o){if(n instanceof Date)return n;if(typeof n!="string"&&(isNaN(n)||!isFinite(n))||/^\s*$/.test(n))return null;if(o==="iso")return y.isIsoDate(n)?e.date(n.toString()):null;const s=n;if(typeof n=="string"&&/^[+-]?\d+(\.\d+)?$/.test(n)&&(n=parseFloat(n)),o){if(o==="javascript")return e.date(1*n);if(o==="unix")return e.date(1e3*n);if(typeof s=="string")return null}return e.date(n)},e.date=function(n){const o=new Date(n);return isNaN(o.getTime())?null:o}},390:(E,k,f)=>{const i=f(375),b=f(7824);E.exports=b.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(y){return i(Number.isSafeInteger(y)&&y>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:y}})},validate(y,d,e){let{n}=e;return y.length===n?y:d.error("function.arity",{n})}},class:{method(){return this.$_addRule("class")},validate:(y,d)=>/^\s*class\s/.test(y.toString())?y:d.error("function.class",{value:y})},minArity:{method(y){return i(Number.isSafeInteger(y)&&y>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:y}})},validate(y,d,e){let{n}=e;return y.length>=n?y:d.error("function.minArity",{n})}},maxArity:{method(y){return i(Number.isSafeInteger(y)&&y>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:y}})},validate(y,d,e){let{n}=e;return y.length<=n?y:d.error("function.maxArity",{n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(E,k,f)=>{const i=f(978),b=f(375),y=f(8571),d=f(3652),e=f(8068),n=f(8160),o=f(3292),s=f(6354),t=f(6133),l=f(3328),r={renameDefaults:{alias:!1,multiple:!1,override:!1}};E.exports=e.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(a,u)=>a.keys(u),validate(a,u){let{schema:h,error:g,state:x,prefs:v}=u;if(!a||typeof a!==h.$_property("typeof")||Array.isArray(a))return{value:a,errors:g("object.base",{type:h.$_property("typeof")})};if(!(h.$_terms.renames||h.$_terms.dependencies||h.$_terms.keys||h.$_terms.patterns||h.$_terms.externals))return;a=r.clone(a,v);const c=[];if(h.$_terms.renames&&!r.rename(h,a,x,v,c))return{value:a,errors:c};if(!h.$_terms.keys&&!h.$_terms.patterns&&!h.$_terms.dependencies)return{value:a,errors:c};const p=new Set(Object.keys(a));if(h.$_terms.keys){const m=[a,...x.ancestors];for(const F of h.$_terms.keys){const C=F.key,D=a[C];p.delete(C);const R=x.localize([...x.path,C],m,F),j=F.schema.$_validate(D,R,v);if(j.errors){if(v.abortEarly)return{value:a,errors:j.errors};j.value!==void 0&&(a[C]=j.value),c.push(...j.errors)}else F.schema._flags.result==="strip"||j.value===void 0&&D!==void 0?delete a[C]:j.value!==void 0&&(a[C]=j.value)}}if(p.size||h._flags._hasPatternMatch){const m=r.unknown(h,a,p,c,x,v);if(m)return m}if(h.$_terms.dependencies)for(const m of h.$_terms.dependencies){if(m.key!==null&&r.isPresent(m.options)(m.key.resolve(a,x,v,null,{shadow:!1}))===!1)continue;const F=r.dependencies[m.rel](h,m,a,x,v);if(F){const C=h.$_createError(F.code,a,F.context,x,v);if(v.abortEarly)return{value:a,errors:C};c.push(C)}}return{value:a,errors:c}},rules:{and:{method(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return n.verifyFlat(u,"and"),r.dependency(this,"and",null,u)}},append:{method(a){return a==null||Object.keys(a).length===0?this:this.keys(a)}},assert:{method(a,u,h){l.isTemplate(a)||(a=o.ref(a)),b(h===void 0||typeof h=="string","Message must be a string"),u=this.$_compile(u,{appendPath:!0});const g=this.$_addRule({name:"assert",args:{subject:a,schema:u,message:h}});return g.$_mutateRegister(a),g.$_mutateRegister(u),g},validate(a,u,h){let{error:g,prefs:x,state:v}=u,{subject:c,schema:p,message:m}=h;const F=c.resolve(a,v,x),C=t.isRef(c)?c.absolute(v):[];return p.$_match(F,v.localize(C,[a,...v.ancestors],p),x)?a:g("object.assert",{subject:c,message:m})},args:["subject","schema","message"],multi:!0},instance:{method(a,u){return b(typeof a=="function","constructor must be a function"),u=u||a.name,this.$_addRule({name:"instance",args:{constructor:a,name:u}})},validate(a,u,h){let{constructor:g,name:x}=h;return a instanceof g?a:u.error("object.instance",{type:x,value:a})},args:["constructor","name"]},keys:{method(a){b(a===void 0||typeof a=="object","Object schema must be a valid object"),b(!n.isSchema(a),"Object schema cannot be a joi schema");const u=this.clone();if(a)if(Object.keys(a).length){u.$_terms.keys=u.$_terms.keys?u.$_terms.keys.filter(h=>!a.hasOwnProperty(h.key)):new r.Keys;for(const h in a)n.tryWithPath(()=>u.$_terms.keys.push({key:h,schema:this.$_compile(a[h])}),h)}else u.$_terms.keys=new r.Keys;else u.$_terms.keys=null;return u.$_mutateRebuild()}},length:{method(a){return this.$_addRule({name:"length",args:{limit:a},operator:"="})},validate(a,u,h,g){let{limit:x}=h,{name:v,operator:c,args:p}=g;return n.compare(Object.keys(a).length,x,c)?a:u.error("object."+v,{limit:p.limit,value:a})},args:[{name:"limit",ref:!0,assert:n.limit,message:"must be a positive integer"}]},max:{method(a){return this.$_addRule({name:"max",method:"length",args:{limit:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"length",args:{limit:a},operator:">="})}},nand:{method(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return n.verifyFlat(u,"nand"),r.dependency(this,"nand",null,u)}},or:{method(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return n.verifyFlat(u,"or"),r.dependency(this,"or",null,u)}},oxor:{method(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return r.dependency(this,"oxor",null,u)}},pattern:{method(a,u){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const g=a instanceof RegExp;g||(a=this.$_compile(a,{appendPath:!0})),b(u!==void 0,"Invalid rule"),n.assertOptions(h,["fallthrough","matches"]),g&&b(!a.flags.includes("g")&&!a.flags.includes("y"),"pattern should not use global or sticky mode"),u=this.$_compile(u,{appendPath:!0});const x=this.clone();x.$_terms.patterns=x.$_terms.patterns||[];const v={[g?"regex":"schema"]:a,rule:u};return h.matches&&(v.matches=this.$_compile(h.matches),v.matches.type!=="array"&&(v.matches=v.matches.$_root.array().items(v.matches)),x.$_mutateRegister(v.matches),x.$_setFlag("_hasPatternMatch",!0,{clone:!1})),h.fallthrough&&(v.fallthrough=!0),x.$_terms.patterns.push(v),x.$_mutateRegister(u),x}},ref:{method(){return this.$_addRule("ref")},validate:(a,u)=>t.isRef(a)?a:u.error("object.refType",{value:a})},regex:{method(){return this.$_addRule("regex")},validate:(a,u)=>a instanceof RegExp?a:u.error("object.regex",{value:a})},rename:{method(a,u){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b(typeof a=="string"||a instanceof RegExp,"Rename missing the from argument"),b(typeof u=="string"||u instanceof l,"Invalid rename to argument"),b(u!==a,"Cannot rename key to same name:",a),n.assertOptions(h,["alias","ignoreUndefined","override","multiple"]);const g=this.clone();g.$_terms.renames=g.$_terms.renames||[];for(const x of g.$_terms.renames)b(x.from!==a,"Cannot rename the same key multiple times");return u instanceof l&&g.$_mutateRegister(u),g.$_terms.renames.push({from:a,to:u,options:i(r.renameDefaults,h)}),g}},schema:{method(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:a}})},validate(a,u,h){let{type:g}=h;return!n.isSchema(a)||g!=="any"&&a.type!==g?u.error("object.schema",{type:g}):a}},unknown:{method(a){return this.$_setFlag("unknown",a!==!1)}},with:{method(a,u){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.dependency(this,"with",a,u,h)}},without:{method(a,u){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.dependency(this,"without",a,u,h)}},xor:{method(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return n.verifyFlat(u,"xor"),r.dependency(this,"xor",null,u)}}},overrides:{default(a,u){return a===void 0&&(a=n.symbols.deepDefault),this.$_parent("default",a,u)}},rebuild(a){if(a.$_terms.keys){const u=new d.Sorter;for(const h of a.$_terms.keys)n.tryWithPath(()=>u.add(h,{after:h.schema.$_rootReferences(),group:h.key}),h.key);a.$_terms.keys=new r.Keys(...u.nodes)}},manifest:{build(a,u){if(u.keys&&(a=a.keys(u.keys)),u.dependencies)for(const{rel:h,key:g=null,peers:x,options:v}of u.dependencies)a=r.dependency(a,h,g,x,v);if(u.patterns)for(const{regex:h,schema:g,rule:x,fallthrough:v,matches:c}of u.patterns)a=a.pattern(h||g,x,{fallthrough:v,matches:c});if(u.renames)for(const{from:h,to:g,options:x}of u.renames)a=a.rename(h,g,x);return a}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),r.clone=function(a,u){if(typeof a=="object"){if(u.nonEnumerables)return y(a,{shallow:!0});const g=Object.create(Object.getPrototypeOf(a));return Object.assign(g,a),g}const h=function(){for(var g=arguments.length,x=new Array(g),v=0;v<g;v++)x[v]=arguments[v];return a.apply(this,x)};return h.prototype=y(a.prototype),Object.defineProperty(h,"name",{value:a.name,writable:!1}),Object.defineProperty(h,"length",{value:a.length,writable:!1}),Object.assign(h,a),h},r.dependency=function(a,u,h,g,x){b(h===null||typeof h=="string",u,"key must be a strings"),x||(x=g.length>1&&typeof g[g.length-1]=="object"?g.pop():{}),n.assertOptions(x,["separator","isPresent"]),g=[].concat(g);const v=n.default(x.separator,"."),c=[];for(const m of g)b(typeof m=="string",u,"peers must be strings"),c.push(o.ref(m,{separator:v,ancestor:0,prefix:!1}));h!==null&&(h=o.ref(h,{separator:v,ancestor:0,prefix:!1}));const p=a.clone();return p.$_terms.dependencies=p.$_terms.dependencies||[],p.$_terms.dependencies.push(new r.Dependency(u,h,c,g,x)),p},r.dependencies={and(a,u,h,g,x){const v=[],c=[],p=u.peers.length,m=r.isPresent(u.options);for(const F of u.peers)m(F.resolve(h,g,x,null,{shadow:!1}))===!1?v.push(F.key):c.push(F.key);if(v.length!==p&&c.length!==p)return{code:"object.and",context:{present:c,presentWithLabels:r.keysToLabels(a,c),missing:v,missingWithLabels:r.keysToLabels(a,v)}}},nand(a,u,h,g,x){const v=[],c=r.isPresent(u.options);for(const F of u.peers)c(F.resolve(h,g,x,null,{shadow:!1}))&&v.push(F.key);if(v.length!==u.peers.length)return;const p=u.paths[0],m=u.paths.slice(1);return{code:"object.nand",context:{main:p,mainWithLabel:r.keysToLabels(a,p),peers:m,peersWithLabels:r.keysToLabels(a,m)}}},or(a,u,h,g,x){const v=r.isPresent(u.options);for(const c of u.peers)if(v(c.resolve(h,g,x,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)}}},oxor(a,u,h,g,x){const v=[],c=r.isPresent(u.options);for(const m of u.peers)c(m.resolve(h,g,x,null,{shadow:!1}))&&v.push(m.key);if(!v.length||v.length===1)return;const p={peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)};return p.present=v,p.presentWithLabels=r.keysToLabels(a,v),{code:"object.oxor",context:p}},with(a,u,h,g,x){const v=r.isPresent(u.options);for(const c of u.peers)if(v(c.resolve(h,g,x,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:u.key.key,mainWithLabel:r.keysToLabels(a,u.key.key),peer:c.key,peerWithLabel:r.keysToLabels(a,c.key)}}},without(a,u,h,g,x){const v=r.isPresent(u.options);for(const c of u.peers)if(v(c.resolve(h,g,x,null,{shadow:!1})))return{code:"object.without",context:{main:u.key.key,mainWithLabel:r.keysToLabels(a,u.key.key),peer:c.key,peerWithLabel:r.keysToLabels(a,c.key)}}},xor(a,u,h,g,x){const v=[],c=r.isPresent(u.options);for(const m of u.peers)c(m.resolve(h,g,x,null,{shadow:!1}))&&v.push(m.key);if(v.length===1)return;const p={peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)};return v.length===0?{code:"object.missing",context:p}:(p.present=v,p.presentWithLabels=r.keysToLabels(a,v),{code:"object.xor",context:p})}},r.keysToLabels=function(a,u){return Array.isArray(u)?u.map(h=>a.$_mapLabels(h)):a.$_mapLabels(u)},r.isPresent=function(a){return typeof a.isPresent=="function"?a.isPresent:u=>u!==void 0},r.rename=function(a,u,h,g,x){const v={};for(const c of a.$_terms.renames){const p=[],m=typeof c.from!="string";if(m)for(const F in u){if(u[F]===void 0&&c.options.ignoreUndefined||F===c.to)continue;const C=c.from.exec(F);C&&p.push({from:F,to:c.to,match:C})}else!Object.prototype.hasOwnProperty.call(u,c.from)||u[c.from]===void 0&&c.options.ignoreUndefined||p.push(c);for(const F of p){const C=F.from;let D=F.to;if(D instanceof l&&(D=D.render(u,h,g,F.match)),C!==D){if(!c.options.multiple&&v[D]&&(x.push(a.$_createError("object.rename.multiple",u,{from:C,to:D,pattern:m},h,g)),g.abortEarly)||Object.prototype.hasOwnProperty.call(u,D)&&!c.options.override&&!v[D]&&(x.push(a.$_createError("object.rename.override",u,{from:C,to:D,pattern:m},h,g)),g.abortEarly))return!1;u[C]===void 0?delete u[D]:u[D]=u[C],v[D]=!0,c.options.alias||delete u[C]}}}return!0},r.unknown=function(a,u,h,g,x,v){if(a.$_terms.patterns){let c=!1;const p=a.$_terms.patterns.map(F=>{if(F.matches)return c=!0,[]}),m=[u,...x.ancestors];for(const F of h){const C=u[F],D=[...x.path,F];for(let R=0;R<a.$_terms.patterns.length;++R){const j=a.$_terms.patterns[R];if(j.regex){const I=j.regex.test(F);if(x.mainstay.tracer.debug(x,"rule",`pattern.${R}`,I?"pass":"error"),!I)continue}else if(!j.schema.$_match(F,x.nest(j.schema,`pattern.${R}`),v))continue;h.delete(F);const B=x.localize(D,m,{schema:j.rule,key:F}),O=j.rule.$_validate(C,B,v);if(O.errors){if(v.abortEarly)return{value:u,errors:O.errors};g.push(...O.errors)}if(j.matches&&p[R].push(F),u[F]=O.value,!j.fallthrough)break}}if(c)for(let F=0;F<p.length;++F){const C=p[F];if(!C)continue;const D=a.$_terms.patterns[F].matches,R=x.localize(x.path,m,D),j=D.$_validate(C,R,v);if(j.errors){const B=s.details(j.errors,{override:!1});B.matches=C;const O=a.$_createError("object.pattern.match",u,B,x,v);if(v.abortEarly)return{value:u,errors:O};g.push(O)}}}if(h.size&&(a.$_terms.keys||a.$_terms.patterns)){if(v.stripUnknown&&!a._flags.unknown||v.skipFunctions){const c=!(!v.stripUnknown||v.stripUnknown!==!0&&!v.stripUnknown.objects);for(const p of h)c?(delete u[p],h.delete(p)):typeof u[p]=="function"&&h.delete(p)}if(!n.default(a._flags.unknown,v.allowUnknown))for(const c of h){const p=x.localize([...x.path,c],[]),m=a.$_createError("object.unknown",u[c],{child:c},p,v,{flags:!1});if(v.abortEarly)return{value:u,errors:m};g.push(m)}}},r.Dependency=class{constructor(a,u,h,g,x){this.rel=a,this.key=u,this.peers=h,this.paths=g,this.options=x}describe(){const a={rel:this.rel,peers:this.paths};return this.key!==null&&(a.key=this.key.key),this.peers[0].separator!=="."&&(a.options={...a.options,separator:this.peers[0].separator}),this.options.isPresent&&(a.options={...a.options,isPresent:this.options.isPresent}),a}},r.Keys=class extends Array{concat(a){const u=this.slice(),h=new Map;for(let g=0;g<u.length;++g)h.set(u[g].key,g);for(const g of a){const x=g.key,v=h.get(x);v!==void 0?u[v]={key:x,schema:u[v].schema.concat(g.schema)}:u.push(g)}return u}}},8785:(E,k,f)=>{const i=f(375),b=f(8068),y=f(8160),d=f(3292),e=f(6354),n={};E.exports=b.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(o,s)=>o.ref(s),validate(o,s){let{schema:t,state:l,prefs:r}=s;i(t.$_terms.link,"Uninitialized link schema");const a=n.generate(t,o,l,r),u=t.$_terms.link[0].ref;return a.$_validate(o,l.nest(a,`link:${u.display}:${a.type}`),r)},generate:(o,s,t,l)=>n.generate(o,s,t,l),rules:{ref:{method(o){i(!this.$_terms.link,"Cannot reinitialize schema"),o=d.ref(o),i(o.type==="value"||o.type==="local","Invalid reference type:",o.type),i(o.type==="local"||o.ancestor==="root"||o.ancestor>0,"Link cannot reference itself");const s=this.clone();return s.$_terms.link=[{ref:o}],s}},relative:{method(){let o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("relative",o)}}},overrides:{concat(o){i(this.$_terms.link,"Uninitialized link schema"),i(y.isSchema(o),"Invalid schema object"),i(o.type!=="link","Cannot merge type link with another link");const s=this.clone();return s.$_terms.whens||(s.$_terms.whens=[]),s.$_terms.whens.push({concat:o}),s.$_mutateRebuild()}},manifest:{build:(o,s)=>(i(s.link,"Invalid link description missing link"),o.ref(s.link))}}),n.generate=function(o,s,t,l){let r=t.mainstay.links.get(o);if(r)return r._generate(s,t,l).schema;const a=o.$_terms.link[0].ref,{perspective:u,path:h}=n.perspective(a,t);n.assert(u,"which is outside of schema boundaries",a,o,t,l);try{r=h.length?u.$_reach(h):u}catch{n.assert(!1,"to non-existing schema",a,o,t,l)}return n.assert(r.type!=="link","which is another link",a,o,t,l),o._flags.relative||t.mainstay.links.set(o,r),r._generate(s,t,l).schema},n.perspective=function(o,s){if(o.type==="local"){for(const{schema:t,key:l}of s.schemas){if((t._flags.id||l)===o.path[0])return{perspective:t,path:o.path.slice(1)};if(t.$_terms.shared){for(const r of t.$_terms.shared)if(r._flags.id===o.path[0])return{perspective:r,path:o.path.slice(1)}}}return{perspective:null,path:null}}return o.ancestor==="root"?{perspective:s.schemas[s.schemas.length-1].schema,path:o.path}:{perspective:s.schemas[o.ancestor]&&s.schemas[o.ancestor].schema,path:o.path}},n.assert=function(o,s,t,l,r,a){o||i(!1,`"${e.label(l._flags,r,a)}" contains link reference "${t.display}" ${s}`)}},3832:(E,k,f)=>{const i=f(375),b=f(8068),y=f(8160),d={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};E.exports=b.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,n){let{schema:o,error:s}=n;if(!e.match(d.numberRx))return;e=e.trim();const t={value:parseFloat(e)};if(t.value===0&&(t.value=0),!o._flags.unsafe)if(e.match(/e/i)){if(d.extractSignificantDigits(e)!==d.extractSignificantDigits(String(t.value)))return t.errors=s("number.unsafe"),t}else{const l=t.value.toString();if(l.match(/e/i))return t;if(l!==d.normalizeDecimal(e))return t.errors=s("number.unsafe"),t}return t}},validate(e,n){let{schema:o,error:s,prefs:t}=n;if(e===1/0||e===-1/0)return{value:e,errors:s("number.infinity")};if(!y.isNumber(e))return{value:e,errors:s("number.base")};const l={value:e};if(t.convert){const r=o.$_getRule("precision");if(r){const a=Math.pow(10,r.args.limit);l.value=Math.round(l.value*a)/a}}return l.value===0&&(l.value=0),!o._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(l.errors=s("number.unsafe")),l},rules:{compare:{method:!1,validate(e,n,o,s){let{limit:t}=o,{name:l,operator:r,args:a}=s;return y.compare(e,t,r)?e:n.error("number."+l,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:y.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,n)=>Math.trunc(e)-e==0?e:n.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,n,o,s){let{base:t}=o;return e*(1/t)%1==0?e:n.error("number.multiple",{multiple:s.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>typeof e=="number"&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,n)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:n.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return i(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,n,o){let{limit:s}=o;const t=e.toString().match(d.precisionRx);return Math.max((t[1]?t[1].length:0)-(t[2]?parseInt(t[2],10):0),0)<=s?e:n.error("number.precision",{limit:s,value:e})},convert:!0},sign:{method(e){return i(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,n,o){let{sign:s}=o;return s==="negative"&&e<0||s==="positive"&&e>0?e:n.error(`number.${s}`)}},unsafe:{method(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return i(typeof e=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>typeof e=="number",to:(e,n)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),d.extractSignificantDigits=function(e){return e.replace(d.exponentialPartRegex,"").replace(d.dotRegex,"").replace(d.trailingZerosRegex,"").replace(d.leadingSignAndZerosRegex,"")},d.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),e==="-0"?"0":e}},8966:(E,k,f)=>{const i=f(7824);E.exports=i.extend({type:"object",cast:{map:{from:b=>b&&typeof b=="object",to:(b,y)=>new Map(Object.entries(b))}}})},7417:(E,k,f)=>{const i=f(375),b=f(5380),y=f(1745),d=f(9959),e=f(6064),n=f(9926),o=f(5752),s=f(8068),t=f(8160),l={tlds:n instanceof Set&&{tlds:{allow:n,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:d.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};E.exports=s.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(r,a){let{schema:u,state:h,prefs:g}=a;const x=u.$_getRule("normalize");x&&(r=r.normalize(x.args.form));const v=u.$_getRule("case");v&&(r=v.args.direction==="upper"?r.toLocaleUpperCase():r.toLocaleLowerCase());const c=u.$_getRule("trim");if(c&&c.args.enabled&&(r=r.trim()),u.$_terms.replacements)for(const m of u.$_terms.replacements)r=r.replace(m.pattern,m.replacement);const p=u.$_getRule("hex");if(p&&p.args.options.byteAligned&&r.length%2!=0&&(r=`0${r}`),u.$_getRule("isoDate")){const m=l.isoDate(r);m&&(r=m)}if(u._flags.truncate){const m=u.$_getRule("max");if(m){let F=m.args.limit;if(t.isResolvable(F)&&(F=F.resolve(r,h,g),!t.limit(F)))return{value:r,errors:u.$_createError("any.ref",F,{ref:m.args.limit,arg:"limit",reason:"must be a positive integer"},h,g)};r=r.slice(0,F)}}return{value:r}}},validate(r,a){let{schema:u,error:h}=a;if(typeof r!="string")return{value:r,errors:h("string.base")};if(r===""){const g=u.$_getRule("min");return g&&g.args.limit===0?void 0:{value:r,errors:h("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(r,a)=>/^[a-zA-Z0-9]+$/.test(r)?r:a.error("string.alphanum")},base64:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["paddingRequired","urlSafe"]),r={urlSafe:!1,paddingRequired:!0,...r},i(typeof r.paddingRequired=="boolean","paddingRequired must be boolean"),i(typeof r.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:r}})},validate(r,a,u){let{options:h}=u;return l.base64Regex[h.paddingRequired][h.urlSafe].test(r)?r:a.error("string.base64")}},case:{method(r){return i(["lower","upper"].includes(r),"Invalid case:",r),this.$_addRule({name:"case",args:{direction:r}})},validate(r,a,u){let{direction:h}=u;return h==="lower"&&r===r.toLocaleLowerCase()||h==="upper"&&r===r.toLocaleUpperCase()?r:a.error(`string.${h}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(r,a){let u=r.length,h=0,g=1;for(;u--;){const x=r.charAt(u)*g;h+=x-9*(x>9),g^=3}return h>0&&h%10==0?r:a.error("string.creditCard")}},dataUri:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["paddingRequired"]),r={paddingRequired:!0,...r},i(typeof r.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:r}})},validate(r,a,u){let{options:h}=u;const g=r.match(l.dataUriRegex);return g&&(!g[2]||g[2]!=="base64"||l.base64Regex[h.paddingRequired].false.test(g[3]))?r:a.error("string.dataUri")}},domain:{method(r){r&&t.assertOptions(r,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const a=l.addressOptions(r);return this.$_addRule({name:"domain",args:{options:r},address:a})},validate(r,a,u,h){let{address:g}=h;return b.isValid(r,g)?r:a.error("string.domain")}},email:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),i(r.multiple===void 0||typeof r.multiple=="boolean","multiple option must be an boolean");const a=l.addressOptions(r),u=new RegExp(`\\s*[${r.separator?e(r.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:r},regex:u,address:a})},validate(r,a,u,h){let{options:g}=u,{regex:x,address:v}=h;const c=g.multiple?r.split(x):[r],p=[];for(const m of c)y.isValid(m,v)||p.push(m);return p.length?a.error("string.email",{value:r,invalids:p}):r}},guid:{alias:"uuid",method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["version","separator"]);let a="";if(r.version){const g=[].concat(r.version);i(g.length>=1,"version must have at least 1 valid version specified");const x=new Set;for(let v=0;v<g.length;++v){const c=g[v];i(typeof c=="string","version at position "+v+" must be a string");const p=l.guidVersions[c.toLowerCase()];i(p,"version at position "+v+" must be one of "+Object.keys(l.guidVersions).join(", ")),i(!x.has(p),"version at position "+v+" must not be a duplicate"),a+=p,x.add(p)}}i(l.guidSeparators.has(r.separator),'separator must be one of true, false, "-", or ":"');const u=r.separator===void 0?"[:-]?":r.separator===!0?"[:-]":r.separator===!1?"[]?":`\\${r.separator}`,h=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${u})[0-9A-F]{4}\\2?[${a||"0-9A-F"}][0-9A-F]{3}\\2?[${a?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:r},regex:h})},validate(r,a,u,h){let{regex:g}=h;const x=g.exec(r);return x?l.guidBrackets[x[1]]!==x[x.length-1]?a.error("string.guid"):r:a.error("string.guid")}},hex:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["byteAligned"]),r={byteAligned:!1,...r},i(typeof r.byteAligned=="boolean","byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:r}})},validate(r,a,u){let{options:h}=u;return l.hexRegex.test(r)?h.byteAligned&&r.length%2!=0?a.error("string.hexAlign"):r:a.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(r,a)=>b.isValid(r,{minDomainSegments:1})||l.ipRegex.test(r)?r:a.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["cidr","version"]);const{cidr:a,versions:u,regex:h}=d.regex(r),g=r.version?u:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:a,version:g}},regex:h})},validate(r,a,u,h){let{options:g}=u,{regex:x}=h;return x.test(r)?r:g.version?a.error("string.ipVersion",{value:r,cidr:g.cidr,version:g.version}):a.error("string.ip",{value:r,cidr:g.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(r,a){let{error:u}=a;return l.isoDate(r)?r:u("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(r,a)=>l.isoDurationRegex.test(r)?r:a.error("string.isoDuration")},length:{method(r,a){return l.length(this,"length",r,"=",a)},validate(r,a,u,h){let{limit:g,encoding:x}=u,{name:v,operator:c,args:p}=h;const m=!x&&r.length;return t.compare(m,g,c)?r:a.error("string."+v,{limit:p.limit,value:r,encoding:x})},args:[{name:"limit",ref:!0,assert:t.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(r,a){return l.length(this,"max",r,"<=",a)},args:["limit","encoding"]},min:{method(r,a){return l.length(this,"min",r,">=",a)},args:["limit","encoding"]},normalize:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"NFC";return i(l.normalizationForms.includes(r),"normalization form must be one of "+l.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:r}})},validate(r,a,u){let{error:h}=a,{form:g}=u;return r===r.normalize(g)?r:h("string.normalize",{value:r,form:g})},convert:!0},pattern:{alias:"regex",method(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(r instanceof RegExp,"regex must be a RegExp"),i(!r.flags.includes("g")&&!r.flags.includes("y"),"regex should not use global or sticky mode"),typeof a=="string"&&(a={name:a}),t.assertOptions(a,["invert","name"]);const u=["string.pattern",a.invert?".invert":"",a.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:r,options:a},errorCode:u})},validate(r,a,u,h){let{regex:g,options:x}=u,{errorCode:v}=h;return g.test(r)^x.invert?r:a.error(v,{name:x.name,regex:g,value:r})},args:["regex","options"],multi:!0},replace:{method(r,a){typeof r=="string"&&(r=new RegExp(e(r),"g")),i(r instanceof RegExp,"pattern must be a RegExp"),i(typeof a=="string","replacement must be a String");const u=this.clone();return u.$_terms.replacements||(u.$_terms.replacements=[]),u.$_terms.replacements.push({pattern:r,replacement:a}),u}},token:{method(){return this.$_addRule("token")},validate:(r,a)=>/^\w+$/.test(r)?r:a.error("string.token")},trim:{method(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return i(typeof r=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:r}})},validate(r,a,u){let{enabled:h}=u;return h&&r!==r.trim()?a.error("string.trim"):r},convert:!0},truncate:{method(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return i(typeof r=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",r)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),r.domain&&t.assertOptions(r.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:a,scheme:u}=o.regex(r),h=r.domain?l.addressOptions(r.domain):null;return this.$_addRule({name:"uri",args:{options:r},regex:a,domain:h,scheme:u})},validate(r,a,u,h){let{options:g}=u,{regex:x,domain:v,scheme:c}=h;if(["http:/","https:/"].includes(r))return a.error("string.uri");const p=x.exec(r);if(p){const m=p[1]||p[2];return!v||g.allowRelative&&!m||b.isValid(m,v)?r:a.error("string.domain",{value:m})}return g.relativeOnly?a.error("string.uriRelativeOnly"):g.scheme?a.error("string.uriCustomScheme",{scheme:c,value:r}):a.error("string.uri")}}},manifest:{build(r,a){if(a.replacements)for(const{pattern:u,replacement:h}of a.replacements)r=r.replace(u,h);return r}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),l.addressOptions=function(r){if(!r||(i(r.minDomainSegments===void 0||Number.isSafeInteger(r.minDomainSegments)&&r.minDomainSegments>0,"minDomainSegments must be a positive integer"),i(r.maxDomainSegments===void 0||Number.isSafeInteger(r.maxDomainSegments)&&r.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),r.tlds===!1))return r;if(r.tlds===!0||r.tlds===void 0)return i(l.tlds,"Built-in TLD list disabled"),Object.assign({},r,l.tlds);i(typeof r.tlds=="object","tlds must be true, false, or an object");const a=r.tlds.deny;if(a)return Array.isArray(a)&&(r=Object.assign({},r,{tlds:{deny:new Set(a)}})),i(r.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),i(!r.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),l.validateTlds(r.tlds.deny,"tlds.deny"),r;const u=r.tlds.allow;return u?u===!0?(i(l.tlds,"Built-in TLD list disabled"),Object.assign({},r,l.tlds)):(Array.isArray(u)&&(r=Object.assign({},r,{tlds:{allow:new Set(u)}})),i(r.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),l.validateTlds(r.tlds.allow,"tlds.allow"),r):r},l.validateTlds=function(r,a){for(const u of r)i(b.isValid(u,{minDomainSegments:1,maxDomainSegments:1}),`${a} must contain valid top level domain names`)},l.isoDate=function(r){if(!t.isIsoDate(r))return null;/.*T.*[+-]\d\d$/.test(r)&&(r+="00");const a=new Date(r);return isNaN(a.getTime())?null:a.toISOString()},l.length=function(r,a,u,h,g){return i(!g||!1,"Invalid encoding:",g),r.$_addRule({name:a,method:"length",args:{limit:u,encoding:g},operator:h})}},8826:(E,k,f)=>{const i=f(375),b=f(8068),y={};y.Map=class extends Map{slice(){return new y.Map(this)}},E.exports=b.extend({type:"symbol",terms:{map:{init:new y.Map}},coerce:{method(d,e){let{schema:n,error:o}=e;const s=n.$_terms.map.get(d);return s&&(d=s),n._flags.only&&typeof d!="symbol"?{value:d,errors:o("symbol.map",{map:n.$_terms.map})}:{value:d}}},validate(d,e){let{error:n}=e;if(typeof d!="symbol")return{value:d,errors:n("symbol.base")}},rules:{map:{method(d){d&&!d[Symbol.iterator]&&typeof d=="object"&&(d=Object.entries(d)),i(d&&d[Symbol.iterator],"Iterable must be an iterable or object");const e=this.clone(),n=[];for(const o of d){i(o&&o[Symbol.iterator],"Entry must be an iterable");const[s,t]=o;i(typeof s!="object"&&typeof s!="function"&&typeof s!="symbol","Key must not be of type object, function, or Symbol"),i(typeof t=="symbol","Value must be a Symbol"),e.$_terms.map.set(s,t),n.push(t)}return e.valid(...n)}}},manifest:{build:(d,e)=>(e.map&&(d=d.map(e.map)),d)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(E,k,f)=>{const i=f(375),b=f(8571),y=f(738),d=f(9621),e=f(8160),n=f(6354),o=f(493),s={result:Symbol("result")};k.entry=function(t,l,r){let a=e.defaults;r&&(i(r.warnings===void 0,"Cannot override warnings preference in synchronous validation"),i(r.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),a=e.preferences(e.defaults,r));const u=s.entry(t,l,a);i(!u.mainstay.externals.length,"Schema with external rules must use validateAsync()");const h={value:u.value};return u.error&&(h.error=u.error),u.mainstay.warnings.length&&(h.warning=n.details(u.mainstay.warnings)),u.mainstay.debug&&(h.debug=u.mainstay.debug),u.mainstay.artifacts&&(h.artifacts=u.mainstay.artifacts),h},k.entryAsync=async function(t,l,r){let a=e.defaults;r&&(a=e.preferences(e.defaults,r));const u=s.entry(t,l,a),h=u.mainstay;if(u.error)throw h.debug&&(u.error.debug=h.debug),u.error;if(h.externals.length){let x=u.value;const v=[];for(const c of h.externals){const p=c.state.path,m=c.schema.type==="link"?h.links.get(c.schema):null;let F,C,D=x;const R=p.length?[x]:[],j=p.length?d(t,p):t;if(p.length){F=p[p.length-1];let B=x;for(const O of p.slice(0,-1))B=B[O],R.unshift(B);C=R[0],D=C[F]}try{const B=(I,P)=>(m||c.schema).$_createError(I,D,P,c.state,a),O=await c.method(D,{schema:c.schema,linked:m,state:c.state,prefs:r,original:j,error:B,errorsArray:s.errorsArray,warn:(I,P)=>h.warnings.push((m||c.schema).$_createError(I,D,P,c.state,a)),message:(I,P)=>(m||c.schema).$_createError("external",D,P,c.state,a,{messages:I})});if(O===void 0||O===D)continue;if(O instanceof n.Report){if(h.tracer.log(c.schema,c.state,"rule","external","error"),v.push(O),a.abortEarly)break;continue}if(Array.isArray(O)&&O[e.symbols.errors]){if(h.tracer.log(c.schema,c.state,"rule","external","error"),v.push(...O),a.abortEarly)break;continue}C?(h.tracer.value(c.state,"rule",D,O,"external"),C[F]=O):(h.tracer.value(c.state,"rule",x,O,"external"),x=O)}catch(B){throw a.errors.label&&(B.message+=` (${c.label})`),B}}if(u.value=x,v.length)throw u.error=n.process(v,t,a),h.debug&&(u.error.debug=h.debug),u.error}if(!a.warnings&&!a.debug&&!a.artifacts)return u.value;const g={value:u.value};return h.warnings.length&&(g.warning=n.details(h.warnings)),h.debug&&(g.debug=h.debug),h.artifacts&&(g.artifacts=h.artifacts),g},s.Mainstay=class{constructor(t,l,r){this.externals=[],this.warnings=[],this.tracer=t,this.debug=l,this.links=r,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this._snapshots.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this._snapshots.pop()}},s.entry=function(t,l,r){const{tracer:a,cleanup:u}=s.tracer(l,r),h=r.debug?[]:null,g=l._ids._schemaChain?new Map:null,x=new s.Mainstay(a,h,g),v=l._ids._schemaChain?[{schema:l}]:null,c=new o([],[],{mainstay:x,schemas:v}),p=k.validate(t,l,c,r);u&&l.$_root.untrace();const m=n.process(p.errors,t,r);return{value:p.value,error:m,mainstay:x}},s.tracer=function(t,l){return t.$_root._tracer?{tracer:t.$_root._tracer._register(t)}:l.debug?(i(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace()._register(t),cleanup:!0}):{tracer:s.ignore}},k.validate=function(t,l,r,a){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(l.$_terms.whens&&(l=l._generate(t,r,a).schema),l._preferences&&(a=s.prefs(l,a)),l._cache&&a.cache){const m=l._cache.get(t);if(r.mainstay.tracer.debug(r,"validate","cached",!!m),m)return m}const h=(m,F,C)=>l.$_createError(m,t,F,C||r,a),g={original:t,prefs:a,schema:l,state:r,error:h,errorsArray:s.errorsArray,warn:(m,F,C)=>r.mainstay.warnings.push(h(m,F,C)),message:(m,F)=>l.$_createError("custom",t,F,r,a,{messages:m})};r.mainstay.tracer.entry(l,r);const x=l._definition;if(x.prepare&&t!==void 0&&a.convert){const m=x.prepare(t,g);if(m){if(r.mainstay.tracer.value(r,"prepare",t,m.value),m.errors)return s.finalize(m.value,[].concat(m.errors),g);t=m.value}}if(x.coerce&&t!==void 0&&a.convert&&(!x.coerce.from||x.coerce.from.includes(typeof t))){const m=x.coerce.method(t,g);if(m){if(r.mainstay.tracer.value(r,"coerced",t,m.value),m.errors)return s.finalize(m.value,[].concat(m.errors),g);t=m.value}}const v=l._flags.empty;v&&v.$_match(s.trim(t,l),r.nest(v),e.defaults)&&(r.mainstay.tracer.value(r,"empty",t,void 0),t=void 0);const c=u.presence||l._flags.presence||(l._flags._endedSwitch?null:a.presence);if(t===void 0){if(c==="forbidden")return s.finalize(t,null,g);if(c==="required")return s.finalize(t,[l.$_createError("any.required",t,null,r,a)],g);if(c==="optional"){if(l._flags.default!==e.symbols.deepDefault)return s.finalize(t,null,g);r.mainstay.tracer.value(r,"default",t,{}),t={}}}else if(c==="forbidden")return s.finalize(t,[l.$_createError("any.unknown",t,null,r,a)],g);const p=[];if(l._valids){const m=l._valids.get(t,r,a,l._flags.insensitive);if(m)return a.convert&&(r.mainstay.tracer.value(r,"valids",t,m.value),t=m.value),r.mainstay.tracer.filter(l,r,"valid",m),s.finalize(t,null,g);if(l._flags.only){const F=l.$_createError("any.only",t,{valids:l._valids.values({display:!0})},r,a);if(a.abortEarly)return s.finalize(t,[F],g);p.push(F)}}if(l._invalids){const m=l._invalids.get(t,r,a,l._flags.insensitive);if(m){r.mainstay.tracer.filter(l,r,"invalid",m);const F=l.$_createError("any.invalid",t,{invalids:l._invalids.values({display:!0})},r,a);if(a.abortEarly)return s.finalize(t,[F],g);p.push(F)}}if(x.validate){const m=x.validate(t,g);if(m&&(r.mainstay.tracer.value(r,"base",t,m.value),t=m.value,m.errors)){if(!Array.isArray(m.errors))return p.push(m.errors),s.finalize(t,p,g);if(m.errors.length)return p.push(...m.errors),s.finalize(t,p,g)}}return l._rules.length?s.rules(t,p,g):s.finalize(t,p,g)},s.rules=function(t,l,r){const{schema:a,state:u,prefs:h}=r;for(const g of a._rules){const x=a._definition.rules[g.method];if(x.convert&&h.convert){u.mainstay.tracer.log(a,u,"rule",g.name,"full");continue}let v,c=g.args;if(g._resolve.length){c=Object.assign({},c);for(const m of g._resolve){const F=x.argsByName.get(m),C=c[m].resolve(t,u,h),D=F.normalize?F.normalize(C):C,R=e.validateArg(D,null,F);if(R){v=a.$_createError("any.ref",C,{arg:m,ref:c[m],reason:R},u,h);break}c[m]=D}}v=v||x.validate(t,r,c,g);const p=s.rule(v,g);if(p.errors){if(u.mainstay.tracer.log(a,u,"rule",g.name,"error"),g.warn){u.mainstay.warnings.push(...p.errors);continue}if(h.abortEarly)return s.finalize(t,p.errors,r);l.push(...p.errors)}else u.mainstay.tracer.log(a,u,"rule",g.name,"pass"),u.mainstay.tracer.value(u,"rule",t,p.value,g.name),t=p.value}return s.finalize(t,l,r)},s.rule=function(t,l){return t instanceof n.Report?(s.error(t,l),{errors:[t],value:null}):Array.isArray(t)&&t[e.symbols.errors]?(t.forEach(r=>s.error(r,l)),{errors:t,value:null}):{errors:null,value:t}},s.error=function(t,l){return l.message&&t._setTemplate(l.message),t},s.finalize=function(t,l,r){l=l||[];const{schema:a,state:u,prefs:h}=r;if(l.length){const x=s.default("failover",void 0,l,r);x!==void 0&&(u.mainstay.tracer.value(u,"failover",t,x),t=x,l=[])}if(l.length&&a._flags.error)if(typeof a._flags.error=="function"){l=a._flags.error(l),Array.isArray(l)||(l=[l]);for(const x of l)i(x instanceof Error||x instanceof n.Report,"error() must return an Error object")}else l=[a._flags.error];if(t===void 0){const x=s.default("default",t,l,r);u.mainstay.tracer.value(u,"default",t,x),t=x}if(a._flags.cast&&t!==void 0){const x=a._definition.cast[a._flags.cast];if(x.from(t)){const v=x.to(t,r);u.mainstay.tracer.value(u,"cast",t,v,a._flags.cast),t=v}}if(a.$_terms.externals&&h.externals&&h._externals!==!1)for(const{method:x}of a.$_terms.externals)u.mainstay.externals.push({method:x,schema:a,state:u,label:n.label(a._flags,u,h)});const g={value:t,errors:l.length?l:null};return a._flags.result&&(g.value=a._flags.result==="strip"?void 0:r.original,u.mainstay.tracer.value(u,a._flags.result,t,g.value),u.shadow(t,a._flags.result)),a._cache&&h.cache!==!1&&!a._refs.length&&a._cache.set(r.original,g),t===void 0||g.errors||a._flags.artifact===void 0||(u.mainstay.artifacts=u.mainstay.artifacts||new Map,u.mainstay.artifacts.has(a._flags.artifact)||u.mainstay.artifacts.set(a._flags.artifact,[]),u.mainstay.artifacts.get(a._flags.artifact).push(u.path)),g},s.prefs=function(t,l){const r=l===e.defaults;return r&&t._preferences[e.symbols.prefs]?t._preferences[e.symbols.prefs]:(l=e.preferences(l,t._preferences),r&&(t._preferences[e.symbols.prefs]=l),l)},s.default=function(t,l,r,a){const{schema:u,state:h,prefs:g}=a,x=u._flags[t];if(g.noDefaults||x===void 0)return l;if(h.mainstay.tracer.log(u,h,"rule",t,"full"),!x)return x;if(typeof x=="function"){const v=x.length?[b(h.ancestors[0]),a]:[];try{return x(...v)}catch(c){return void r.push(u.$_createError(`any.${t}`,null,{error:c},h,g))}}return typeof x!="object"?x:x[e.symbols.literal]?x.literal:e.isResolvable(x)?x.resolve(l,h,g):b(x)},s.trim=function(t,l){if(typeof t!="string")return t;const r=l.$_getRule("trim");return r&&r.args.enabled?t.trim():t},s.ignore={active:!1,debug:y,entry:y,filter:y,log:y,resolve:y,value:y},s.errorsArray=function(){const t=[];return t[e.symbols.errors]=!0,t}},2036:(E,k,f)=>{const i=f(375),b=f(9474),y=f(8160),d={};E.exports=d.Values=class{constructor(e,n){this._values=new Set(e),this._refs=new Set(n),this._lowercase=d.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,n){y.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),n&&n.register(e)):this.has(e,null,null,!1)||(this._values.add(e),typeof e=="string"&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,n,o){if(e=e||new d.Values,n){if(n._override)return n.clone();for(const s of[...n._values,...n._refs])e.add(s)}if(o)for(const s of[...o._values,...o._refs])e.remove(s);return e.length?e:null}remove(e){y.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),typeof e=="string"&&this._lowercase.delete(e.toLowerCase()))}has(e,n,o,s){return!!this.get(e,n,o,s)}get(e,n,o,s){if(!this.length)return!1;if(this._values.has(e))return{value:e};if(typeof e=="string"&&e&&s){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&typeof e!="object")return!1;if(typeof e=="object"){for(const t of this._values)if(b(t,e))return{value:t}}if(n)for(const t of this._refs){const l=t.resolve(e,n,o,null,{in:!0});if(l===void 0)continue;const r=t.in&&typeof l=="object"?Array.isArray(l)?l:Object.keys(l):[l];for(const a of r)if(typeof a==typeof e){if(s&&e&&typeof e=="string"){if(a.toLowerCase()===e.toLowerCase())return{value:a,ref:t}}else if(b(a,e))return{value:a,ref:t}}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const n=[];for(const o of[...this._values,...this._refs])o!==void 0&&n.push(o);return n}return Array.from([...this._values,...this._refs])}clone(){const e=new d.Values(this._values,this._refs);return e._override=this._override,e}concat(e){i(!e._override,"Cannot concat override set of values");const n=new d.Values([...this._values,...e._values],[...this._refs,...e._refs]);return n._override=this._override,n}describe(){const e=[];this._override&&e.push({override:!0});for(const n of this._values.values())e.push(n&&typeof n=="object"?{value:n}:n);for(const n of this._refs.values())e.push(n.describe());return e}},d.Values.prototype[y.symbols.values]=!0,d.Values.prototype.slice=d.Values.prototype.clone,d.lowercases=function(e){const n=new Map;if(e)for(const o of e)typeof o=="string"&&n.set(o.toLowerCase(),o);return n}},978:(E,k,f)=>{const i=f(375),b=f(8571),y=f(1687),d=f(9621),e={};E.exports=function(n,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i(n&&typeof n=="object","Invalid defaults value: must be an object"),i(!o||o===!0||typeof o=="object","Invalid source value: must be true, falsy or an object"),i(typeof s=="object","Invalid options: must be an object"),!o)return null;if(s.shallow)return e.applyToDefaultsWithShallow(n,o,s);const t=b(n);if(o===!0)return t;const l=s.nullOverride!==void 0&&s.nullOverride;return y(t,o,{nullOverride:l,mergeArrays:!1})},e.applyToDefaultsWithShallow=function(n,o,s){const t=s.shallow;i(Array.isArray(t),"Invalid keys");const l=new Map,r=o===!0?null:new Set;for(let h of t){h=Array.isArray(h)?h:h.split(".");const g=d(n,h);g&&typeof g=="object"?l.set(g,r&&d(o,h)||g):r&&r.add(h)}const a=b(n,{},l);if(!r)return a;for(const h of r)e.reachCopy(a,o,h);const u=s.nullOverride!==void 0&&s.nullOverride;return y(a,o,{nullOverride:u,mergeArrays:!1})},e.reachCopy=function(n,o,s){for(const r of s){if(!(r in o))return;const a=o[r];if(typeof a!="object"||a===null)return;o=a}const t=o;let l=n;for(let r=0;r<s.length-1;++r){const a=s[r];typeof l[a]!="object"&&(l[a]={}),l=l[a]}l[s[s.length-1]]=t}},375:(E,k,f)=>{const i=f(7916);E.exports=function(b){if(!b){for(var y=arguments.length,d=new Array(y>1?y-1:0),e=1;e<y;e++)d[e-1]=arguments[e];throw d.length===1&&d[0]instanceof Error?d[0]:new i(d)}}},8571:(E,k,f)=>{const i=f(9621),b=f(4277),y=f(7043),d={needsProtoHack:new Set([b.set,b.map,b.weakSet,b.weakMap])};E.exports=d.clone=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof e!="object"||e===null)return e;let s=d.clone,t=o;if(n.shallow){if(n.shallow!==!0)return d.cloneWithShallow(e,n);s=u=>u}else if(t){const u=t.get(e);if(u)return u}else t=new Map;const l=b.getInternalProto(e);if(l===b.buffer)return!1;if(l===b.date)return new Date(e.getTime());if(l===b.regex)return new RegExp(e);const r=d.base(e,l,n);if(r===e)return e;if(t&&t.set(e,r),l===b.set)for(const u of e)r.add(s(u,n,t));else if(l===b.map)for(const[u,h]of e)r.set(u,s(h,n,t));const a=y.keys(e,n);for(const u of a){if(u==="__proto__")continue;if(l===b.array&&u==="length"){r.length=e.length;continue}const h=Object.getOwnPropertyDescriptor(e,u);h?h.get||h.set?Object.defineProperty(r,u,h):h.enumerable?r[u]=s(e[u],n,t):Object.defineProperty(r,u,{enumerable:!1,writable:!0,configurable:!0,value:s(e[u],n,t)}):Object.defineProperty(r,u,{enumerable:!0,writable:!0,configurable:!0,value:s(e[u],n,t)})}return r},d.cloneWithShallow=function(e,n){const o=n.shallow;(n=Object.assign({},n)).shallow=!1;const s=new Map;for(const t of o){const l=i(e,t);typeof l!="object"&&typeof l!="function"||s.set(l,l)}return d.clone(e,n,s)},d.base=function(e,n,o){if(o.prototype===!1)return d.needsProtoHack.has(n)?new n.constructor:n===b.array?[]:{};const s=Object.getPrototypeOf(e);if(s&&s.isImmutable)return e;if(n===b.array){const t=[];return s!==n&&Object.setPrototypeOf(t,s),t}if(d.needsProtoHack.has(n)){const t=new s.constructor;return s!==n&&Object.setPrototypeOf(t,s),t}return Object.create(s)}},9474:(E,k,f)=>{const i=f(4277),b={mismatched:null};E.exports=function(y,d,e){return e=Object.assign({prototype:!0},e),!!b.isDeepEqual(y,d,e,[])},b.isDeepEqual=function(y,d,e,n){if(y===d)return y!==0||1/y==1/d;const o=typeof y;if(o!==typeof d||y===null||d===null)return!1;if(o==="function"){if(!e.deepFunction||y.toString()!==d.toString())return!1}else if(o!=="object")return y!=y&&d!=d;const s=b.getSharedType(y,d,!!e.prototype);switch(s){case i.buffer:return!1;case i.promise:return y===d;case i.regex:return y.toString()===d.toString();case b.mismatched:return!1}for(let t=n.length-1;t>=0;--t)if(n[t].isSame(y,d))return!0;n.push(new b.SeenEntry(y,d));try{return!!b.isDeepEqualObj(s,y,d,e,n)}finally{n.pop()}},b.getSharedType=function(y,d,e){if(e)return Object.getPrototypeOf(y)!==Object.getPrototypeOf(d)?b.mismatched:i.getInternalProto(y);const n=i.getInternalProto(y);return n!==i.getInternalProto(d)?b.mismatched:n},b.valueOf=function(y){const d=y.valueOf;if(d===void 0)return y;try{return d.call(y)}catch(e){return e}},b.hasOwnEnumerableProperty=function(y,d){return Object.prototype.propertyIsEnumerable.call(y,d)},b.isSetSimpleEqual=function(y,d){for(const e of Set.prototype.values.call(y))if(!Set.prototype.has.call(d,e))return!1;return!0},b.isDeepEqualObj=function(y,d,e,n,o){const{isDeepEqual:s,valueOf:t,hasOwnEnumerableProperty:l}=b,{keys:r,getOwnPropertySymbols:a}=Object;if(y===i.array){if(!n.part){if(d.length!==e.length)return!1;for(let v=0;v<d.length;++v)if(!s(d[v],e[v],n,o))return!1;return!0}for(const v of d)for(const c of e)if(s(v,c,n,o))return!0}else if(y===i.set){if(d.size!==e.size)return!1;if(!b.isSetSimpleEqual(d,e)){const v=new Set(Set.prototype.values.call(e));for(const c of Set.prototype.values.call(d)){if(v.delete(c))continue;let p=!1;for(const m of v)if(s(c,m,n,o)){v.delete(m),p=!0;break}if(!p)return!1}}}else if(y===i.map){if(d.size!==e.size)return!1;for(const[v,c]of Map.prototype.entries.call(d))if(c===void 0&&!Map.prototype.has.call(e,v)||!s(c,Map.prototype.get.call(e,v),n,o))return!1}else if(y===i.error&&(d.name!==e.name||d.message!==e.message))return!1;const u=t(d),h=t(e);if((d!==u||e!==h)&&!s(u,h,n,o))return!1;const g=r(d);if(!n.part&&g.length!==r(e).length&&!n.skip)return!1;let x=0;for(const v of g)if(n.skip&&n.skip.includes(v))e[v]===void 0&&++x;else if(!l(e,v)||!s(d[v],e[v],n,o))return!1;if(!n.part&&g.length-x!==r(e).length)return!1;if(n.symbols!==!1){const v=a(d),c=new Set(a(e));for(const p of v){if(!n.skip||!n.skip.includes(p)){if(l(d,p)){if(!l(e,p)||!s(d[p],e[p],n,o))return!1}else if(l(e,p))return!1}c.delete(p)}for(const p of c)if(l(e,p))return!1}return!0},b.SeenEntry=class{constructor(y,d){this.obj=y,this.ref=d}isSame(y,d){return this.obj===y&&this.ref===d}}},7916:(E,k,f)=>{const i=f(8761);E.exports=class extends Error{constructor(b){super(b.filter(y=>y!=="").map(y=>typeof y=="string"?y:y instanceof Error?y.message:i(y)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,k.assert)}}},5277:E=>{const k={};E.exports=function(f){if(!f)return"";let i="";for(let b=0;b<f.length;++b){const y=f.charCodeAt(b);k.isSafe(y)?i+=f[b]:i+=k.escapeHtmlChar(y)}return i},k.escapeHtmlChar=function(f){return k.namedHtml.get(f)||(f>=256?"&#"+f+";":`&#x${f.toString(16).padStart(2,"0")};`)},k.isSafe=function(f){return k.safeCharCodes.has(f)},k.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),k.safeCharCodes=function(){const f=new Set;for(let i=32;i<123;++i)(i>=97||i>=65&&i<=90||i>=48&&i<=57||i===32||i===46||i===44||i===45||i===58||i===95)&&f.add(i);return f}()},6064:E=>{E.exports=function(k){return k.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:E=>{E.exports=function(){}},1687:(E,k,f)=>{const i=f(375),b=f(8571),y=f(7043),d={};E.exports=d.merge=function(e,n,o){if(i(e&&typeof e=="object","Invalid target value: must be an object"),i(n==null||typeof n=="object","Invalid source value: must be null, undefined, or an object"),!n)return e;if(o=Object.assign({nullOverride:!0,mergeArrays:!0},o),Array.isArray(n)){i(Array.isArray(e),"Cannot merge array onto an object"),o.mergeArrays||(e.length=0);for(let t=0;t<n.length;++t)e.push(b(n[t],{symbols:o.symbols}));return e}const s=y.keys(n,o);for(let t=0;t<s.length;++t){const l=s[t];if(l==="__proto__"||!Object.prototype.propertyIsEnumerable.call(n,l))continue;const r=n[l];if(r&&typeof r=="object"){if(e[l]===r)continue;!e[l]||typeof e[l]!="object"||Array.isArray(e[l])!==Array.isArray(r)||r instanceof Date||r instanceof RegExp?e[l]=b(r,{symbols:o.symbols}):d.merge(e[l],r,o)}else(r!=null||o.nullOverride)&&(e[l]=r)}return e}},9621:(E,k,f)=>{const i=f(375),b={};E.exports=function(y,d,e){if(d===!1||d==null)return y;typeof(e=e||{})=="string"&&(e={separator:e});const n=Array.isArray(d);i(!n||!e.separator,"Separator option is not valid for array-based chain");const o=n?d:d.split(e.separator||".");let s=y;for(let t=0;t<o.length;++t){let l=o[t];const r=e.iterables&&b.iterables(s);if(Array.isArray(s)||r==="set"){const a=Number(l);Number.isInteger(a)&&(l=a<0?s.length+a:a)}if(!s||typeof s=="function"&&e.functions===!1||!r&&s[l]===void 0){i(!e.strict||t+1===o.length,"Missing segment",l,"in reach path ",d),i(typeof s=="object"||e.functions===!0||typeof s!="function","Invalid segment",l,"in reach path ",d),s=e.default;break}s=r?r==="set"?[...s][l]:s.get(l):s[l]}return s},b.iterables=function(y){return y instanceof Set?"set":y instanceof Map?"map":void 0}},8761:E=>{E.exports=function(){try{return JSON.stringify(...arguments)}catch(k){return"[Cannot display object: "+k.message+"]"}}},4277:(E,k)=>{const f={};k=E.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},f.typeMap=new Map([["[object Error]",k.error],["[object Map]",k.map],["[object Promise]",k.promise],["[object Set]",k.set],["[object WeakMap]",k.weakMap],["[object WeakSet]",k.weakSet]]),k.getInternalProto=function(i){if(Array.isArray(i))return k.array;if(i instanceof Date)return k.date;if(i instanceof RegExp)return k.regex;if(i instanceof Error)return k.error;const b=Object.prototype.toString.call(i);return f.typeMap.get(b)||k.generic}},7043:(E,k)=>{k.keys=function(f){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).symbols!==!1?Reflect.ownKeys(f):Object.getOwnPropertyNames(f)}},3652:(E,k,f)=>{const i=f(375),b={};k.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(y,d){const e=[].concat((d=d||{}).before||[]),n=[].concat(d.after||[]),o=d.group||"?",s=d.sort||0;i(!e.includes(o),`Item cannot come before itself: ${o}`),i(!e.includes("?"),"Item cannot come before unassociated items"),i(!n.includes(o),`Item cannot come after itself: ${o}`),i(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(y)||(y=[y]);for(const t of y){const l={seq:this._items.length,sort:s,before:e,after:n,group:o,node:t};this._items.push(l)}if(!d.manual){const t=this._sort();i(t,"item",o!=="?"?`added into group ${o}`:"","created a dependencies error")}return this.nodes}merge(y){Array.isArray(y)||(y=[y]);for(const e of y)if(e)for(const n of e._items)this._items.push(Object.assign({},n));this._items.sort(b.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const d=this._sort();return i(d,"merge created a dependencies error"),this.nodes}sort(){const y=this._sort();return i(y,"sort created a dependencies error"),this.nodes}_sort(){const y={},d=Object.create(null),e=Object.create(null);for(const l of this._items){const r=l.seq,a=l.group;e[a]=e[a]||[],e[a].push(r),y[r]=l.before;for(const u of l.after)d[u]=d[u]||[],d[u].push(r)}for(const l in y){const r=[];for(const a in y[l]){const u=y[l][a];e[u]=e[u]||[],r.push(...e[u])}y[l]=r}for(const l in d)if(e[l])for(const r of e[l])y[r].push(...d[l]);const n={};for(const l in y){const r=y[l];for(const a of r)n[a]=n[a]||[],n[a].push(l)}const o={},s=[];for(let l=0;l<this._items.length;++l){let r=l;if(n[l]){r=null;for(let a=0;a<this._items.length;++a){if(o[a]===!0)continue;n[a]||(n[a]=[]);const u=n[a].length;let h=0;for(let g=0;g<u;++g)o[n[a][g]]&&++h;if(h===u){r=a;break}}}r!==null&&(o[r]=!0,s.push(r))}if(s.length!==this._items.length)return!1;const t={};for(const l of this._items)t[l.seq]=l;this._items=[],this.nodes=[];for(const l of s){const r=t[l];this.nodes.push(r.node),this._items.push(r)}return!0}},b.mergeSort=(y,d)=>y.sort===d.sort?0:y.sort<d.sort?-1:1},5380:(E,k,f)=>{const i=f(443),b=f(2178),y={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:i.URL||URL};k.analyze=function(d){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!d)return b.code("DOMAIN_NON_EMPTY_STRING");if(typeof d!="string")throw new Error("Invalid input: domain must be a string");if(d.length>256)return b.code("DOMAIN_TOO_LONG");if(y.nonAsciiRx.test(d)){if(e.allowUnicode===!1)return b.code("DOMAIN_INVALID_UNICODE_CHARS");d=d.normalize("NFC")}if(y.domainControlRx.test(d))return b.code("DOMAIN_INVALID_CHARS");d=y.punycode(d),e.allowFullyQualified&&d[d.length-1]==="."&&(d=d.slice(0,-1));const n=e.minDomainSegments||y.minDomainSegments,o=d.split(".");if(o.length<n)return b.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&o.length>e.maxDomainSegments)return b.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=e.tlds;if(s){const t=o[o.length-1].toLowerCase();if(s.deny&&s.deny.has(t)||s.allow&&!s.allow.has(t))return b.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<o.length;++t){const l=o[t];if(!l.length)return b.code("DOMAIN_EMPTY_SEGMENT");if(l.length>63)return b.code("DOMAIN_LONG_SEGMENT");if(t<o.length-1){if(!y.domainSegmentRx.test(l))return b.code("DOMAIN_INVALID_CHARS")}else if(!y.tldSegmentRx.test(l))return b.code("DOMAIN_INVALID_TLDS_CHARS")}return null},k.isValid=function(d,e){return!k.analyze(d,e)},y.punycode=function(d){d.includes("%")&&(d=d.replace(/%/g,"%25"));try{return new y.URL(`http://${d}`).host}catch{return d}}},1745:(E,k,f)=>{const i=f(9848),b=f(5380),y=f(2178),d={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(i.TextEncoder||TextEncoder)};k.analyze=function(e,n){return d.email(e,n)},k.isValid=function(e,n){return!d.email(e,n)},d.email=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e!="string")throw new Error("Invalid input: email must be a string");if(!e)return y.code("EMPTY_STRING");const o=!d.nonAsciiRx.test(e);if(!o){if(n.allowUnicode===!1)return y.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const s=e.split("@");if(s.length!==2)return s.length>2?y.code("MULTIPLE_AT_CHAR"):y.code("MISSING_AT_CHAR");const[t,l]=s;if(!t)return y.code("EMPTY_LOCAL");if(!n.ignoreLength){if(e.length>254)return y.code("ADDRESS_TOO_LONG");if(d.encoder.encode(t).length>64)return y.code("LOCAL_TOO_LONG")}return d.local(t,o)||b.analyze(l,n)},d.local=function(e,n){const o=e.split(".");for(const s of o){if(!s.length)return y.code("EMPTY_LOCAL_SEGMENT");if(n){if(!d.atextRx.test(s))return y.code("INVALID_LOCAL_CHARS")}else for(const t of s){if(d.atextRx.test(t))continue;const l=d.binary(t);if(!d.atomRx.test(l))return y.code("INVALID_LOCAL_CHARS")}}},d.binary=function(e){return Array.from(d.encoder.encode(e)).map(n=>String.fromCharCode(n)).join("")},d.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,d.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(E,k)=>{k.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},k.code=function(f){return{code:f,error:k.codes[f]}}},9959:(E,k,f)=>{const i=f(375),b=f(5752);k.regex=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i(y.cidr===void 0||typeof y.cidr=="string","options.cidr must be a string");const d=y.cidr?y.cidr.toLowerCase():"optional";i(["required","optional","forbidden"].includes(d),"options.cidr must be one of required, optional, forbidden"),i(y.version===void 0||typeof y.version=="string"||Array.isArray(y.version),"options.version must be a string or an array of string");let e=y.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),i(e.length>=1,"options.version must have at least 1 version specified");for(let s=0;s<e.length;++s)i(typeof e[s]=="string","options.version must only contain strings"),e[s]=e[s].toLowerCase(),i(["ipv4","ipv6","ipvfuture"].includes(e[s]),"options.version contains unknown version "+e[s]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const n=`(?:${e.map(s=>{if(d==="forbidden")return b.ip[s];const t=`\\/${s==="ipv4"?b.ip.v4Cidr:b.ip.v6Cidr}`;return d==="required"?`${b.ip[s]}${t}`:`${b.ip[s]}(?:${t})?`}).join("|")})`,o=new RegExp(`^${n}$`);return{cidr:d,versions:e,regex:o,raw:n}}},5752:(E,k,f)=>{const i=f(375),b=f(6064),y={generate:function(){const d={},e="\\dA-Fa-f",n="["+e+"]",o="\\w-\\.~",s="!\\$&'\\(\\)\\*\\+,;=",t="%"+e,l=o+t+s+":@",r="["+l+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";d.ipv4address="(?:"+a+"\\.){3}"+a;const u=n+"{1,4}",h="(?:"+u+":"+u+"|"+d.ipv4address+")",g="(?:"+u+":){6}"+h,x="::(?:"+u+":){5}"+h,v="(?:"+u+")?::(?:"+u+":){4}"+h,c="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+h,p="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+h,m="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+h,F="(?:(?:"+u+":){0,4}"+u+")?::"+h,C="(?:(?:"+u+":){0,5}"+u+")?::"+u,D="(?:(?:"+u+":){0,6}"+u+")?::";d.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",d.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",d.ipv6address="(?:"+g+"|"+x+"|"+v+"|"+c+"|"+p+"|"+m+"|"+F+"|"+C+"|"+D+")",d.ipvFuture="v"+n+"+\\.["+o+s+":]+",d.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",d.schemeRegex=new RegExp(d.scheme);const R="["+o+t+s+":]*",j="["+o+t+s+"]{1,255}",B="(?:\\[(?:"+d.ipv6address+"|"+d.ipvFuture+")\\]|"+d.ipv4address+"|"+j+")",O="(?:"+R+"@)?"+B+"(?::\\d*)?",I="(?:"+R+"@)?("+B+")(?::\\d*)?",P=r+"*",Y=r+"+",M="(?:\\/"+P+")*",L="\\/(?:"+Y+M+")?",q=Y+M,U="["+o+t+s+"@]+"+M,J="(?:\\/\\/\\/"+P+M+")";return d.hierPart="(?:(?:\\/\\/"+O+M+")|"+L+"|"+q+"|"+J+")",d.hierPartCapture="(?:(?:\\/\\/"+I+M+")|"+L+"|"+q+")",d.relativeRef="(?:(?:\\/\\/"+O+M+")|"+L+"|"+U+"|)",d.relativeRefCapture="(?:(?:\\/\\/"+I+M+")|"+L+"|"+U+"|)",d.query="["+l+"\\/\\?]*(?=#|$)",d.queryWithSquareBrackets="["+l+"\\[\\]\\/\\?]*(?=#|$)",d.fragment="["+l+"\\/\\?]*",d}};y.rfc3986=y.generate(),k.ip={v4Cidr:y.rfc3986.ipv4Cidr,v6Cidr:y.rfc3986.ipv6Cidr,ipv4:y.rfc3986.ipv4address,ipv6:y.rfc3986.ipv6address,ipvfuture:y.rfc3986.ipvFuture},y.createRegex=function(d){const e=y.rfc3986,n="(?:\\?"+(d.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",o=d.domain?e.relativeRefCapture:e.relativeRef;if(d.relativeOnly)return y.wrap(o+n);let s="";if(d.scheme){i(d.scheme instanceof RegExp||typeof d.scheme=="string"||Array.isArray(d.scheme),"scheme must be a RegExp, String, or Array");const r=[].concat(d.scheme);i(r.length>=1,"scheme must have at least 1 scheme specified");const a=[];for(let u=0;u<r.length;++u){const h=r[u];i(h instanceof RegExp||typeof h=="string","scheme at position "+u+" must be a RegExp or String"),h instanceof RegExp?a.push(h.source.toString()):(i(e.schemeRegex.test(h),"scheme at position "+u+" must be a valid scheme"),a.push(b(h)))}s=a.join("|")}const t="(?:"+(s?"(?:"+s+")":e.scheme)+":"+(d.domain?e.hierPartCapture:e.hierPart)+")",l=d.allowRelative?"(?:"+t+"|"+o+")":t;return y.wrap(l+n,s)},y.wrap=function(d,e){return{raw:d=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${d}`,regex:new RegExp(`^${d}$`),scheme:e}},y.uriRegex=y.createRegex({}),k.regex=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return d.scheme||d.allowRelative||d.relativeOnly||d.allowQuerySquareBrackets||d.domain?y.createRegex(d):y.uriRegex}},1447:(E,k)=>{const f={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};k.Parser=class{constructor(i){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b[f.settings]&&b.constants)for(const y in b.constants){const d=b.constants[y];if(d!==null&&!["boolean","number","string"].includes(typeof d))throw new Error(`Formula constant ${y} contains invalid ${typeof d} value type`)}this.settings=b[f.settings]?b:Object.assign({[f.settings]:!0,constants:{},functions:{}},b),this.single=null,this._parts=null,this._parse(i)}_parse(i){let b=[],y="",d=0,e=!1;const n=s=>{if(d)throw new Error("Formula missing closing parenthesis");const t=b.length?b[b.length-1]:null;if(e||y||s){if(t&&t.type==="reference"&&s===")")return t.type="function",t.value=this._subFormula(y,t.value),void(y="");if(s===")"){const l=new k.Parser(y,this.settings);b.push({type:"segment",value:l})}else if(e){if(e==="]")return b.push({type:"reference",value:y}),void(y="");b.push({type:"literal",value:y})}else if(f.operatorCharacters.includes(y))t&&t.type==="operator"&&f.operators.includes(t.value+y)?t.value+=y:b.push({type:"operator",value:y});else if(y.match(f.numberRx))b.push({type:"constant",value:parseFloat(y)});else if(this.settings.constants[y]!==void 0)b.push({type:"constant",value:this.settings.constants[y]});else{if(!y.match(f.tokenRx))throw new Error(`Formula contains invalid token: ${y}`);b.push({type:"reference",value:y})}y=""}};for(const s of i)e?s===e?(n(),e=!1):y+=s:d?s==="("?(y+=s,++d):s===")"?(--d,d?y+=s:n(s)):y+=s:s in f.literals?e=f.literals[s]:s==="("?(n(),++d):f.operatorCharacters.includes(s)?(n(),y=s,n()):s!==" "?y+=s:n();n(),b=b.map((s,t)=>s.type!=="operator"||s.value!=="-"||t&&b[t-1].type!=="operator"?s:{type:"operator",value:"n"});let o=!1;for(const s of b){if(s.type==="operator"){if(f.operatorsPrefix.includes(s.value))continue;if(!o)throw new Error("Formula contains an operator in invalid position");if(!f.operators.includes(s.value))throw new Error(`Formula contains an unknown operator ${s.value}`)}else if(o)throw new Error("Formula missing expected operator");o=!o}if(!o)throw new Error("Formula contains invalid trailing operator");b.length===1&&["reference","literal","constant"].includes(b[0].type)&&(this.single={type:b[0].type==="reference"?"reference":"value",value:b[0].value}),this._parts=b.map(s=>{if(s.type==="operator")return f.operatorsPrefix.includes(s.value)?s:s.value;if(s.type!=="reference")return s.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(s.value))throw new Error(`Formula contains invalid reference ${s.value}`);return this.settings.reference?this.settings.reference(s.value):f.reference(s.value)})}_subFormula(i,b){const y=this.settings.functions[b];if(typeof y!="function")throw new Error(`Formula contains unknown function ${b}`);let d=[];if(i){let e="",n=0,o=!1;const s=()=>{if(!e)throw new Error(`Formula contains function ${b} with invalid arguments ${i}`);d.push(e),e=""};for(let t=0;t<i.length;++t){const l=i[t];o?(e+=l,l===o&&(o=!1)):l in f.literals&&!n?(e+=l,o=f.literals[l]):l!==","||n?(e+=l,l==="("?++n:l===")"&&--n):s()}s()}return d=d.map(e=>new k.Parser(e,this.settings)),function(e){const n=[];for(const o of d)n.push(o.evaluate(e));return y.call(e,...n)}}evaluate(i){const b=this._parts.slice();for(let y=b.length-2;y>=0;--y){const d=b[y];if(d&&d.type==="operator"){const e=b[y+1];b.splice(y+1,1);const n=f.evaluate(e,i);b[y]=f.single(d.value,n)}}return f.operatorsOrder.forEach(y=>{for(let d=1;d<b.length-1;)if(y.includes(b[d])){const e=b[d],n=f.evaluate(b[d-1],i),o=f.evaluate(b[d+1],i);b.splice(d,2);const s=f.calculate(e,n,o);b[d-1]=s===0?0:s}else d+=2}),f.evaluate(b[0],i)}},k.Parser.prototype[f.symbol]=!0,f.reference=function(i){return function(b){return b&&b[i]!==void 0?b[i]:null}},f.evaluate=function(i,b){return i===null?null:typeof i=="function"?i(b):i[f.symbol]?i.evaluate(b):i},f.single=function(i,b){if(i==="!")return!b;const y=-b;return y===0?0:y},f.calculate=function(i,b,y){if(i==="??")return f.exists(b)?b:y;if(typeof b=="string"||typeof y=="string"){if(i==="+")return(b=f.exists(b)?b:"")+(f.exists(y)?y:"")}else switch(i){case"^":return Math.pow(b,y);case"*":return b*y;case"/":return b/y;case"%":return b%y;case"+":return b+y;case"-":return b-y}switch(i){case"<":return b<y;case"<=":return b<=y;case">":return b>y;case">=":return b>=y;case"==":return b===y;case"!=":return b!==y;case"&&":return b&&y;case"||":return b||y}return null},f.exists=function(i){return i!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:E=>{E.exports=JSON.parse('{"version":"17.11.0"}')}},A={},function E(k){var f=A[k];if(f!==void 0)return f.exports;var i=A[k]={exports:{}};return $[k](i,i.exports,E),i.exports}(5107);var $,A})})(be);const ce=be.exports,je=`:host {
  display: block;
}

* {
  box-sizing: border-box;
}

button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  color: inherit;
  margin: 0px;
  padding: 0px;
}

h1,
h2,
h3,
h4,
h5,
h6,
p,
span {
  margin: 0;
}

hr {
  border: 0;
  border-top: 1px solid #e5e7eb;
}

.mt-1\\.5 {
  margin-top: 0.375rem;
}

.mt-2 {
  margin-top: 0.5rem;
}

.gap-1 {
  gap: 0.25rem;
}

.flex {
  display: flex;
}

.items-center {
  align-items: center;
}

.block {
  display: block;
}

.text-6b7280 {
  color: #6b7280;
}

.text-ef4444 {
  color: #ef4444;
}

.text-sm {
  font-size: 0.875rem;
  /* 14px */
  line-height: 1.25rem;
  /* 20px */
}

.pr-6 {
  padding-right: 1.5rem;
}

.text-base {
  font-size: 1rem;
  /* 16px */
  line-height: 1.5rem;
  /* 24px */
}

.text-right {
  text-align: right;
}

.mr-1 {
  margin-right: 0.25em;
}

.mr-2 {
  margin-right: 0.5em;
}

select,
input:not([type='checkbox']):not([type='radio']) {
  display: block;
  width: 100%;
  height: 32px;
  padding: 6px 12px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

.h-8 {
  height: 2rem;
  /* 32px */
}

.leading-8 {
  line-height: 2rem;
  /* 32px */
}

select {
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 1em;
}

select:invalid {
  color: gray;
}

input::placeholder {
  color: gray;
}

.w-full {
  width: 100%;
}

.rounded-full {
  border-radius: 9999px;
}

.absolute {
  position: absolute;
}

.inline-block {
  display: inline-block;
}

.cursor-pointer {
  cursor: pointer;
}

.bg-white {
  background: white;
}

.opacity-100 {
  opacity: 1;
}

.opacity-0 {
  opacity: 0;
}

.relative {
  position: relative;
}

.whitespace-nowrap {
  white-space: nowrap;
}

.overflow-hidden {
  overflow: hidden;
}

.gap-2 {
  gap: 0.5rem;
}

.flex-1 {
  flex: 1 1 0%;
}

select:focus,
input:focus {
  outline: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
}

input[type='checkbox']:focus {
  outline: none;
}

input[type='radio']:focus {
  outline: none;
}

input[type='radio'] {
  accent-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
}

input[type='checkbox'] {
  accent-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
}

.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltip-text {
  visibility: hidden;
  width: auto;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 0 8px;
  position: absolute;
  z-index: 100000;
  top: 150%;
  left: 10px;
  margin-left: 0px;
  transform: translateX(-50%);
}

.tooltip::after {
  visibility: hidden;
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  top: 20px;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent black transparent;
}

.tooltip:hover::after {
  visibility: visible;
}

.tooltip:hover .tooltip-text {
  visibility: visible;
}

.icon {
  width: 16px;
  height: 16px;
  right: -6px;
  transition: all 0.2s ease-in-out;
}

.add {
  background-image: url('data:image/svg+xml;utf8,<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a9 9 0 100 18 9 9 0 000-18zM1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm12-5.5V11h4.5v2H13v4.5h-2V13H6.5v-2H11V6.5h2z" fill="%236b7280"></path></svg>');
  bottom: -3px;
}

.minus {
  background-image: url('data:image/svg+xml;utf8,<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a9 9 0 100 18 9 9 0 000-18zM1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm5.5-1h11v2h-11v-2z" fill="%236b7280"></path></svg>');
  top: -3px;
}

.add:hover,
.minus:hover {
  transform: scale(1.1);
}

.button {
  border: none;
  display: inline-block;
  font-size: 14px;
  cursor: pointer;
  padding: 0 15px;
  height: 30px;
  line-height: 30px;
  border-radius: 3px;
}

:host {
  --omi-form-primary-hue: 142;
  --omi-form-primary-saturation: 50%;
  --omi-form-primary-lightness: 44%;
  --omi-form-primary-saturation-hover: 65%;
  --omi-form-primary-saturation-active: 35%;
}

.submit-button {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  color: white;
}

.reset-button {
  background-color: white;
  color: #000000e6;
  border: 1px solid #dddddd;
}

.submit-button:hover {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation-hover),
    var(--omi-form-primary-lightness)
  );
}

.submit-button:active {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation-active),
    var(--omi-form-primary-lightness)
  );
}

.reset-button:hover {
  color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  border: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
}

.reset-button:active {
  color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  border: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
  background-color: #dddddd51;
}

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 15px;
}

.col-span-1 {
  grid-column: span 1;
}

.col-span-2 {
  grid-column: span 2;
}

.col-span-3 {
  grid-column: span 3;
}

.col-span-4 {
  grid-column: span 4;
}

.col-span-5 {
  grid-column: span 5;
}

.col-span-6 {
  grid-column: span 6;
}

.col-span-7 {
  grid-column: span 7;
}

.col-span-8 {
  grid-column: span 8;
}

.col-span-9 {
  grid-column: span 9;
}

.col-span-10 {
  grid-column: span 10;
}

.col-span-11 {
  grid-column: span 11;
}

.col-span-12 {
  grid-column: span 12;
}

/* Small devices (landscape phones, 640px and up) */
@media (min-width: 640px) {
  .sm\\:col-span-1 {
    grid-column: span 1;
  }
  .sm\\:col-span-2 {
    grid-column: span 2;
  }
  .sm\\:col-span-3 {
    grid-column: span 3;
  }
  .sm\\:col-span-4 {
    grid-column: span 4;
  }
  .sm\\:col-span-5 {
    grid-column: span 5;
  }
  .sm\\:col-span-6 {
    grid-column: span 6;
  }
  .sm\\:col-span-7 {
    grid-column: span 7;
  }
  .sm\\:col-span-8 {
    grid-column: span 8;
  }
  .sm\\:col-span-9 {
    grid-column: span 9;
  }
  .sm\\:col-span-10 {
    grid-column: span 10;
  }
  .sm\\:col-span-11 {
    grid-column: span 11;
  }
  .sm\\:col-span-12 {
    grid-column: span 12;
  }

  /* Add other col-span classes for small devices as needed */
}

/* Medium devices (tablets, 768px and up) */
@media (min-width: 768px) {
  .md\\:col-span-1 {
    grid-column: span 1;
  }
  .md\\:col-span-2 {
    grid-column: span 2;
  }
  .md\\:col-span-3 {
    grid-column: span 3;
  }
  .md\\:col-span-4 {
    grid-column: span 4;
  }
  .md\\:col-span-5 {
    grid-column: span 5;
  }
  .md\\:col-span-6 {
    grid-column: span 6;
  }
  .md\\:col-span-7 {
    grid-column: span 7;
  }
  .md\\:col-span-8 {
    grid-column: span 8;
  }
  .md\\:col-span-9 {
    grid-column: span 9;
  }
  .md\\:col-span-10 {
    grid-column: span 10;
  }
  .md\\:col-span-11 {
    grid-column: span 11;
  }
  .md\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for medium devices as needed */
}

/* Large devices (desktops, 1024px and up) */
@media (min-width: 1024px) {
  .lg\\:col-span-1 {
    grid-column: span 1;
  }
  .lg\\:col-span-2 {
    grid-column: span 2;
  }
  .lg\\:col-span-3 {
    grid-column: span 3;
  }
  .lg\\:col-span-4 {
    grid-column: span 4;
  }
  .lg\\:col-span-5 {
    grid-column: span 5;
  }
  .lg\\:col-span-6 {
    grid-column: span 6;
  }
  .lg\\:col-span-7 {
    grid-column: span 7;
  }
  .lg\\:col-span-8 {
    grid-column: span 8;
  }
  .lg\\:col-span-9 {
    grid-column: span 9;
  }
  .lg\\:col-span-10 {
    grid-column: span 10;
  }
  .lg\\:col-span-11 {
    grid-column: span 11;
  }
  .lg\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for large devices as needed */
}

/* Extra large devices (large desktops, 1280px and up) */
@media (min-width: 1280px) {
  .xl\\:col-span-1 {
    grid-column: span 1;
  }
  .xl\\:col-span-2 {
    grid-column: span 2;
  }
  .xl\\:col-span-3 {
    grid-column: span 3;
  }
  .xl\\:col-span-4 {
    grid-column: span 4;
  }
  .xl\\:col-span-5 {
    grid-column: span 5;
  }
  .xl\\:col-span-6 {
    grid-column: span 6;
  }
  .xl\\:col-span-7 {
    grid-column: span 7;
  }
  .xl\\:col-span-8 {
    grid-column: span 8;
  }
  .xl\\:col-span-9 {
    grid-column: span 9;
  }
  .xl\\:col-span-10 {
    grid-column: span 10;
  }
  .xl\\:col-span-11 {
    grid-column: span 11;
  }
  .xl\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for extra large devices as needed */
}

/* Extra extra large devices (extra large desktops, 1536px and up) */
@media (min-width: 1536px) {
  .xxl\\:col-span-1 {
    grid-column: span 1;
  }
  .xxl\\:col-span-2 {
    grid-column: span 2;
  }
  .xxl\\:col-span-3 {
    grid-column: span 3;
  }
  .xxl\\:col-span-4 {
    grid-column: span 4;
  }
  .xxl\\:col-span-5 {
    grid-column: span 5;
  }
  .xxl\\:col-span-6 {
    grid-column: span 6;
  }
  .xxl\\:col-span-7 {
    grid-column: span 7;
  }
  .xxl\\:col-span-8 {
    grid-column: span 8;
  }
  .xxl\\:col-span-9 {
    grid-column: span 9;
  }
  .xxl\\:col-span-10 {
    grid-column: span 10;
  }
  .xxl\\:col-span-11 {
    grid-column: span 11;
  }
  .xxl\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for extra extra large devices as needed */
}

.group:hover .group-hover\\:opacity-100 {
  opacity: 1;
}
`,Be={en:{root:"value of form",custom:"{#message.en || #message}"},zh:{root:"表单值","number.base":"{#label} 必须是数字","number.min":"{#label} 最小值 {#limit}","number.max":"{#label} 最大值 {#limit}","any.required":"{#label} 是必须的","number.integer":"{#label} 必须是整数","string.uuid":"{#label} 必须是有效的 UUID","any.custom":"{#label} 未通过自定义验证","any.default":"{#label} 在运行默认方法时抛出错误","any.failover":"{#label} 在运行故障转移方法时抛出错误",custom:"{#message.zh || #message.en || #message}","any.invalid":"{#label} 包含无效值","any.only":"{#label} 必须与 {#valids} 相同","any.ref":"{#label} 引用了 {#ref}，它不是数字","any.unknown":"{#label} 不允许","object.with":'{#label} 缺少必需字段 "{#peer}"',"object.missing":'{#label} 缺少必需字段 "{#peers}"',"object.xor":"{#label} 包含冲突字段 {#peers}","alternatives.all":"{#label} 必须满足所有替代条件","alternatives.any":"{#label} 必须满足任一替代条件","alternatives.match":"{#label} 的类型不被允许","alternatives.one":"{#label} 只能满足一个替代条件","alternatives.types":"{#label} 的类型错误","array.base":"{#label} 必须是数组","array.excludes":"{#label} 包含不允许的值","array.includesRequiredBoth":"{#label} 必须同时包含指定的已知和未知值","array.includesRequiredKnowns":"{#label} 必须包含指定的已知值","array.includesRequiredUnknowns":"{#label} 必须包含指定的未知值","array.includes":"{#label} 必须包含指定值","array.length":"{#label} 的长度必须是 {#limit}","array.max":"{#label} 的最大长度是 {#limit}","array.min":"{#label} 的最小长度是 {#limit}","array.orderedLength":"{#label} 的顺序长度必须是 {#limit}","array.sort":"{#label} 必须按指定顺序排序","array.sort.mismatching":"{#label} 排序不匹配","array.sort.unsupported":"{#label} 不支持排序","array.sparse":"{#label} 不允许稀疏数组","array.unique":"{#label} 必须具有唯一的值","array.hasKnown":"{#label} 必须具有已知值","array.hasUnknown":"{#label} 必须具有未知值","binary.base":"{#label} 必须是二进制数据","binary.length":"{#label} 的长度必须是 {#limit}","binary.max":"{#label} 的最大长度是 {#limit}","binary.min":"{#label} 的最小长度是 {#limit}","boolean.base":"{#label} 必须是布尔值","date.base":"{#label} 必须是日期","date.format":"{#label} 日期格式错误","date.greater":"{#label} 必须大于 {#limit}","date.less":"{#label} 必须小于 {#limit}","date.max":"{#label} 必须早于或等于 {#limit}","date.min":"{#label} 必须晚于或等于 {#limit}","date.strict":"{#label} 日期格式必须严格遵循","function.arity":"{#label} 函数的参数个数必须是 {#n}","function.class":"{#label} 必须是一个类","function.maxArity":"{#label} 函数的最大参数个数是 {#n}","function.minArity":"{#label} 函数的最小参数个数是 {#n}","number.greater":"{#label} 必须大于 {#limit}","number.infinity":"{#label} 不能是无穷大","number.less":"{#label} 必须小于 {#limit}","number.multiple":"{#label} 必须是 {#base} 的倍数","number.negative":"{#label} 必须是负数","number.port":"{#label} 必须是有效的端口号","number.positive":"{#label} 必须是正数","number.precision":"{#label} 必须精确到 {#limit} 位小数","number.unsafe":"{#label} 是不安全的数字","object.unknown":"{#label} 是未知的对象","object.and":"{#label} 必须同时满足 {#peers}","object.assert":"{#label} 不满足指定条件","object.base":"{#label} 必须是对象","object.length":"{#label} 的键数必须是 {#limit}","object.max":"{#label} 的最大键数是 {#limit}","object.min":"{#label} 的最小键数是 {#limit}","object.nand":"{#label} 不能同时满足 {#peers}","object.pattern.match":"{#label} 键值对必须匹配指定模式","object.refType":"{#label} 引用了错误的类型","object.regex":"{#label} 键必须满足正则表达式","object.rename.multiple":"{#label} 不能重命名多个键","object.rename.override":"{#label} 重命名不能覆盖现有键","object.schema":"{#label} 必须是 Joi schema","object.instance":"{#label} 必须是类的实例","object.without":"{#label} 不能和 {#peers} 同时存在","object.oxor":"{#label} 只能满足一个互斥条件","string.alphanum":"{#label} 必须是字母数字字符","string.base64":"{#label} 必须是有效的 base64 字符串","string.base":"{#label} 必须是字符串","string.creditCard":"{#label} 必须是有效的信用卡号","string.dataUri":"{#label} 必须是有效的 dataUri 字符串","string.domain":"{#label} 必须是有效的域名","string.email":"{#label} 必须是有效的电子邮件地址","string.empty":"{#label} 不能为空","string.guid":"{#label} 必须是有效的 GUID","string.hexAlign":"{#label} 十六进制对齐失败","string.hex":"{#label} 必须是有效的十六进制字符串","string.hostname":"{#label} 必须是有效的主机名","string.ipVersion":"{#label} 必须是有效的 IP 版本","string.ip":"{#label} 必须是有效的 IP 地址","string.isoDate":"{#label} 必须是有效的 ISO 日期","string.isoDuration":"{#label} 必须是有效的 ISO 时长","string.length":"{#label} 的长度必须是 {#limit}","string.lowercase":"{#label} 必须是小写字符串","string.max":"{#label} 的最大长度是 {#limit}","string.min":"{#label} 的最小长度是 {#limit}","string.normalize":"{#label} 必须是 unicode 规范化的字符串","string.pattern.base":"{#label} 的值 {#value} 未能匹配所需的模式","string.pattern.name":"{#label} 的值 {#value} 未能匹配 {#name} 模式","string.pattern.invert.base":"{#label} 的值 {#value} 匹配了反向模式","string.pattern.invert.name":"{#label} 的值 {#value} 匹配了反向的 {#name} 模式","string.token":"{#label} 必须是有效的令牌","string.trim":"{#label} 必须是修剪过的字符串","string.uppercase":"{#label} 必须是大写字符串","string.uri":"{#label} 必须是有效的 URI","string.uriCustomScheme":"{#label} 必须是符合 {#scheme} 模式的有效 uri","string.uriRelativeOnly":"{#label} 必须是有效的相对 uri","symbol.base":"{#label} 必须是符号","symbol.map":"{#label} 必须是符号映射"}};function Oe(w,_){var $;const A=(($=w.props)==null?void 0:$.type)||"text";return S("input",{type:A,placeholder:w.placeholder,value:w.value,onChange:E=>_(w,E.target.value),...w.props})}function Me(w,_){return S("select",{value:w.value,onChange:$=>_(w,$.target.value)},w.options.map($=>S("option",{value:$.value},$.label)))}function Le(w,_){return S("label",{class:"text-base"},S("input",{type:"checkbox",class:"mr-1",checked:w.value,onChange:$=>_(w,$.target.checked)}),w.text)}function Ie(w,_){return S("div",null,w.options.map($=>S("label",{class:"mr-2"},S("input",{type:"radio",class:"mr-1",name:w.name,value:$.value,checked:w.value===$.value,onChange:A=>_(w,A.target.value)}),$.label)))}function Ne(w,_){return S("textarea",{value:w.value,onChange:$=>_(w,$.target.value)})}function Te(){return S("hr",null)}function Pe(w){return S("img",{src:w.src,alt:w.alt})}function ze(w){return w.tooltip?S("span",{class:"tooltip block relative",style:{height:20,width:20,top:-1}},S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#d1d5db",style:{width:20,height:20}},S("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})),S("span",{class:"tooltip-text"},w.tooltip)):null}const ye={input:Oe,select:Me,checkbox:Le,radio:Ie,textarea:Ne,divider:Te,img:Pe,tooltip:ze};function X(w,_){const $=ye[w.type];if(!$)throw new Error(`No renderer for component type "${w.type}"`);try{return $(w,_)}catch(A){return console.error(A),null}}const qe=125,Ue="#45a049",We=20,Ve={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"##808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function Ye(w){const _=parseInt(w.slice(1),16),$=_>>16&255,A=_>>8&255,E=_&255;return[$,A,E]}function He(w){const[_,$,A]=Ye(Ve[w.toLowerCase()]||w);return Ke(_,$,A)}function Ke(w,_,$){w/=255,_/=255,$/=255;const A=Math.max(w,_,$),E=Math.min(w,_,$);let k=0,f=0;const i=(A+E)/2;if(A!==E){const b=A-E;switch(f=i>.5?b/(2-A-E):b/(A+E),A){case w:k=(_-$)/b+(_<$?6:0);break;case _:k=($-w)/b+2;break;case $:k=(w-_)/b+4;break}k/=6}return[k*360,f*100,i*100]}function le(w){if(w===null||typeof w!="object")return w;const _=Array.isArray(w)?[]:{};for(const $ in w)Object.prototype.hasOwnProperty.call(w,$)&&(_[$]=le(w[$]));return _}function G(w){let _={};for(let $ of w)if($.type==="group"){let A={};if($.components)for(let E of $.components)if(E.type==="group"){let k=G(E.components||E.items);E.name?A[E.name]=k:Object.assign(A,k)}else if(E.type==="list"){let k=[];if(E.items)for(let f of E.items)f.type==="group"?k.push(G([f])):f.name&&k.push({[f.name]:f.value});E.name?A[E.name]=k:Object.assign(A,k)}else E.name&&(A[E.name]=E.value);$.name?_[$.name]=A:Object.assign(_,A)}else if($.type==="list"){let A=[];if($.items)for(let E of $.items)E.type==="group"&&A.push(G([E])),E.type==="list"?A.push(G(E.items||[])):E.name&&A.push({[E.name]:E.value});$.name&&(_[$.name]=A)}else $.name&&(_[$.name]=$.value);return _}function de(w){return typeof w=="number"?w+"px":(w===void 0||!["px","em","rem","ex","ch","vw","vh","vmin","vmax","%","cm","mm","in","pt","pc"].some(_=>typeof w=="string"&&w.endsWith(_))&&typeof w=="string"&&(w=w+"px"),w)}var Ge=Object.defineProperty,Ze=Object.getOwnPropertyDescriptor,Je=(w,_,$,A)=>{for(var E=A>1?void 0:A?Ze(_,$):_,k=w.length-1,f;k>=0;k--)(f=w[k])&&(E=(A?f(_,$,E):f(E))||E);return A&&E&&Ge(_,$,E),E},ae;let he=(ae=class extends te{constructor(){super(...arguments),z(this,"config",{components:[],submitButton:!0,resetButton:!0,labelStyle:{width:qe,align:"right"}}),z(this,"values",{}),z(this,"joiSchema"),z(this,"resetErrors",w=>{var _;for(const $ of w)$.error=null,$.type==="list"?(_=$.items)==null||_.forEach(A=>this.resetErrors(A.components||[])):$.type==="group"&&this.resetErrors($.components||[])}),z(this,"onSubmit",w=>{w.preventDefault();const _=this.validate();_!=null&&_.error?this.update():this.fire("submit",{values:this.values,nativeEvent:w})}),z(this,"resetComponent",w=>{var _;w.value=void 0,w.error=null,w.type==="list"?w.items=[]:w.type==="group"&&((_=w.components)==null||_.forEach($=>this.resetComponent($)))}),z(this,"onReset",()=>{this.config.error=null;for(const w of this.config.components)this.resetComponent(w);this.update()}),z(this,"addListItem",(w,_)=>{if(!w.itemTemplate)throw new Error("itemTemplate is required for list");w.items||(w.items=[]),_!==void 0?w.items.splice(_+1,0,le(w.itemTemplate)):w.items.push(le(w.itemTemplate)),this.values=G(this.config.components),this.resetValues(this.values),this.update()}),z(this,"removeListItem",(w,_)=>{var $;($=w.items)==null||$.splice(_,1),this.update(),this.values=G(this.config.components)}),z(this,"handleChange",(w,_)=>{w.value=_,this.validate(),this.resetValues(this.values),this.update(),this.fire("change",{values:this.values})}),z(this,"findFieldByName",(w,_)=>{for(const $ of w){if($.name===_)return $;if(($.type==="list"||$.type==="group")&&$.components){const A=this.findFieldByName($.components,_);if(A)return A}}return null}),z(this,"getValueFromNestedStructure",(w,_)=>{if(!w)return;const $=w.split(".");let A=_;for(const E of $){if(A==null)return;Array.isArray(A)&&/^\d+$/.test(E)?A=A[parseInt(E,10)]:A=A[E]}return A}),z(this,"renderComponent",(w,_,$)=>{var A,E,k,f;if(w.dependsOn){let d;if(typeof w.dependsOn=="string"?d=new Function("values",`return ${w.dependsOn}`):typeof w.dependsOn=="function"&&(d=w.dependsOn),d){const e=this.config.components.reduce((n,o)=>(o.name&&(n[o.name]=o.value),n),{});if(!d(e))return this.resetComponent(w),null}else{const e=this.findFieldByName(_,w.dependsOn.name);if(e&&e.value!==w.dependsOn.value)return this.resetComponent(w),null}}let i;switch(w.type){case"input":case"select":case"checkbox":case"radio":case"textarea":i=X(w,this.handleChange);break;case"list":i=S("div",{class:"relative",style:{marginLeft:$*We}},(A=w.items)==null?void 0:A.map((e,n)=>S("div",{class:T("relative group",{"mt-2":n>0})},this.renderComponent(e,w.items,$+1),S("i",{class:"minus icon rounded-full absolute inline-block cursor-pointer bg-white opacity-0 group-hover:opacity-100",onClick:()=>this.removeListItem(w,n)}),S("i",{class:"add icon rounded-full absolute inline-block cursor-pointer bg-white opacity-0 group-hover:opacity-100",onClick:()=>this.addListItem(w,n)}))),S("i",{class:"add icon rounded-full inline-block cursor-pointer bg-white relative",onClick:()=>this.addListItem(w)}));break;case"group":i=S("div",{class:"grid"},(E=w.components)==null?void 0:E.map((e,n)=>S("div",{class:T(`col-span-${e.span||12}`,{[`sm:col-span-${e.sm}`]:e.sm,[`md:col-span-${e.md}`]:e.md,[`lg:col-span-${e.lg}`]:e.lg,[`xl:col-span-${e.xl}`]:e.xl,[`xxl:col-span-${e.xxl}`]:e.xxl})},S("div",{class:"w-full"},w.components&&this.renderComponent(e,w.components,$+1)))));break;case"custom":i=S(w.component,{...w.props});break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"span":return S(w.type,null,w.text);case"divider":case"img":return X(w);default:const d=ye[w.type];if(d)if(d.isFormComponent)i=X(w,this.handleChange);else return X(w,this.handleChange);else throw new Error(`Unsupported type: ${w.type}`)}const b=$?(k=w.labelStyle)==null?void 0:k.align:this.config.labelStyle.align,y=$?(f=w.labelStyle)==null?void 0:f.width:this.config.labelStyle.width;return S("div",{class:T({flex:b!=="top"})},(w.label||$===0&&b!=="top")&&S("div",{class:T("inline-block items-center h-8 leading-8 text-sm pr-6",{"text-right":b==="right","text-left":b!=="right"}),style:{width:b!=="top"?de(y):void 0}},S("div",{class:"inline-block whitespace-nowrap"},S("label",{class:"flex items-center gap-1"},S("span",null,w.label),X({type:"tooltip",tooltip:w.tooltip})))),S("div",{class:"flex-1"},i,w.description&&S("div",{class:"text-6b7280 text-sm mt-1.5",style:"grid-column: span 12"},w.description),w.error&&S("div",{class:"text-ef4444 text-sm"},w.error)))}),z(this,"initValue",(w,_,$="",A)=>{var E,k;const f=$?w.name?`${$}.${w.name}`:$:w.name,i=this.getValueFromNestedStructure(f,A),b=i!==void 0?i:w.defaultValue;switch(w.value=b,w.type){case"list":(E=w.items)==null||E.forEach((y,d)=>this.initValue(y,_+1,`${f}.${d}`,A));break;case"group":(k=w.components)==null||k.forEach(y=>{this.initValue(y,_+1,f,A)});break}})}install(){Object.assign(this.config,this.props.config),this.resetValues(this.props.config.values)}receiveProps(w){var _,$;Object.assign(this.config,w.config),this.resetValues(w.config.values),this.initPrimaryColor(),this.joiSchema=($=(_=w.config)==null?void 0:_.validate)==null?void 0:$.call(_,ce)}validate(){var w,_,$;this.values=G(this.props.config.components);const A=(w=this.joiSchema)==null?void 0:w.validate(this.values,{abortEarly:!1,errors:{language:this.props.config.locale||"en"},messages:Be});if(this.resetErrors(this.config.components),A)return($=(_=A.error)==null?void 0:_.details)==null||$.forEach(E=>{const k=this.findFieldByName(this.config.components,E.path[0]);k&&(k.error=E.message)}),this.config.error=A.error,A}initPrimaryColor(){const w=He(this.props.config.primaryColor||Ue);if(this.shadowRoot){const _=this.shadowRoot.host.style;_.setProperty("--omi-form-primary-hue",w[0]+""),_.setProperty("--omi-form-primary-saturation",w[1]+"%"),_.setProperty("--omi-form-primary-lightness",w[2]+"%"),_.setProperty("--omi-form-primary-saturation-hover",Math.min(100,w[1]+15)+"%"),_.setProperty("--omi-form-primary-saturation-active",Math.max(0,w[1]-15)+"%")}return w}installed(){var w,_;this.initPrimaryColor(),this.joiSchema=(_=(w=this.props.config)==null?void 0:w.validate)==null?void 0:_.call(w,ce)}resetValues(w){this.config.components.forEach(_=>this.initValue(_,0,"",w))}render(w){const _={marginLeft:this.config.labelStyle.align==="top"?0:de(this.config.labelStyle.width)};return S("form",{onSubmit:this.onSubmit,onReset:this.onReset,class:"grid",style:w.config.style},this.config.components.map(($,A)=>S("div",{class:T(`col-span-${$.span||12}`,{[`sm:col-span-${$.sm}`]:$.sm,[`md:col-span-${$.md}`]:$.md,[`lg:col-span-${$.lg}`]:$.lg,[`xl:col-span-${$.xl}`]:$.xl,[`xxl:col-span-${$.xxl}`]:$.xxl})},this.renderComponent($,this.config.components,0))),this.config.error&&S("div",{style:{"grid-column":"span 12",..._}}," ",this.config.error.details.map($=>{if($.path.length===0)return S("div",{class:"text-ef4444 text-sm"},"* ",$.message)})," "),S("div",{class:"flex gap-2",style:_},this.config.submitButton&&S("button",{class:"button submit-button",type:"submit"},"Submit"),this.config.resetButton&&S("button",{class:"button reset-button",type:"reset"},"Reset")))}},z(ae,"css",je),ae);he=Je([ee("o-form")],he);const Qe={wrapper:"relative",tagWrapper:"flex items-center flex-wrap transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] p-[5px]",tagInput:"w-[100px] py-[0.32rem] leading-[1.6] dark:text-gray-200 dark:placeholder:text-gray-200",input:"peer block min-h-[auto] w-full rounded border-0 bg-transparent outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary motion-reduce:transition-none placeholder:opacity-0 disabled:bg-neutral-100 read-only:bg-neutral-100 dark:disabled:bg-neutral-700 dark:read-only:bg-neutral-700 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:peer-focus:text-primary",activeInput:"placeholder:opacity-100",label:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate text-neutral-500 transition-all duration-200 ease-out peer-focus:scale-[0.8] peer-focus:text-primary motion-reduce:transition-none dark:text-neutral-200 dark:peer-focus:text-primary",activeLabel:"scale-[0.8]",notch:"group flex absolute left-0 top-0 w-full max-w-full h-full text-left pointer-events-none",notchLeading:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none left-0 top-0 h-full w-2 border-r-0 rounded-l-[0.25rem]",activeNotchLeading:"border-r-0",focusedNotchLeading:"border-r-0",notchLeadingDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchLeadingDefault:"shadow-[-1px_0_0_#3b71ca,_0_1px_0_0_#3b71ca,_0_-1px_0_0_#3b71ca] border-primary dark:border-primary",notchLeadingWhite:"border-neutral-200",focusedNotchLeadingWhite:"shadow-[-1px_0_0_#ffffff,_0_1px_0_0_#ffffff,_0_-1px_0_0_#ffffff] border-white",notchMiddle:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none grow-0 shrink-0 basis-auto w-auto max-w-[calc(100%-1rem)] h-full border-r-0 border-l-0",activeNotchMiddle:"border-x-0 border-t border-solid border-t-transparent dark:border-t-transparent",focusedNotchMiddle:"border-x-0 border-t border-solid border-t-transparent dark:border-t-transparent",notchMiddleDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchMiddleDefault:"shadow-[0_1px_0_0_#3b71ca] border-primary dark:border-primary",notchMiddleWhite:"border-neutral-200",focusedNotchMiddleWhite:"shadow-[0_1px_0_0_#ffffff] border-white",notchTrailing:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none grow h-full border-l-0 rounded-r-[0.25rem]",activeNotchTrailing:"border-l-0",focusedNotchTrailing:"border-l-0",notchTrailingDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchTrailingDefault:"shadow-[1px_0_0_#3b71ca,_0_-1px_0_0_#3b71ca,_0_1px_0_0_#3b71ca] border-primary dark:border-primary",notchTrailingWhite:"border-neutral-200",focusedNotchTrailingWhite:"shadow-[1px_0_0_#ffffff,_0_-1px_0_0_#ffffff,_0_1px_0_0_#ffffff] border-white",counter:"text-right leading-[1.6]",inputSizeLg:"px-3 py-[0.32rem] leading-[2.15]",inputSizeBase:"px-3 py-[0.32rem] leading-[1.6]",inputSizeSm:"px-3 py-[0.33rem] text-xs leading-[1.5]",labelSizeLg:"pt-[0.36rem] leading-[2.15] peer-focus:-translate-y-[1.15rem]",activeLabelSizeLg:"-translate-y-[1.15rem]",labelSizeBase:"pt-[0.30rem] leading-[1.6] peer-focus:-translate-y-[0.9rem]",activeLabelSizeBase:"-translate-y-[0.9rem]",labelSizeSm:"pt-[0.36rem] text-xs leading-[1.5] peer-focus:-translate-y-[0.75rem]",activeLabelSizeSm:"-translate-y-[0.75rem]"};var ve=Object.defineProperty,Xe=Object.getOwnPropertyDescriptor,et=(w,_,$)=>_ in w?ve(w,_,{enumerable:!0,configurable:!0,writable:!0,value:$}):w[_]=$,Z=(w,_,$,A)=>{for(var E=A>1?void 0:A?Xe(_,$):_,k=w.length-1,f;k>=0;k--)(f=w[k])&&(E=(A?f(_,$,E):f(E))||E);return A&&E&&ve(_,$,E),E},_e=(w,_,$)=>(et(w,typeof _!="symbol"?_+"":_,$),$);let H=class extends te{constructor(){super(...arguments);N(this,"state",{active:!1,focus:!1,value:"",tags:[],labelWidth:0});N(this,"labelReference",Ae());N(this,"inputRef",null)}install(){var _;this.state.value=this.props.value||this.props.defaultValue,this.state.tags=this.props.tags,(this.state.value||(_=this.state.tags)!=null&&_.length)&&(this.state.active=!0)}installed(){setTimeout(()=>{var _,$;this.state.labelWidth=(($=(_=this.labelReference)==null?void 0:_.current)==null?void 0:$.clientWidth)*.8+8,this.update()},400)}onFocus(){var _,$;this.state.focus=!0,this.state.labelWidth=(($=(_=this.labelReference)==null?void 0:_.current)==null?void 0:$.clientWidth)*.8+8,this.update()}handleChange(_){this.state.value=_.target.value,this.fire("change",this.state.value),this.update()}receiveProps(_,$){_.value!==$.value&&(this.state.value=_.value,this.state.value&&(this.state.active=!0),this.update())}removeTag(_,$){var A;this.state.tags.splice(this.state.tags.indexOf(_),1),this.update(),this.fire("change",{nativeEvent:$}),(A=this.inputRef)==null||A.focus()}onBlur(_){var $;this.state.value=_.target.value.trim(),this.state.tags&&this.state.value&&(this.state.tags.push({label:this.state.value}),this.state.value="",this.fire("change")),_.target.value||($=this.state.tags)!=null&&$.length?this.state.active=!0:this.state.active=!1,this.state.focus=!1,_.stopPropagation(),this.fire("blur",this.state.value),this.update()}onKeyUp(_){_.keyCode===13&&(this.state.tags.push({label:this.state.value}),this.state.value="",this.fire("change"),this.update())}render(_){var a;const $={...Qe,..._.customTheme},{size:A,defaultValue:E,id:k,label:f,children:i,type:b,readonly:y,formWhite:d,counter:e,maxLength:n}=_,o=T($.input,this.state.active&&$.activeInput,A==="lg"?$.inputSizeLg:A==="base"?$.inputSizeBase:A==="sm"?$.inputSizeSm:$.inputSizeBase),s=T($.label,this.state.active&&$.activeLabel,this.state.active&&(A==="lg"?$.activeLabelSizeLg:A==="base"?$.activeLabelSizeBase:A==="sm"?$.activeLabelSizeSm:$.activeLabelSizeBase),A==="lg"?$.labelSizeLg:A==="base"?$.labelSizeBase:A==="sm"?$.labelSizeSm:$.labelSizeBase),t=T($.notchLeading,d?$.notchLeadingWhite:$.notchLeadingDefault,this.state.active&&$.activeNotchLeading,this.state.focus&&$.focusedNotchLeading,this.state.focus&&(d?$.focusedNotchLeadingWhite:$.focusedNotchLeadingDefault)),l=T($.notchMiddle,d?$.notchMiddleWhite:$.notchMiddleDefault,this.state.active&&$.activeNotchMiddle,this.state.focus&&$.focusedNotchMiddle,this.state.focus&&(d?$.focusedNotchMiddleWhite:$.focusedNotchMiddleDefault)),r=T($.notchTrailing,d?$.notchTrailingWhite:$.notchTrailingDefault,this.state.active&&$.activeNotchTrailing,this.state.focus&&$.focusedNotchTrailing,this.state.focus&&(d?$.focusedNotchTrailingWhite:$.focusedNotchTrailingDefault));return S(_.wrapperTag,null,S(_.wrapperTag,{class:T($.wrapper,{[$.tagWrapper]:this.state.tags})},this.state.tags&&this.state.tags.map(u=>S("div",{class:"flex justify-between items-center h-[32px] leading-loose py-[5px] px-[12px] mr-2 my-[5px] text-[13px] font-normal text-[#4f4f4f] cursor-pointer bg-[#eceff1] dark:text-white dark:bg-neutral-600 rounded-[16px] transition-[opacity] duration-300 ease-linear [word-wrap: break-word] shadow-none normal-case hover:!shadow-none active:bg-[#cacfd1] inline-block font-medium leading-normal text-[#4f4f4f] text-center no-underline align-middle cursor-pointer select-none border-[.125rem] border-solid border-transparent py-1.5 px-3 text-xs rounded"},S("span",null,u.label),S("span",{onClick:h=>this.removeTag(u,h),class:"w-4 float-right pl-[8px] text-[16px] opacity-[.53] cursor-pointer fill-[#afafaf] hover:fill-[#8b8b8b] dark:fill-gray-400 dark:hover:fill-gray-100 transition-all duration-200 ease-in-out"},S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3"},S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}))))),S(_.tag,{type:b==="date"?"text":b,disabled:_.disabled,readOnly:y,class:T(o,{[$.tagInput]:this.state.tags}),onBlur:this.onBlur,onInput:this.handleChange,onFocus:this.onFocus,onKeyUp:this.onKeyUp,value:this.state.value,defaultValue:E,rows:_.rows,id:k,ref:u=>this.inputRef=u,maxLength:n}),f&&S("label",{class:s,htmlFor:k,ref:this.labelReference},f),b==="date"&&S("button",{type:"button",class:"pointer-events-none flex items-center justify-content-center [&>svg]:w-5 [&>svg]:h-5 absolute outline-none border-none bg-transparent right-0.5 top-1/2 -translate-x-1/2 -translate-y-1/2 hover:text-primary focus:text-primary dark:hover:text-primary-400 dark:focus:text-primary-400 dark:text-neutral-200","data-te-datepicker-toggle-button-ref":"","data-te-datepicker-toggle-ref":""},S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},S("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 3v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3H6V3a.75.75 0 01.75-.75zm13.5 9a1.5 1.5 0 00-1.5-1.5H5.25a1.5 1.5 0 00-1.5 1.5v7.5a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5v-7.5z","clip-rule":"evenodd"}))),S("div",{class:$.notch},S("div",{class:t}),S("div",{class:l,style:{width:this.state.labelWidth}}),S("div",{class:r})),i),e&&n!==void 0&&n>0&&S("div",{class:$.counter},S("span",null,((a=this.state.value)==null?void 0:a.toString().length)||0," / ",n)))}};_e(H,"css",[ue,`:host {
  display: block;
}`]);_e(H,"defaultProps",{size:"base",wrapperTag:"div",readonly:!1,formWhite:!1,counter:!1,disabled:!1,tag:"input",rows:1});Z([W],H.prototype,"onFocus",1);Z([W],H.prototype,"handleChange",1);Z([W],H.prototype,"removeTag",1);Z([W],H.prototype,"onBlur",1);Z([W],H.prototype,"onKeyUp",1);H=Z([ee("o-input")],H);Ce("transition",(w,_)=>{if(w.__updateClasses)return;w.__updateClasses=me(tt,0);const{name:$,delay:A=0}=_;new MutationObserver(i=>{i.forEach(b=>{if(b.type==="attributes"&&b.attributeName==="show"){const y=oe(w);w.__updateClasses(w,$,y,A,_)}})}).observe(w,{attributes:!0});const k=me(()=>{var i,b;oe(w)?(i=_.afterEnter)==null||i.call(_,w):((b=_.afterLeave)==null||b.call(_,w),w.style.display="none"),w.classList.remove(`${$}-enter-active`),w.classList.remove(`${$}-leave-active`)},0);w.__onTransitionEnd&&(w.removeEventListener("transitionend",w.__onTransitionEnd),w.removeEventListener("animationend",w.__onTransitionEnd)),w.addEventListener("transitionend",k),w.addEventListener("animationend",k),w.__onTransitionEnd=k;const f=oe(w);w.__updateClasses(w,$,f,A,_)});function oe(w){var _;return w.getAttribute("show")==="true"||w.getAttribute("show")==="1"||((_=w.props)==null?void 0:_.show)}let ie=!0,pe=null;function tt(w,_,$,A,E){var k,f;$?(ie=!1,w.style.display=pe||"",(k=E.beforeEnter)==null||k.call(E,w),w.classList.remove(`${_}-leave-to`),w.classList.remove(`${_}-leave-active`),w.classList.add(`${_}-enter-from`),requestAnimationFrame(()=>{setTimeout(()=>{var i;(i=E.enter)==null||i.call(E,w),w.classList.remove(`${_}-enter-from`),w.classList.add(`${_}-enter-to`),w.classList.add(`${_}-enter-active`)},1+A)})):(w.style.display!=="none"&&(pe=w.style.display),(f=E.beforeLeave)==null||f.call(E,w),ie?(w.style.display="none",ie=!1):(w.classList.remove(`${_}-enter-to`),w.classList.remove(`${_}-enter-active`),w.classList.add(`${_}-leave-from`),requestAnimationFrame(()=>{setTimeout(()=>{var i;(i=E.leave)==null||i.call(E,w),w.classList.remove(`${_}-leave-from`),w.classList.add(`${_}-leave-to`),w.classList.add(`${_}-leave-active`)},1+A)})))}function me(w,_){let $;return function(...A){$&&clearTimeout($),$=setTimeout(()=>{w.apply(this,A)},_)}}var we=Object.defineProperty,rt=Object.getOwnPropertyDescriptor,st=(w,_,$)=>_ in w?we(w,_,{enumerable:!0,configurable:!0,writable:!0,value:$}):w[_]=$,nt=(w,_,$,A)=>{for(var E=A>1?void 0:A?rt(_,$):_,k=w.length-1,f;k>=0;k--)(f=w[k])&&(E=(A?f(_,$,E):f(E))||E);return A&&E&&we(_,$,E),E},xe=(w,_,$)=>(st(w,typeof _!="symbol"?_+"":_,$),$);let se=class extends te{constructor(){super(...arguments);N(this,"popEl");N(this,"refEl");N(this,"showPopover",_=>{this.popper&&this.popper.destroy();const $=this.shadowRoot.querySelector("slot").assignedNodes()[0];this.popper=De($,this.shadowRoot.querySelector(".tip"),{placement:this.props.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]}),this.state.show=!this.state.show,this.update(),this.fire(this.state.show?"show":"hide")});N(this,"showPopoverByHover",_=>{this.props.hover&&this.showPopover(_)});N(this,"hidePopover",()=>{this.props.hover&&(this.state.show=!1,this.update(),this.fire("hide"))});N(this,"state",{show:!1})}install(){this.state.show=this.props.show,window.addEventListener("click",_=>{const $=_.path||_.composedPath&&event.composedPath();($?$.indexOf(this.popEl)<0:!this.popEl.contains(_.target))&&($?$.indexOf(this.refEl)<0:!this.refEl.contains(_.target))&&(this.state.show=!1,this.update())})}render(_){return S(S.f,null,S("slot",{ref:$=>this.refEl=$,style:"cursor:pointer",onClick:this.showPopover,onMouseenter:this.showPopoverByHover,onMouseleave:this.hidePopover}),S("div",{show:this.state.show,"o-transition":{name:"fade"},style:"z-index: 10000",class:T("z-100",{"pointer-events-none":!this.state.show,fixed:!0,tip:!0})},S("slot",{name:"content"})))}};xe(se,"css",[ue,`:host {
  display: inline-block;
}

.fade-leave-to,
.fade-enter-from {
  opacity: 0;
}

.fade-leave-active,
.fade-enter-active {
  transition: opacity 300ms ease-in;
}
`]);xe(se,"defaultProps",{show:!1,hover:!1,placement:"bottom"});se=nt([ee("o-popover")],se);const re={en:{weekdaysShort:["S","M","T","W","T","F","S"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",cancel:"Cancel",ok:"OK",clear:"Clear"},zh:{weekdaysShort:["一","二","三","四","五","六","日"],weekdays:["周一","周二","周三","周四","周五","周六","周日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",cancel:"取消",ok:"确定",clear:"清除"}};class at{constructor(_,$="en"){N(this,"locale");N(this,"currentDate");N(this,"firstDayOfWeek");N(this,"translations");this.currentDate=_?new Date(_):new Date,this.locale=$,this.locale==="zh"?this.firstDayOfWeek=1:this.firstDayOfWeek=0,this.translations=re[this.locale]}getYear(){return this.currentDate.getFullYear()}setDate(_){this.currentDate=new Date(_)}getLocaleMonth(){return this.getTranslations().months[this.currentDate.getMonth()]}getMonth(){return this.currentDate.getMonth()}getDate(){return this.currentDate.getDate()}now(){const _=new Date;return`${_.getFullYear()}-${_.getMonth()+1}-${_.getDate()}`}getDateString(){return this.locale==="zh"?`${this.getYear()}年${this.getMonth()+1}月`:`${re.en.months[this.getMonth()]} ${this.getYear()}`}getMonthString(){return`${re[this.locale].months[this.getMonth()]}`}generateMonthCalendar(){const _=this.currentDate.getFullYear(),$=this.currentDate.getMonth(),A=new Date(_,$,1),E=new Date(_,$+1,0),k=[];let f=[];const i=(A.getDay()-this.firstDayOfWeek+7)%7;for(let b=0;b<i;b++)f.push("");for(let b=1;b<=E.getDate();b++)f.push(b.toString()),f.length===7&&(k.push(f),f=[]);for(;f.length<7;)f.push("");return k.push(f),k.length===5&&k.push(Array(7).fill("")),k}prevMonth(){const _=this.currentDate.getMonth();_===0?(this.currentDate.setFullYear(this.currentDate.getFullYear()-1),this.currentDate.setMonth(11)):this.currentDate.setMonth(_-1)}nextMonth(){const _=this.currentDate.getMonth();_===11?(this.currentDate.setFullYear(this.currentDate.getFullYear()+1),this.currentDate.setMonth(0)):this.currentDate.setMonth(_+1)}setMonth(_,$){this.currentDate.setFullYear(_,$)}setLocale(_){this.locale=_}getLocale(){return this.locale}getTranslations(){return re[this.locale]}}var $e=Object.defineProperty,ot=Object.getOwnPropertyDescriptor,it=(w,_,$)=>_ in w?$e(w,_,{enumerable:!0,configurable:!0,writable:!0,value:$}):w[_]=$,K=(w,_,$,A)=>{for(var E=A>1?void 0:A?ot(_,$):_,k=w.length-1,f;k>=0;k--)(f=w[k])&&(E=(A?f(_,$,E):f(E))||E);return A&&E&&$e(_,$,E),E},ke=(w,_,$)=>(it(w,typeof _!="symbol"?_+"":_,$),$);const fe={td:"text-center data-[te-datepicker-cell-disabled]:text-neutral-300 data-[te-datepicker-cell-disabled]:cursor-default data-[te-datepicker-cell-disabled]:pointer-events-none data-[te-datepicker-cell-disabled]:hover:cursor-default hover:cursor-pointer group w-10 h-10 xs:max-md:landscape:w-8 xs:max-md:landscape:h-8",tdInner:"mx-auto group-[:not([data-te-datepicker-cell-disabled]):not([data-te-datepicker-cell-selected]):hover]:bg-neutral-300 group-[[data-te-datepicker-cell-selected]]:bg-primary group-[[data-te-datepicker-cell-selected]]:text-white group-[:not([data-te-datepicker-cell-selected])[data-te-datepicker-cell-focused]]:bg-neutral-100 group-[[data-te-datepicker-cell-focused]]:data-[te-datepicker-cell-selected]:bg-primary group-[[data-te-datepicker-cell-current]]:border-solid group-[[data-te-datepicker-cell-current]]:border-black group-[[data-te-datepicker-cell-current]]:border dark:group-[:not([data-te-datepicker-cell-disabled]):not([data-te-datepicker-cell-selected]):hover]:bg-white/10 dark:group-[[data-te-datepicker-cell-current]]:border-white dark:text-white dark:group-[:not([data-te-datepicker-cell-selected])[data-te-datepicker-cell-focused]]:bg-white/10 dark:group-[[data-te-datepicker-cell-disabled]]:text-neutral-500 w-9 h-9 leading-9 rounded-[50%] text-[13px]"};let V=class extends te{constructor(){super(...arguments);N(this,"calendar",null);N(this,"calendarMatrix",[]);N(this,"state",{selectedYear:null,selectedMonth:null,selectedDay:null,currentYear:null,currentMonth:null,currentDay:null});N(this,"years")}onClick(_){const $=_.currentTarget.dataset.teDate.split("-");this.state.selectedYear=Number($[0]),this.state.selectedMonth=Number($[1])-1,this.state.selectedDay=Number($[2]),this.update(),this.fire("select",{date:_.currentTarget.dataset.teDate,nativeEvent:_})}onMonthClick(_){this.state.currentMonth=Number(_.currentTarget.dataset.month),this.calendar.setMonth(this.state.currentYear,this.state.currentMonth),this.generateMonthCalendar(),this.update()}onYearClick(_){this.state.currentYear=Number(_.currentTarget.dataset.year),this.calendar.setMonth(this.state.currentYear,this.state.currentMonth),this.generateMonthCalendar(),this.update()}prevMonth(){this.calendar.prevMonth(),this.state.currentYear=this.calendar.getYear(),this.state.currentMonth=this.calendar.getMonth(),this.generateMonthCalendar(),this.update()}nextMonth(){this.calendar.nextMonth(),this.state.currentYear=this.calendar.getYear(),this.state.currentMonth=this.calendar.getMonth(),this.generateMonthCalendar(),this.update()}generateMonthCalendar(){this.calendar.setDate(`${this.state.currentYear}-${this.state.currentMonth+1}-${this.state.currentDay}`),this.calendarMatrix=this.calendar.generateMonthCalendar()}install(){if(this.props.value){const A=this.props.value.split("-");this.state.currentYear=Number(A[0]),this.state.currentMonth=Number(A[1])-1,this.state.currentDay=Number(A[2]),this.state.selectedYear=Number(A[0]),this.state.selectedMonth=Number(A[1])-1,this.state.selectedDay=Number(A[2])}this.calendar=new at(this.props.value,this.props.locale),this.calendarMatrix=this.calendar.generateMonthCalendar();const _=new Date().getFullYear(),$=[];for(let A=_-101;A<=_+101;A++)$.push(A);this.years=$}setDate(_){this.calendar.setDate(_),this.calendarMatrix=this.calendar.generateMonthCalendar(),this.update()}onYearShow(){var $;const _=($=this.rootElement)==null?void 0:$.querySelector(`#year-${this.state.currentYear}`);if(_){const A=_.parentNode.scrollTop,E=_.getBoundingClientRect(),k=_.parentNode.getBoundingClientRect(),f=A+E.top-k.top;_.parentNode.scrollTop=f}}onMonthShow(){var $;const _=($=this.rootElement)==null?void 0:$.querySelector(`#month-${this.state.currentMonth}`);if(_){const A=_.parentNode.scrollTop,E=_.getBoundingClientRect(),k=_.parentNode.getBoundingClientRect(),f=A+E.top-k.top;_.parentNode.scrollTop=f}}render(_){return S("div",{class:T("flex flex-col w-[328px] bg-white rounded shadow-lg z-[1066] xs:max-md:landscape:w-[475px] xs:max-md:landscape:flex-row dark:bg-zinc-700 animate-[fade-in_0.3s_both] px-[auto] motion-reduce:transition-none motion-reduce:animate-none",{"h-[410px] xs:max-md:landscape:h-[360px]":_.hasFooter,"h-[354px] xs:max-md:landscape:h-[304px]":!_.hasFooter})},S("div",{class:"relative h-full"},S("div",{class:"px-3 pt-2.5 pb-0 flex justify-between text-black/[64]"},S("o-popover",{onShow:this.onYearShow},S("button",{class:"flex items-center outline-none p-2.5 text-neutral-500 font-medium text-[0.9rem] rounded shadow-none bg-transparent m-0 border-none hover:bg-neutral-200 focus:bg-neutral-200  dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10","aria-label":"Choose year and month","data-te-datepicker-view-change-button-ref":""},this.calendar.getYear(),S("span",{class:"inline-block pointer-events-none ml-[3px] [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-neutral-500 dark:[&>svg]:fill-white"},S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0",stroke:"currentColor",class:"w-6 h-6"},S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})))),S("div",{class:"w-20 overflow-auto h-[263px] bg-white border rounded",slot:"content"},this.years.map($=>S("a",{href:"javascript:",onClick:this.onYearClick,"aria-current":"true","data-year":$,id:`year-${$}`,class:T("block w-full cursor-pointer p-2",{"text-primary-600 bg-primary-100":this.state.currentYear===$,"transition duration-500 hover:bg-neutral-100 hover:text-neutral-500 focus:bg-neutral-100 focus:text-neutral-500 focus:ring-0 dark:hover:bg-neutral-600 dark:hover:text-neutral-200 dark:focus:bg-neutral-600 dark:focus:text-neutral-200":!this.state.currentYear||this.state.currentYear!==$})},$)))),S("o-popover",{onShow:this.onMonthShow},S("button",{class:"flex items-center outline-none p-2.5 text-neutral-500 font-medium text-[0.9rem] rounded shadow-none bg-transparent m-0 border-none hover:bg-neutral-200 focus:bg-neutral-200  dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10","aria-label":"Choose year and month","data-te-datepicker-view-change-button-ref":""},this.calendar.translations.months[this.state.currentMonth]||this.calendar.getMonthString(),S("span",{class:"inline-block pointer-events-none ml-[3px] [&>svg]:w-4 [&>svg]:h-4 [&>svg]:fill-neutral-500 dark:[&>svg]:fill-white"},S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"0",stroke:"currentColor",class:"w-6 h-6"},S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})))),S("div",{class:"w-24 overflow-auto h-[263px] bg-white border rounded",slot:"content"},Array.from({length:12}).map(($,A)=>S("a",{href:"javascript:","aria-current":"true","data-month":A,id:`month-${A}`,onClick:this.onMonthClick,class:T("block w-full cursor-pointer p-2",{"text-primary-600 bg-primary-100":this.state.currentMonth===A,"transition duration-500 hover:bg-neutral-100 hover:text-neutral-500 focus:bg-neutral-100 focus:text-neutral-500 focus:ring-0 dark:hover:bg-neutral-600 dark:hover:text-neutral-200 dark:focus:bg-neutral-600 dark:focus:text-neutral-200":!this.state.currentMonth||this.state.currentMonth!==A})},this.calendar.translations.months[A])))),S("div",null,S("button",{onClick:this.prevMonth,class:"p-0 w-10 h-10 leading-10 border-none outline-none m-0 text-gray-600 bg-transparent mr-6 hover:bg-neutral-200 hover:rounded-[50%] focus:bg-neutral-200 focus:rounded-[50%] dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:mx-auto","aria-label":"Previous month","data-te-datepicker-previous-button-ref":""},S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-6 h-6"},S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))),S("button",{onClick:this.nextMonth,class:"p-0 w-10 h-10 leading-10 border-none outline-none m-0 text-gray-600 bg-transparent hover:bg-neutral-200 hover:rounded-[50%] focus:bg-neutral-200 focus:rounded-[50%] dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10 [&>svg]:w-4 [&>svg]:h-4 [&>svg]:rotate-180 [&>svg]:mx-auto","aria-label":"Next month","data-te-datepicker-next-button-ref":""},S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"3",stroke:"currentColor",class:"w-6 h-6"},S("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))))),S("div",{class:"outline-none px-3","data-te-datepicker-view-ref":"",tabindex:"0"},S("table",{class:"mx-auto w-[304px]"},S("thead",null,S("tr",null,this.calendar.translations.weekdaysShort.map(($,A)=>S("th",{class:"w-10 h-10 text-center text-[12px] font-normal dark:text-white",scope:"col","aria-label":this.calendar.translations.weekdays[A]},$)))),S("tbody",null,this.calendarMatrix.map(($,A)=>{const E=this.calendar.getYear(),k=this.calendar.getMonth()+1;return S("tr",null,$.map((f,i)=>S("td",{onClick:this.onClick,class:T(fe.td,{"text-primary-foreground":`${E}-${k}-${f}`==`${this.state.selectedYear}-${this.state.selectedMonth+1}-${this.state.selectedDay}`}),"data-te-datepicker-cell-selected":`${E}-${k}-${f}`==`${this.state.selectedYear}-${this.state.selectedMonth+1}-${this.state.selectedDay}`,"data-te-datepicker-cell-disabled":f==="","data-te-datepicker-cell-current":`${E}-${k}-${f}`===this.calendar.now(),"data-te-date":f===""?"":`${E}-${k}-${f}`},S("div",{class:T(fe.tdInner)},f))))})))),_.hasFooter&&S("div",{class:"h-14 flex absolute w-full bottom-0 justify-end items-center px-3"},S("button",{class:"outline-none bg-white text-primary border-none cursor-pointer py-0 px-2.5 uppercase text-[0.8rem] leading-10 font-medium h-10 tracking-[.1rem] rounded mb-2.5 hover:bg-neutral-200 focus:bg-neutral-200 dark:bg-transparent dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10 mr-auto","aria-label":"Clear selection","data-te-datepicker-clear-button-ref":""},this.calendar.translations.clear),S("button",{class:"outline-none bg-white text-primary border-none cursor-pointer py-0 px-2.5 uppercase text-[0.8rem] leading-10 font-medium h-10 tracking-[.1rem] rounded mb-2.5 hover:bg-neutral-200 focus:bg-neutral-200 dark:bg-transparent dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10","aria-label":"Cancel selection","data-te-datepicker-cancel-button-ref":""},this.calendar.translations.cancel),S("button",{class:"outline-none bg-white text-primary border-none cursor-pointer py-0 px-2.5 uppercase text-[0.8rem] leading-10 font-medium h-10 tracking-[.1rem] rounded mb-2.5 hover:bg-neutral-200 focus:bg-neutral-200 dark:bg-transparent dark:text-white dark:hover:bg-white/10 dark:focus:bg-white/10","aria-label":"Confirm selection","data-te-datepicker-ok-button-ref":""},this.calendar.translations.ok))))}};ke(V,"css",[ue,`:host {
    display: block;
  }
  `]);ke(V,"defaultProps",{vaule:"",range:!1,className:"",hasFooter:!1});K([W],V.prototype,"onClick",1);K([W],V.prototype,"onMonthClick",1);K([W],V.prototype,"onYearClick",1);K([W],V.prototype,"prevMonth",1);K([W],V.prototype,"nextMonth",1);K([W],V.prototype,"onYearShow",1);K([W],V.prototype,"onMonthShow",1);V=K([ee("o-calendar")],V);var lt=Object.defineProperty,ut=Object.getOwnPropertyDescriptor,ct=(w,_,$,A)=>{for(var E=A>1?void 0:A?ut(_,$):_,k=w.length-1,f;k>=0;k--)(f=w[k])&&(E=(A?f(_,$,E):f(E))||E);return A&&E&&lt(_,$,E),E};let ge=class extends te{constructor(){super(...arguments);N(this,"state",{date:""})}render(){return S("o-popover",{placement:"bottom"},S("o-input",{type:"date",value:this.state.date,label:""}),S("o-calendar",{onSelect:_=>{this.state.date=_.detail.date,this.update()},slot:"content"}))}};ge=ct([ee("o-date-picker")],ge);
