var me=Object.defineProperty;var de=($,k,F)=>k in $?me($,k,{enumerable:!0,configurable:!0,writable:!0,value:F}):$[k]=F;var Z=($,k,F)=>(de($,typeof k!="symbol"?k+"":k,F),F);import{z as te,Y as re,P as D,r as q,S as J,b as pe,t as he}from"./index-133f0293.js";import"./index-ccdd4595.js";var fe=Object.defineProperty,ge=($,k,F)=>k in $?fe($,k,{enumerable:!0,configurable:!0,writable:!0,value:F}):$[k]=F,T=($,k,F)=>(ge($,typeof k!="symbol"?k+"":k,F),F),oe={exports:{}};(function($,k){(function(F,S){$.exports=S()})(self,()=>{return F={7629:(E,x,v)=>{const l=v(375),b=v(8571),g=v(9474),m=v(1687),e=v(8652),n=v(8160),i=v(3292),s=v(6354),t=v(8901),o=v(9708),r=v(6914),a=v(2294),u=v(6133),d=v(1152),f=v(8863),_=v(2036),y={Base:class{constructor(c){this.type=c,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new a.Ids,this._preferences=null,this._refs=new u.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return l(typeof o.describe=="function","Manifest functionality disabled"),o.describe(this)}allow(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];return n.verifyFlat(p,"allow"),this._values(p,"_valids")}alter(c){l(c&&typeof c=="object"&&!Array.isArray(c),"Invalid targets argument"),l(!this._inRuleset(),"Cannot set alterations inside a ruleset");const p=this.clone();p.$_terms.alterations=p.$_terms.alterations||[];for(const h in c){const w=c[h];l(typeof w=="function","Alteration adjuster for",h,"must be a function"),p.$_terms.alterations.push({target:h,adjuster:w})}return p.$_temp.ruleset=!1,p}artifact(c){return l(c!==void 0,"Artifact cannot be undefined"),l(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",c)}cast(c){return l(c===!1||typeof c=="string","Invalid to value"),l(c===!1||this._definition.cast[c],"Type",this.type,"does not support casting to",c),this.$_setFlag("cast",c===!1?void 0:c)}default(c,p){return this._default("default",c,p)}description(c){return l(c&&typeof c=="string","Description must be a non-empty string"),this.$_setFlag("description",c)}empty(c){const p=this.clone();return c!==void 0&&(c=p.$_compile(c,{override:!1})),p.$_setFlag("empty",c,{clone:!1})}error(c){return l(c,"Missing error"),l(c instanceof Error||typeof c=="function","Must provide a valid Error object or a function"),this.$_setFlag("error",c)}example(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l(c!==void 0,"Missing example"),n.assertOptions(p,["override"]),this._inner("examples",c,{single:!0,override:p.override})}external(c,p){return typeof c=="object"&&(l(!p,"Cannot combine options with description"),p=c.description,c=c.method),l(typeof c=="function","Method must be a function"),l(p===void 0||p&&typeof p=="string","Description must be a non-empty string"),this._inner("externals",{method:c,description:p},{single:!0})}failover(c,p){return this._default("failover",c,p)}forbidden(){return this.presence("forbidden")}id(c){return c?(l(typeof c=="string","id must be a non-empty string"),l(/^[^\.]+$/.test(c),"id cannot contain period character"),this.$_setFlag("id",c)):this.$_setFlag("id",void 0)}invalid(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];return this._values(p,"_invalids")}label(c){return l(c&&typeof c=="string","Label name must be a non-empty string"),this.$_setFlag("label",c)}meta(c){return l(c!==void 0,"Meta cannot be undefined"),this._inner("metas",c,{single:!0})}note(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];l(p.length,"Missing notes");for(const w of p)l(w&&typeof w=="string","Notes must be non-empty strings");return this._inner("notes",p)}only(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return l(typeof c=="boolean","Invalid mode:",c),this.$_setFlag("only",c)}optional(){return this.presence("optional")}prefs(c){l(c,"Missing preferences"),l(c.context===void 0,"Cannot override context"),l(c.externals===void 0,"Cannot override externals"),l(c.warnings===void 0,"Cannot override warnings"),l(c.debug===void 0,"Cannot override debug"),n.checkPreferences(c);const p=this.clone();return p._preferences=n.preferences(p._preferences,c),p}presence(c){return l(["optional","required","forbidden"].includes(c),"Unknown presence mode",c),this.$_setFlag("presence",c)}raw(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("result",c?"raw":void 0)}result(c){return l(["raw","strip"].includes(c),"Unknown result mode",c),this.$_setFlag("result",c)}required(){return this.presence("required")}strict(c){const p=this.clone(),h=c!==void 0&&!c;return p._preferences=n.preferences(p._preferences,{convert:h}),p}strip(){let c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("result",c?"strip":void 0)}tag(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];l(p.length,"Missing tags");for(const w of p)l(w&&typeof w=="string","Tags must be non-empty strings");return this._inner("tags",p)}unit(c){return l(c&&typeof c=="string","Unit name must be a non-empty string"),this.$_setFlag("unit",c)}valid(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];n.verifyFlat(p,"valid");const w=this.allow(...p);return w.$_setFlag("only",!!w._valids,{clone:!1}),w}when(c,p){const h=this.clone();h.$_terms.whens||(h.$_terms.whens=[]);const w=i.when(h,c,p);if(!["any","link"].includes(h.type)){const A=w.is?[w]:w.switch;for(const C of A)l(!C.then||C.then.type==="any"||C.then.type===h.type,"Cannot combine",h.type,"with",C.then&&C.then.type),l(!C.otherwise||C.otherwise.type==="any"||C.otherwise.type===h.type,"Cannot combine",h.type,"with",C.otherwise&&C.otherwise.type)}return h.$_terms.whens.push(w),h.$_mutateRebuild()}cache(c){l(!this._inRuleset(),"Cannot set caching inside a ruleset"),l(!this._cache,"Cannot override schema cache"),l(this._flags.artifact===void 0,"Cannot cache a rule with an artifact");const p=this.clone();return p._cache=c||e.provider.provision(),p.$_temp.ruleset=!1,p}clone(){const c=Object.create(Object.getPrototypeOf(this));return this._assign(c)}concat(c){l(n.isSchema(c),"Invalid schema object"),l(this.type==="any"||c.type==="any"||c.type===this.type,"Cannot merge type",this.type,"with another type:",c.type),l(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),l(!c._inRuleset(),"Cannot concatenate a schema with open ruleset");let p=this.clone();if(this.type==="any"&&c.type!=="any"){const h=c.clone();for(const w of Object.keys(p))w!=="type"&&(h[w]=p[w]);p=h}p._ids.concat(c._ids),p._refs.register(c,u.toSibling),p._preferences=p._preferences?n.preferences(p._preferences,c._preferences):c._preferences,p._valids=_.merge(p._valids,c._valids,c._invalids),p._invalids=_.merge(p._invalids,c._invalids,c._valids);for(const h of c._singleRules.keys())p._singleRules.has(h)&&(p._rules=p._rules.filter(w=>w.keep||w.name!==h),p._singleRules.delete(h));for(const h of c._rules)c._definition.rules[h.method].multi||p._singleRules.set(h.name,h),p._rules.push(h);if(p._flags.empty&&c._flags.empty){p._flags.empty=p._flags.empty.concat(c._flags.empty);const h=Object.assign({},c._flags);delete h.empty,m(p._flags,h)}else if(c._flags.empty){p._flags.empty=c._flags.empty;const h=Object.assign({},c._flags);delete h.empty,m(p._flags,h)}else m(p._flags,c._flags);for(const h in c.$_terms){const w=c.$_terms[h];w?p.$_terms[h]?p.$_terms[h]=p.$_terms[h].concat(w):p.$_terms[h]=w.slice():p.$_terms[h]||(p.$_terms[h]=w)}return this.$_root._tracer&&this.$_root._tracer._combine(p,[this,c]),p.$_mutateRebuild()}extend(c){return l(!c.base,"Cannot extend type with another base"),t.type(this,c)}extract(c){return c=Array.isArray(c)?c:c.split("."),this._ids.reach(c)}fork(c,p){l(!this._inRuleset(),"Cannot fork inside a ruleset");let h=this;for(let w of[].concat(c))w=Array.isArray(w)?w:w.split("."),h=h._ids.fork(w,p,h);return h.$_temp.ruleset=!1,h}rule(c){const p=this._definition;n.assertOptions(c,Object.keys(p.modifiers)),l(this.$_temp.ruleset!==!1,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const h=this.$_temp.ruleset===null?this._rules.length-1:this.$_temp.ruleset;l(h>=0&&h<this._rules.length,"Cannot apply rules to empty ruleset");const w=this.clone();for(let A=h;A<w._rules.length;++A){const C=w._rules[A],R=b(C);for(const j in c)p.modifiers[j](R,c[j]),l(R.name===C.name,"Cannot change rule name");w._rules[A]=R,w._singleRules.get(R.name)===C&&w._singleRules.set(R.name,R)}return w.$_temp.ruleset=!1,w.$_mutateRebuild()}get ruleset(){l(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const c=this.clone();return c.$_temp.ruleset=c._rules.length,c}get $(){return this.ruleset}tailor(c){c=[].concat(c),l(!this._inRuleset(),"Cannot tailor inside a ruleset");let p=this;if(this.$_terms.alterations)for(const{target:h,adjuster:w}of this.$_terms.alterations)c.includes(h)&&(p=w(p),l(n.isSchema(p),"Alteration adjuster for",h,"failed to return a schema object"));return p=p.$_modify({each:h=>h.tailor(c),ref:!1}),p.$_temp.ruleset=!1,p.$_mutateRebuild()}tracer(){return d.location?d.location(this):this}validate(c,p){return f.entry(c,this,p)}validateAsync(c,p){return f.entryAsync(c,this,p)}$_addRule(c){typeof c=="string"&&(c={name:c}),l(c&&typeof c=="object","Invalid options"),l(c.name&&typeof c.name=="string","Invalid rule name");for(const C in c)l(C[0]!=="_","Cannot set private rule properties");const p=Object.assign({},c);p._resolve=[],p.method=p.method||p.name;const h=this._definition.rules[p.method],w=p.args;l(h,"Unknown rule",p.method);const A=this.clone();if(w){l(Object.keys(w).length===1||Object.keys(w).length===this._definition.rules[p.name].args.length,"Invalid rule definition for",this.type,p.name);for(const C in w){let R=w[C];if(h.argsByName){const j=h.argsByName.get(C);if(j.ref&&n.isResolvable(R))p._resolve.push(C),A.$_mutateRegister(R);else if(j.normalize&&(R=j.normalize(R),w[C]=R),j.assert){const B=n.validateArg(R,C,j);l(!B,B,"or reference")}}R!==void 0?w[C]=R:delete w[C]}}return h.multi||(A._ruleRemove(p.name,{clone:!1}),A._singleRules.set(p.name,p)),A.$_temp.ruleset===!1&&(A.$_temp.ruleset=null),h.priority?A._rules.unshift(p):A._rules.push(p),A}$_compile(c,p){return i.schema(this.$_root,c,p)}$_createError(c,p,h,w,A){let C=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};const R=C.flags!==!1?this._flags:{},j=C.messages?r.merge(this._definition.messages,C.messages):this._definition.messages;return new s.Report(c,p,h,R,j,w,A)}$_getFlag(c){return this._flags[c]}$_getRule(c){return this._singleRules.get(c)}$_mapLabels(c){return c=Array.isArray(c)?c:c.split("."),this._ids.labels(c)}$_match(c,p,h,w){(h=Object.assign({},h)).abortEarly=!0,h._externals=!1,p.snapshot();const A=!f.validate(c,this,p,h,w).errors;return p.restore(),A}$_modify(c){return n.assertOptions(c,["each","once","ref","schema"]),a.schema(this,c)||this}$_mutateRebuild(){return l(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(c,p)=>{let{source:h,name:w,path:A,key:C}=p;const R=this._definition[h][w]&&this._definition[h][w].register;R!==!1&&this.$_mutateRegister(c,{family:R,key:C})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(c){let{family:p,key:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._refs.register(c,p),this._ids.register(c,{key:h})}$_property(c){return this._definition.properties[c]}$_reach(c){return this._ids.reach(c)}$_rootReferences(){return this._refs.roots()}$_setFlag(c,p){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l(c[0]==="_"||!this._inRuleset(),"Cannot set flag inside a ruleset");const w=this._definition.flags[c]||{};if(g(p,w.default)&&(p=void 0),g(p,this._flags[c]))return this;const A=h.clone!==!1?this.clone():this;return p!==void 0?(A._flags[c]=p,A.$_mutateRegister(p)):delete A._flags[c],c[0]!=="_"&&(A.$_temp.ruleset=!1),A}$_parent(c){for(var p=arguments.length,h=new Array(p>1?p-1:0),w=1;w<p;w++)h[w-1]=arguments[w];return this[c][n.symbols.parent].call(this,...h)}$_validate(c,p,h){return f.validate(c,this,p,h)}_assign(c){c.type=this.type,c.$_root=this.$_root,c.$_temp=Object.assign({},this.$_temp),c.$_temp.whens={},c._ids=this._ids.clone(),c._preferences=this._preferences,c._valids=this._valids&&this._valids.clone(),c._invalids=this._invalids&&this._invalids.clone(),c._rules=this._rules.slice(),c._singleRules=b(this._singleRules,{shallow:!0}),c._refs=this._refs.clone(),c._flags=Object.assign({},this._flags),c._cache=null,c.$_terms={};for(const p in this.$_terms)c.$_terms[p]=this.$_terms[p]?this.$_terms[p].slice():null;c.$_super={};for(const p in this.$_super)c.$_super[p]=this._super[p].bind(c);return c}_bare(){const c=this.clone();c._reset();const p=c._definition.terms;for(const h in p){const w=p[h];c.$_terms[h]=w.init}return c.$_mutateRebuild()}_default(c,p){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n.assertOptions(h,"literal"),l(p!==void 0,"Missing",c,"value"),l(typeof p=="function"||!h.literal,"Only function value supports literal option"),typeof p=="function"&&h.literal&&(p={[n.symbols.literal]:!0,literal:p}),this.$_setFlag(c,p)}_generate(c,p,h){if(!this.$_terms.whens)return{schema:this};const w=[],A=[];for(let j=0;j<this.$_terms.whens.length;++j){const B=this.$_terms.whens[j];if(B.concat){w.push(B.concat),A.push(`${j}.concat`);continue}const O=B.ref?B.ref.resolve(c,p,h):c,L=B.is?[B]:B.switch,N=A.length;for(let U=0;U<L.length;++U){const{is:I,then:M,otherwise:z}=L[U],P=`${j}${B.switch?"."+U:""}`;if(I.$_match(O,p.nest(I,`${P}.is`),h)){if(M){const K=p.localize([...p.path,`${P}.then`],p.ancestors,p.schemas),{schema:Q,id:G}=M._generate(c,K,h);w.push(Q),A.push(`${P}.then${G?`(${G})`:""}`);break}}else if(z){const K=p.localize([...p.path,`${P}.otherwise`],p.ancestors,p.schemas),{schema:Q,id:G}=z._generate(c,K,h);w.push(Q),A.push(`${P}.otherwise${G?`(${G})`:""}`);break}}if(B.break&&A.length>N)break}const C=A.join(", ");if(p.mainstay.tracer.debug(p,"rule","when",C),!C)return{schema:this};if(!p.mainstay.tracer.active&&this.$_temp.whens[C])return{schema:this.$_temp.whens[C],id:C};let R=this;this._definition.generate&&(R=this._definition.generate(this,c,p,h));for(const j of w)R=R.concat(j);return this.$_root._tracer&&this.$_root._tracer._combine(R,[this,...w]),this.$_temp.whens[C]=R,{schema:R,id:C}}_inner(c,p){let h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l(!this._inRuleset(),`Cannot set ${c} inside a ruleset`);const w=this.clone();return w.$_terms[c]&&!h.override||(w.$_terms[c]=[]),h.single?w.$_terms[c].push(p):w.$_terms[c].push(...p),w.$_temp.ruleset=!1,w}_inRuleset(){return this.$_temp.ruleset!==null&&this.$_temp.ruleset!==!1}_ruleRemove(c){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._singleRules.has(c))return this;const h=p.clone!==!1?this.clone():this;h._singleRules.delete(c);const w=[];for(let A=0;A<h._rules.length;++A){const C=h._rules[A];C.name!==c||C.keep?w.push(C):h._inRuleset()&&A<h.$_temp.ruleset&&--h.$_temp.ruleset}return h._rules=w,h}_values(c,p){n.verifyFlat(c,p.slice(1,-1));const h=this.clone(),w=c[0]===n.symbols.override;if(w&&(c=c.slice(1)),!h[p]&&c.length?h[p]=new _:w&&(h[p]=c.length?new _:null,h.$_mutateRebuild()),!h[p])return h;w&&h[p].override();for(const A of c){l(A!==void 0,"Cannot call allow/valid/invalid with undefined"),l(A!==n.symbols.override,"Override must be the first value");const C=p==="_invalids"?"_valids":"_invalids";h[C]&&(h[C].remove(A),h[C].length||(l(p==="_valids"||!h._flags.only,"Setting invalid value",A,"leaves schema rejecting all values due to previous valid rule"),h[C]=null)),h[p].add(A,h._refs)}return h}}};y.Base.prototype[n.symbols.any]={version:n.version,compile:i.compile,root:"$_root"},y.Base.prototype.isImmutable=!0,y.Base.prototype.deny=y.Base.prototype.invalid,y.Base.prototype.disallow=y.Base.prototype.invalid,y.Base.prototype.equal=y.Base.prototype.valid,y.Base.prototype.exist=y.Base.prototype.required,y.Base.prototype.not=y.Base.prototype.invalid,y.Base.prototype.options=y.Base.prototype.prefs,y.Base.prototype.preferences=y.Base.prototype.prefs,E.exports=new y.Base},8652:(E,x,v)=>{const l=v(375),b=v(8571),g=v(8160),m={max:1e3,supported:new Set(["undefined","boolean","number","string"])};x.provider={provision:e=>new m.Cache(e)},m.Cache=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g.assertOptions(e,["max"]),l(e.max===void 0||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||m.max,this._map=new Map,this._list=new m.List}get length(){return this._map.size}set(e,n){if(e!==null&&!m.supported.has(typeof e))return;let i=this._map.get(e);if(i)return i.value=n,void this._list.first(i);i=this._list.unshift({key:e,value:n}),this._map.set(e,i),this._compact()}get(e){const n=this._map.get(e);if(n)return this._list.first(n),b(n.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},m.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:n,prev:i}=e;return n.prev=i,i&&(i.next=n),e===this.tail&&(this.tail=n),e.prev=null,e.next=null,e}}},8160:(E,x,v)=>{const l=v(375),b=v(7916),g=v(5934);let m,e;const n={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};x.version=g.version,x.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},x.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},x.assertOptions=function(i,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Options";l(i&&typeof i=="object"&&!Array.isArray(i),"Options must be of type object");const o=Object.keys(i).filter(r=>!s.includes(r));l(o.length===0,`${t} contain unknown keys: ${o}`)},x.checkPreferences=function(i){e=e||v(3378);const s=e.preferences.validate(i);if(s.error)throw new b([s.error.details[0].message])},x.compare=function(i,s,t){switch(t){case"=":return i===s;case">":return i>s;case"<":return i<s;case">=":return i>=s;case"<=":return i<=s}},x.default=function(i,s){return i===void 0?s:i},x.isIsoDate=function(i){return n.isoDate.test(i)},x.isNumber=function(i){return typeof i=="number"&&!isNaN(i)},x.isResolvable=function(i){return!!i&&(i[x.symbols.ref]||i[x.symbols.template])},x.isSchema=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const t=i&&i[x.symbols.any];return!!t&&(l(s.legacy||t.version===x.version,"Cannot mix different versions of joi schemas"),!0)},x.isValues=function(i){return i[x.symbols.values]},x.limit=function(i){return Number.isSafeInteger(i)&&i>=0},x.preferences=function(i,s){m=m||v(6914),i=i||{},s=s||{};const t=Object.assign({},i,s);return s.errors&&i.errors&&(t.errors=Object.assign({},i.errors,s.errors),t.errors.wrap=Object.assign({},i.errors.wrap,s.errors.wrap)),s.messages&&(t.messages=m.compile(s.messages,i.messages)),delete t[x.symbols.prefs],t},x.tryWithPath=function(i,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{return i()}catch(o){throw o.path!==void 0?o.path=s+"."+o.path:o.path=s,t.append&&(o.message=`${o.message} (${o.path})`),o}},x.validateArg=function(i,s,t){let{assert:o,message:r}=t;if(x.isSchema(o)){const a=o.validate(i);return a.error?a.error.message:void 0}if(!o(i))return s?`${s} ${r}`:r},x.verifyFlat=function(i,s){for(const t of i)l(!Array.isArray(t),"Method no longer accepts array arguments:",s)}},3292:(E,x,v)=>{const l=v(375),b=v(8160),g=v(6133),m={};x.schema=function(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.assertOptions(i,["appendPath","override"]);try{return m.schema(e,n,i)}catch(s){throw i.appendPath&&s.path!==void 0&&(s.message=`${s.message} (${s.path})`),s}},m.schema=function(e,n,i){l(n!==void 0,"Invalid undefined schema"),Array.isArray(n)&&(l(n.length,"Invalid empty array schema"),n.length===1&&(n=n[0]));const s=function(t){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return i.override!==!1?t.valid(e.override,...r):t.valid(...r)};if(m.simple(n))return s(e,n);if(typeof n=="function")return e.custom(n);if(l(typeof n=="object","Invalid schema content:",typeof n),b.isResolvable(n))return s(e,n);if(b.isSchema(n))return n;if(Array.isArray(n)){for(const t of n)if(!m.simple(t))return e.alternatives().try(...n);return s(e,...n)}return n instanceof RegExp?e.string().regex(n):n instanceof Date?s(e.date(),n):(l(Object.getPrototypeOf(n)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(n))},x.ref=function(e,n){return g.isRef(e)?e:g.create(e,n)},x.compile=function(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b.assertOptions(i,["legacy"]);const s=n&&n[b.symbols.any];if(s)return l(i.legacy||s.version===b.version,"Cannot mix different versions of joi schemas:",s.version,b.version),n;if(typeof n!="object"||!i.legacy)return x.schema(e,n,{appendPath:!0});const t=m.walk(n);return t?t.compile(t.root,n):x.schema(e,n,{appendPath:!0})},m.walk=function(e){if(typeof e!="object")return null;if(Array.isArray(e)){for(const i of e){const s=m.walk(i);if(s)return s}return null}const n=e[b.symbols.any];if(n)return{root:e[n.root],compile:n.compile};l(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const i in e){const s=m.walk(e[i]);if(s)return s}return null},m.simple=function(e){return e===null||["boolean","string","number"].includes(typeof e)},x.when=function(e,n,i){if(i===void 0&&(l(n&&typeof n=="object","Missing options"),i=n,n=g.create(".")),Array.isArray(i)&&(i={switch:i}),b.assertOptions(i,["is","not","then","otherwise","switch","break"]),b.isSchema(n))return l(i.is===void 0,'"is" can not be used with a schema condition'),l(i.not===void 0,'"not" can not be used with a schema condition'),l(i.switch===void 0,'"switch" can not be used with a schema condition'),m.condition(e,{is:n,then:i.then,otherwise:i.otherwise,break:i.break});if(l(g.isRef(n)||typeof n=="string","Invalid condition:",n),l(i.not===void 0||i.is===void 0,'Cannot combine "is" with "not"'),i.switch===void 0){let t=i;i.not!==void 0&&(t={is:i.not,then:i.otherwise,otherwise:i.then,break:i.break});let o=t.is!==void 0?e.$_compile(t.is):e.$_root.invalid(null,!1,0,"").required();return l(t.then!==void 0||t.otherwise!==void 0,'options must have at least one of "then", "otherwise", or "switch"'),l(t.break===void 0||t.then===void 0||t.otherwise===void 0,"Cannot specify then, otherwise, and break all together"),i.is===void 0||g.isRef(i.is)||b.isSchema(i.is)||(o=o.required()),m.condition(e,{ref:x.ref(n),is:o,then:t.then,otherwise:t.otherwise,break:t.break})}l(Array.isArray(i.switch),'"switch" must be an array'),l(i.is===void 0,'Cannot combine "switch" with "is"'),l(i.not===void 0,'Cannot combine "switch" with "not"'),l(i.then===void 0,'Cannot combine "switch" with "then"');const s={ref:x.ref(n),switch:[],break:i.break};for(let t=0;t<i.switch.length;++t){const o=i.switch[t],r=t===i.switch.length-1;b.assertOptions(o,r?["is","then","otherwise"]:["is","then"]),l(o.is!==void 0,'Switch statement missing "is"'),l(o.then!==void 0,'Switch statement missing "then"');const a={is:e.$_compile(o.is),then:e.$_compile(o.then)};if(g.isRef(o.is)||b.isSchema(o.is)||(a.is=a.is.required()),r){l(i.otherwise===void 0||o.otherwise===void 0,'Cannot specify "otherwise" inside and outside a "switch"');const u=i.otherwise!==void 0?i.otherwise:o.otherwise;u!==void 0&&(l(s.break===void 0,"Cannot specify both otherwise and break"),a.otherwise=e.$_compile(u))}s.switch.push(a)}return s},m.condition=function(e,n){for(const i of["then","otherwise"])n[i]===void 0?delete n[i]:n[i]=e.$_compile(n[i]);return n}},6354:(E,x,v)=>{const l=v(5688),b=v(8160),g=v(3328);x.Report=class{constructor(m,e,n,i,s,t,o){if(this.code=m,this.flags=i,this.messages=s,this.path=t.path,this.prefs=o,this.state=t,this.value=e,this.message=null,this.template=null,this.local=n||{},this.local.label=x.label(this.flags,this.state,this.prefs,this.messages),this.value===void 0||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const r=this.path[this.path.length-1];typeof r!="object"&&(this.local.key=r)}}_setTemplate(m){if(this.template=m,!this.flags.label&&this.path.length===0){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const m=this.code;if(!this.prefs.errors.render)return this.code;const e=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return e===void 0?`Error code "${m}" is not defined, your custom type is missing the correct messages definition`:(this.message=e.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(m,e){return x.template(this.value,m,e||this.code,this.state,this.prefs)}},x.path=function(m){let e="";for(const n of m)typeof n!="object"&&(typeof n=="string"?(e&&(e+="."),e+=n):e+=`[${n}]`);return e},x.template=function(m,e,n,i,s){if(!e)return;if(g.isTemplate(e))return n!=="root"?e:null;let t=s.errors.language;if(b.isResolvable(t)&&(t=t.resolve(m,i,s)),t&&e[t]){if(e[t][n]!==void 0)return e[t][n];if(e[t]["*"]!==void 0)return e[t]["*"]}return e[n]?e[n]:e["*"]},x.label=function(m,e,n,i){if(m.label)return m.label;if(!n.errors.label)return"";let s=e.path;return n.errors.label==="key"&&e.path.length>1&&(s=e.path.slice(-1)),x.path(s)||x.template(null,n.messages,"root",e,n)||i&&x.template(null,i,"root",e,n)||"value"},x.process=function(m,e,n){if(!m)return null;const{override:i,message:s,details:t}=x.details(m);if(i)return i;if(n.errors.stack)return new x.ValidationError(s,t,e);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const r=new x.ValidationError(s,t,e);return Error.stackTraceLimit=o,r},x.details=function(m){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];const i=[];for(const s of m){if(s instanceof Error){if(e.override!==!1)return{override:s};const o=s.toString();n.push(o),i.push({message:o,type:"override",context:{error:s}});continue}const t=s.toString();n.push(t),i.push({message:t,path:s.path.filter(o=>typeof o!="object"),type:s.code,context:s.local})}return n.length>1&&(n=[...new Set(n)]),{message:n.join(". "),details:i}},x.ValidationError=class extends Error{constructor(m,e,n){super(m),this._original=n,this.details=e}static isError(m){return m instanceof x.ValidationError}},x.ValidationError.prototype.isJoi=!0,x.ValidationError.prototype.name="ValidationError",x.ValidationError.prototype.annotate=l.error},8901:(E,x,v)=>{const l=v(375),b=v(8571),g=v(8160),m=v(6914),e={};x.type=function(n,i){const s=Object.getPrototypeOf(n),t=b(s),o=n._assign(Object.create(t)),r=Object.assign({},i);delete r.base,t._definition=r;const a=s._definition||{};r.messages=m.merge(a.messages,r.messages),r.properties=Object.assign({},a.properties,r.properties),o.type=r.type,r.flags=Object.assign({},a.flags,r.flags);const u=Object.assign({},a.terms);if(r.terms)for(const y in r.terms){const c=r.terms[y];l(o.$_terms[y]===void 0,"Invalid term override for",r.type,y),o.$_terms[y]=c.init,u[y]=c}r.terms=u,r.args||(r.args=a.args),r.prepare=e.prepare(r.prepare,a.prepare),r.coerce&&(typeof r.coerce=="function"&&(r.coerce={method:r.coerce}),r.coerce.from&&!Array.isArray(r.coerce.from)&&(r.coerce={method:r.coerce.method,from:[].concat(r.coerce.from)})),r.coerce=e.coerce(r.coerce,a.coerce),r.validate=e.validate(r.validate,a.validate);const d=Object.assign({},a.rules);if(r.rules)for(const y in r.rules){const c=r.rules[y];l(typeof c=="object","Invalid rule definition for",r.type,y);let p=c.method;if(p===void 0&&(p=function(){return this.$_addRule(y)}),p&&(l(!t[y],"Rule conflict in",r.type,y),t[y]=p),l(!d[y],"Rule conflict in",r.type,y),d[y]=c,c.alias){const h=[].concat(c.alias);for(const w of h)t[w]=c.method}c.args&&(c.argsByName=new Map,c.args=c.args.map(h=>(typeof h=="string"&&(h={name:h}),l(!c.argsByName.has(h.name),"Duplicated argument name",h.name),g.isSchema(h.assert)&&(h.assert=h.assert.strict().label(h.name)),c.argsByName.set(h.name,h),h)))}r.rules=d;const f=Object.assign({},a.modifiers);if(r.modifiers)for(const y in r.modifiers){l(!t[y],"Rule conflict in",r.type,y);const c=r.modifiers[y];l(typeof c=="function","Invalid modifier definition for",r.type,y);const p=function(h){return this.rule({[y]:h})};t[y]=p,f[y]=c}if(r.modifiers=f,r.overrides){t._super=s,o.$_super={};for(const y in r.overrides)l(s[y],"Cannot override missing",y),r.overrides[y][g.symbols.parent]=s[y],o.$_super[y]=s[y].bind(o);Object.assign(t,r.overrides)}r.cast=Object.assign({},a.cast,r.cast);const _=Object.assign({},a.manifest,r.manifest);return _.build=e.build(r.manifest&&r.manifest.build,a.manifest&&a.manifest.build),r.manifest=_,r.rebuild=e.rebuild(r.rebuild,a.rebuild),o},e.build=function(n,i){return n&&i?function(s,t){return i(n(s,t),t)}:n||i},e.coerce=function(n,i){return n&&i?{from:n.from&&i.from?[...new Set([...n.from,...i.from])]:null,method(s,t){let o;if((!i.from||i.from.includes(typeof s))&&(o=i.method(s,t),o)){if(o.errors||o.value===void 0)return o;s=o.value}if(!n.from||n.from.includes(typeof s)){const r=n.method(s,t);if(r)return r}return o}}:n||i},e.prepare=function(n,i){return n&&i?function(s,t){const o=n(s,t);if(o){if(o.errors||o.value===void 0)return o;s=o.value}return i(s,t)||o}:n||i},e.rebuild=function(n,i){return n&&i?function(s){i(s),n(s)}:n||i},e.validate=function(n,i){return n&&i?function(s,t){const o=i(s,t);if(o){if(o.errors&&(!Array.isArray(o.errors)||o.errors.length))return o;s=o.value}return n(s,t)||o}:n||i}},5107:(E,x,v)=>{const l=v(375),b=v(8571),g=v(8652),m=v(8160),e=v(3292),n=v(6354),i=v(8901),s=v(9708),t=v(6133),o=v(3328),r=v(1152);let a;const u={types:{alternatives:v(4946),any:v(8068),array:v(546),boolean:v(4937),date:v(7500),function:v(390),link:v(8785),number:v(3832),object:v(8966),string:v(7417),symbol:v(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const d={_types:new Set(Object.keys(u.types))};for(const f of d._types)d[f]=function(){for(var _=arguments.length,y=new Array(_),c=0;c<_;c++)y[c]=arguments[c];return l(!y.length||["alternatives","link","object"].includes(f),"The",f,"type does not allow arguments"),u.generate(this,u.types[f],y)};for(const f of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])d[f]=function(){return this.any()[f](...arguments)};Object.assign(d,u.methods);for(const f in u.aliases){const _=u.aliases[f];d[f]=d[_]}return d.x=d.expression,r.setup&&r.setup(d),d}};u.methods={ValidationError:n.ValidationError,version:m.version,cache:g.provider,assert(d,f){for(var _=arguments.length,y=new Array(_>2?_-2:0),c=2;c<_;c++)y[c-2]=arguments[c];u.assert(d,f,!0,y)},attempt(d,f){for(var _=arguments.length,y=new Array(_>2?_-2:0),c=2;c<_;c++)y[c-2]=arguments[c];return u.assert(d,f,!1,y)},build(d){return l(typeof s.build=="function","Manifest functionality disabled"),s.build(this,d)},checkPreferences(d){m.checkPreferences(d)},compile(d,f){return e.compile(this,d,f)},defaults(d){l(typeof d=="function","modifier must be a function");const f=Object.assign({},this);for(const _ of f._types){const y=d(f[_]());l(m.isSchema(y),"modifier must return a valid schema object"),f[_]=function(){for(var c=arguments.length,p=new Array(c),h=0;h<c;h++)p[h]=arguments[h];return u.generate(this,y,p)}}return f},expression(){for(var d=arguments.length,f=new Array(d),_=0;_<d;_++)f[_]=arguments[_];return new o(...f)},extend(){for(var d=arguments.length,f=new Array(d),_=0;_<d;_++)f[_]=arguments[_];m.verifyFlat(f,"extend"),a=a||v(3378),l(f.length,"You need to provide at least one extension"),this.assert(f,a.extensions);const y=Object.assign({},this);y._types=new Set(y._types);for(let c of f){typeof c=="function"&&(c=c(y)),this.assert(c,a.extension);const p=u.expandExtension(c,y);for(const h of p){l(y[h.type]===void 0||y._types.has(h.type),"Cannot override name",h.type);const w=h.base||this.any(),A=i.type(w,h);y._types.add(h.type),y[h.type]=function(){for(var C=arguments.length,R=new Array(C),j=0;j<C;j++)R[j]=arguments[j];return u.generate(this,A,R)}}}return y},isError:n.ValidationError.isError,isExpression:o.isTemplate,isRef:t.isRef,isSchema:m.isSchema,in(){return t.in(...arguments)},override:m.symbols.override,ref(){return t.create(...arguments)},types(){const d={};for(const f of this._types)d[f]=this[f]();for(const f in u.aliases)d[f]=this[f]();return d}},u.assert=function(d,f,_,y){const c=y[0]instanceof Error||typeof y[0]=="string"?y[0]:null,p=c!==null?y[1]:y[0],h=f.validate(d,m.preferences({errors:{stack:!0}},p||{}));let w=h.error;if(!w)return h.value;if(c instanceof Error)throw c;const A=_&&typeof w.annotate=="function"?w.annotate():w.message;throw w instanceof n.ValidationError==0&&(w=b(w)),w.message=c?`${c} ${A}`:A,w},u.generate=function(d,f,_){return l(d,"Must be invoked on a Joi instance."),f.$_root=d,f._definition.args&&_.length?f._definition.args(f,..._):f},u.expandExtension=function(d,f){if(typeof d.type=="string")return[d];const _=[];for(const y of f._types)if(d.type.test(y)){const c=Object.assign({},d);c.type=y,c.base=f[y](),_.push(c)}return _},E.exports=u.root()},6914:(E,x,v)=>{const l=v(375),b=v(8571),g=v(3328);x.compile=function(m,e){if(typeof m=="string")return l(!e,"Cannot set single message string"),new g(m);if(g.isTemplate(m))return l(!e,"Cannot set single message template"),m;l(typeof m=="object"&&!Array.isArray(m),"Invalid message options"),e=e?b(e):{};for(let n in m){const i=m[n];if(n==="root"||g.isTemplate(i)){e[n]=i;continue}if(typeof i=="string"){e[n]=new g(i);continue}l(typeof i=="object"&&!Array.isArray(i),"Invalid message for",n);const s=n;for(n in e[s]=e[s]||{},i){const t=i[n];n==="root"||g.isTemplate(t)?e[s][n]=t:(l(typeof t=="string","Invalid message for",n,"in",s),e[s][n]=new g(t))}}return e},x.decompile=function(m){const e={};for(let n in m){const i=m[n];if(n==="root"){e.root=i;continue}if(g.isTemplate(i)){e[n]=i.describe({compact:!0});continue}const s=n;for(n in e[s]={},i){const t=i[n];n!=="root"?e[s][n]=t.describe({compact:!0}):e[s].root=t}}return e},x.merge=function(m,e){if(!m)return x.compile(e);if(!e)return m;if(typeof e=="string")return new g(e);if(g.isTemplate(e))return e;const n=b(m);for(let i in e){const s=e[i];if(i==="root"||g.isTemplate(s)){n[i]=s;continue}if(typeof s=="string"){n[i]=new g(s);continue}l(typeof s=="object"&&!Array.isArray(s),"Invalid message for",i);const t=i;for(i in n[t]=n[t]||{},s){const o=s[i];i==="root"||g.isTemplate(o)?n[t][i]=o:(l(typeof o=="string","Invalid message for",i,"in",t),n[t][i]=new g(o))}}return n}},2294:(E,x,v)=>{const l=v(375),b=v(8160),g=v(6133),m={};x.Ids=m.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new m.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[n,i]of e._byId.entries())l(!this._byKey.has(n),"Schema id conflicts with existing key:",n),this._byId.set(n,i);for(const[n,i]of e._byKey.entries())l(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,i)}fork(e,n,i){const s=this._collect(e);s.push({schema:i});const t=s.shift();let o={id:t.id,schema:n(t.schema)};l(b.isSchema(o.schema),"adjuster function failed to return a joi schema type");for(const r of s)o={id:r.id,schema:m.fork(r.schema,o.id,o.schema)};return o.schema}labels(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e[0],s=this._get(i);if(!s)return[...n,...e].join(".");const t=e.slice(1);return n=[...n,s.schema._flags.label||i],t.length?s.schema._ids.labels(t,n):n.join(".")}reach(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e[0],s=this._get(i);l(s,"Schema does not contain path",[...n,...e].join("."));const t=e.slice(1);return t.length?s.schema._ids.reach(t,[...n,i]):s.schema}register(e){let{key:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||!b.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const i=e._flags.id;if(i){const s=this._byId.get(i);l(!s||s.schema===e,"Cannot add different schemas with the same id:",i),l(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}n&&(l(!this._byKey.has(n),"Schema already contains key:",n),l(!this._byId.has(n),"Schema key conflicts with existing id:",n),this._byKey.set(n,{schema:e,id:n}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const s=e[0],t=this._get(s);l(t,"Schema does not contain path",[...n,...e].join(".")),i=[t,...i];const o=e.slice(1);return o.length?t.schema._ids._collect(o,[...n,s],i):i}_get(e){return this._byId.get(e)||this._byKey.get(e)}},m.fork=function(e,n,i){const s=x.schema(e,{each:(t,o)=>{let{key:r}=o;if(n===(t._flags.id||r))return i},ref:!1});return s?s.$_mutateRebuild():e},x.schema=function(e,n){let i;for(const s in e._flags){if(s[0]==="_")continue;const t=m.scan(e._flags[s],{source:"flags",name:s},n);t!==void 0&&(i=i||e.clone(),i._flags[s]=t)}for(let s=0;s<e._rules.length;++s){const t=e._rules[s],o=m.scan(t.args,{source:"rules",name:t.name},n);if(o!==void 0){i=i||e.clone();const r=Object.assign({},t);r.args=o,i._rules[s]=r,i._singleRules.get(t.name)===t&&i._singleRules.set(t.name,r)}}for(const s in e.$_terms){if(s[0]==="_")continue;const t=m.scan(e.$_terms[s],{source:"terms",name:s},n);t!==void 0&&(i=i||e.clone(),i.$_terms[s]=t)}return i},m.scan=function(e,n,i,s,t){const o=s||[];if(e===null||typeof e!="object")return;let r;if(Array.isArray(e)){for(let a=0;a<e.length;++a){const u=n.source==="terms"&&n.name==="keys"&&e[a].key,d=m.scan(e[a],n,i,[a,...o],u);d!==void 0&&(r=r||e.slice(),r[a]=d)}return r}if(i.schema!==!1&&b.isSchema(e)||i.ref!==!1&&g.isRef(e)){const a=i.each(e,{...n,path:o,key:t});return a===e?void 0:a}for(const a in e){if(a[0]==="_")continue;const u=m.scan(e[a],n,i,[a,...o],t);u!==void 0&&(r=r||Object.assign({},e),r[a]=u)}return r}},6133:(E,x,v)=>{const l=v(375),b=v(8571),g=v(9621),m=v(8160);let e;const n={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};x.create=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(typeof i=="string","Invalid reference key:",i),m.assertOptions(s,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),l(!s.prefix||typeof s.prefix=="object","options.prefix must be of type object");const t=Object.assign({},n.defaults,s);delete t.prefix;const o=t.separator,r=n.context(i,o,s.prefix);if(t.type=r.type,i=r.key,t.type==="value")if(r.root&&(l(!o||i[0]!==o,"Cannot specify relative path with root prefix"),t.ancestor="root",i||(i=null)),o&&o===i)i=null,t.ancestor=0;else if(t.ancestor!==void 0)l(!o||!i||i[0]!==o,"Cannot combine prefix with ancestor option");else{const[a,u]=n.ancestor(i,o);u&&(i=i.slice(u))===""&&(i=null),t.ancestor=a}return t.path=o?i===null?[]:i.split(o):[i],new n.Ref(t)},x.in=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x.create(i,{...s,in:!0})},x.isRef=function(i){return!!i&&!!i[m.symbols.ref]},n.Ref=class{constructor(i){l(typeof i=="object","Invalid reference construction"),m.assertOptions(i,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),l([!1,void 0].includes(i.separator)||typeof i.separator=="string"&&i.separator.length===1,"Invalid separator"),l(!i.adjust||typeof i.adjust=="function","options.adjust must be a function"),l(!i.map||Array.isArray(i.map),"options.map must be an array"),l(!i.map||!i.adjust,"Cannot set both map and adjust options"),Object.assign(this,n.defaults,i),l(this.type==="value"||this.ancestor===void 0,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(i,s,t,o){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return l(!this.in||r.in,"Invalid in() reference usage"),this.type==="global"?this._resolve(t.context,s,r):this.type==="local"?this._resolve(o,s,r):this.ancestor?this.ancestor==="root"?this._resolve(s.ancestors[s.ancestors.length-1],s,r):(l(this.ancestor<=s.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(s.ancestors[this.ancestor-1],s,r)):this._resolve(i,s,r)}_resolve(i,s,t){let o;if(this.type==="value"&&s.mainstay.shadow&&t.shadow!==!1&&(o=s.mainstay.shadow.get(this.absolute(s))),o===void 0&&(o=g(i,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(o=this.adjust(o)),this.map){const r=this.map.get(o);r!==void 0&&(o=r)}return s.mainstay&&s.mainstay.tracer.resolve(s,this,o),o}toString(){return this.display}absolute(i){return[...i.path.slice(0,-this.ancestor),...this.path]}clone(){return new n.Ref(this)}describe(){const i={path:this.path};this.type!=="value"&&(i.type=this.type),this.separator!=="."&&(i.separator=this.separator),this.type==="value"&&this.ancestor!==1&&(i.ancestor=this.ancestor),this.map&&(i.map=[...this.map]);for(const s of["adjust","iterables","render"])this[s]!==null&&this[s]!==void 0&&(i[s]=this[s]);return this.in!==!1&&(i.in=!0),{ref:i}}updateDisplay(){const i=this.key!==null?this.key:"";if(this.type!=="value")return void(this.display=`ref:${this.type}:${i}`);if(!this.separator)return void(this.display=`ref:${i}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${i}`);if(this.ancestor==="root")return void(this.display=`ref:root:${i}`);if(this.ancestor===1)return void(this.display=`ref:${i||".."}`);const s=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${s}${i||""}`}},n.Ref.prototype[m.symbols.ref]=!0,x.build=function(i){return(i=Object.assign({},n.defaults,i)).type==="value"&&i.ancestor===void 0&&(i.ancestor=1),new n.Ref(i)},n.context=function(i,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i=i.trim(),t){const o=t.global===void 0?"$":t.global;if(o!==s&&i.startsWith(o))return{key:i.slice(o.length),type:"global"};const r=t.local===void 0?"#":t.local;if(r!==s&&i.startsWith(r))return{key:i.slice(r.length),type:"local"};const a=t.root===void 0?"/":t.root;if(a!==s&&i.startsWith(a))return{key:i.slice(a.length),type:"value",root:!0}}return{key:i,type:"value"}},n.ancestor=function(i,s){if(!s)return[1,0];if(i[0]!==s)return[1,0];if(i[1]!==s)return[0,1];let t=2;for(;i[t]===s;)++t;return[t-1,t]},x.toSibling=0,x.toParent=1,x.Manager=class{constructor(){this.refs=[]}register(i,s){if(i)if(s=s===void 0?x.toParent:s,Array.isArray(i))for(const t of i)this.register(t,s);else if(m.isSchema(i))for(const t of i._refs.refs)t.ancestor-s>=0&&this.refs.push({ancestor:t.ancestor-s,root:t.root});else x.isRef(i)&&i.type==="value"&&i.ancestor-s>=0&&this.refs.push({ancestor:i.ancestor-s,root:i.root}),e=e||v(3328),e.isTemplate(i)&&this.register(i.refs(),s)}get length(){return this.refs.length}clone(){const i=new x.Manager;return i.refs=b(this.refs),i}reset(){this.refs=[]}roots(){return this.refs.filter(i=>!i.ancestor).map(i=>i.root)}}},3378:(E,x,v)=>{const l=v(5107),b={};b.wrap=l.string().min(1).max(2).allow(!1),x.preferences=l.object({allowUnknown:l.boolean(),abortEarly:l.boolean(),artifacts:l.boolean(),cache:l.boolean(),context:l.object(),convert:l.boolean(),dateFormat:l.valid("date","iso","string","time","utc"),debug:l.boolean(),errors:{escapeHtml:l.boolean(),label:l.valid("path","key",!1),language:[l.string(),l.object().ref()],render:l.boolean(),stack:l.boolean(),wrap:{label:b.wrap,array:b.wrap,string:b.wrap}},externals:l.boolean(),messages:l.object(),noDefaults:l.boolean(),nonEnumerables:l.boolean(),presence:l.valid("required","optional","forbidden"),skipFunctions:l.boolean(),stripUnknown:l.object({arrays:l.boolean(),objects:l.boolean()}).or("arrays","objects").allow(!0,!1),warnings:l.boolean()}).strict(),b.nameRx=/^[a-zA-Z0-9]\w*$/,b.rule=l.object({alias:l.array().items(l.string().pattern(b.nameRx)).single(),args:l.array().items(l.string(),l.object({name:l.string().pattern(b.nameRx).required(),ref:l.boolean(),assert:l.alternatives([l.function(),l.object().schema()]).conditional("ref",{is:!0,then:l.required()}),normalize:l.function(),message:l.string().when("assert",{is:l.function(),then:l.required()})})),convert:l.boolean(),manifest:l.boolean(),method:l.function().allow(!1),multi:l.boolean(),validate:l.function()}),x.extension=l.object({type:l.alternatives([l.string(),l.object().regex()]).required(),args:l.function(),cast:l.object().pattern(b.nameRx,l.object({from:l.function().maxArity(1).required(),to:l.function().minArity(1).maxArity(2).required()})),base:l.object().schema().when("type",{is:l.object().regex(),then:l.forbidden()}),coerce:[l.function().maxArity(3),l.object({method:l.function().maxArity(3).required(),from:l.array().items(l.string()).single()})],flags:l.object().pattern(b.nameRx,l.object({setter:l.string(),default:l.any()})),manifest:{build:l.function().arity(2)},messages:[l.object(),l.string()],modifiers:l.object().pattern(b.nameRx,l.function().minArity(1).maxArity(2)),overrides:l.object().pattern(b.nameRx,l.function()),prepare:l.function().maxArity(3),rebuild:l.function().arity(1),rules:l.object().pattern(b.nameRx,b.rule),terms:l.object().pattern(b.nameRx,l.object({init:l.array().allow(null).required(),manifest:l.object().pattern(/.+/,[l.valid("schema","single"),l.object({mapped:l.object({from:l.string().required(),to:l.string().required()}).required()})])})),validate:l.function().maxArity(3)}).strict(),x.extensions=l.array().items(l.object(),l.function().arity(1)).strict(),b.desc={buffer:l.object({buffer:l.string()}),func:l.object({function:l.function().required(),options:{literal:!0}}),override:l.object({override:!0}),ref:l.object({ref:l.object({type:l.valid("value","global","local"),path:l.array().required(),separator:l.string().length(1).allow(!1),ancestor:l.number().min(0).integer().allow("root"),map:l.array().items(l.array().length(2)).min(1),adjust:l.function(),iterables:l.boolean(),in:l.boolean(),render:l.boolean()}).required()}),regex:l.object({regex:l.string().min(3)}),special:l.object({special:l.valid("deep").required()}),template:l.object({template:l.string().required(),options:l.object()}),value:l.object({value:l.alternatives([l.object(),l.array()]).required()})},b.desc.entity=l.alternatives([l.array().items(l.link("...")),l.boolean(),l.function(),l.number(),l.string(),b.desc.buffer,b.desc.func,b.desc.ref,b.desc.regex,b.desc.special,b.desc.template,b.desc.value,l.link("/")]),b.desc.values=l.array().items(null,l.boolean(),l.function(),l.number().allow(1/0,-1/0),l.string().allow(""),l.symbol(),b.desc.buffer,b.desc.func,b.desc.override,b.desc.ref,b.desc.regex,b.desc.template,b.desc.value),b.desc.messages=l.object().pattern(/.+/,[l.string(),b.desc.template,l.object().pattern(/.+/,[l.string(),b.desc.template])]),x.description=l.object({type:l.string().required(),flags:l.object({cast:l.string(),default:l.any(),description:l.string(),empty:l.link("/"),failover:b.desc.entity,id:l.string(),label:l.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:l.boolean(),unit:l.string()}).unknown(),preferences:{allowUnknown:l.boolean(),abortEarly:l.boolean(),artifacts:l.boolean(),cache:l.boolean(),convert:l.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:l.boolean(),label:["path","key"],language:[l.string(),b.desc.ref],wrap:{label:b.wrap,array:b.wrap}},externals:l.boolean(),messages:b.desc.messages,noDefaults:l.boolean(),nonEnumerables:l.boolean(),presence:["required","optional","forbidden"],skipFunctions:l.boolean(),stripUnknown:l.object({arrays:l.boolean(),objects:l.boolean()}).or("arrays","objects").allow(!0,!1),warnings:l.boolean()},allow:b.desc.values,invalid:b.desc.values,rules:l.array().min(1).items({name:l.string().required(),args:l.object().min(1),keep:l.boolean(),message:[l.string(),b.desc.messages],warn:l.boolean()}),keys:l.object().pattern(/.*/,l.link("/")),link:b.desc.ref}).pattern(/^[a-z]\w*$/,l.any())},493:(E,x,v)=>{const l=v(8571),b=v(9621),g=v(8160),m={value:Symbol("value")};E.exports=m.State=class{constructor(e,n,i){this.path=e,this.ancestors=n,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}localize(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const s=new m.State(e,n,this);return i&&s.schemas&&(s.schemas=[m.schemas(i),...s.schemas]),s}nest(e,n){const i=new m.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[m.schemas(e),...i.schemas],i.debug=n,i}shadow(e,n){this.mainstay.shadow=this.mainstay.shadow||new m.Shadow,this.mainstay.shadow.set(this.path,e,n)}snapshot(){this.mainstay.shadow&&(this._snapshot=l(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},m.schemas=function(e){return g.isSchema(e)?{schema:e}:e},m.Shadow=class{constructor(){this._values=null}set(e,n,i){if(!e.length||i==="strip"&&typeof e[e.length-1]=="number")return;this._values=this._values||new Map;let s=this._values;for(let t=0;t<e.length;++t){const o=e[t];let r=s.get(o);r||(r=new Map,s.set(o,r)),s=r}s[m.value]=n}get(e){const n=this.node(e);if(n)return n[m.value]}node(e){if(this._values)return b(this._values,e,{iterables:!0})}override(e,n){if(!this._values)return;const i=e.slice(0,-1),s=e[e.length-1],t=b(this._values,i,{iterables:!0});n?t.set(s,n):t&&t.delete(s)}}},3328:(E,x,v)=>{const l=v(375),b=v(8571),g=v(5277),m=v(1447),e=v(8160),n=v(6354),i=v(6133),s={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};E.exports=s.Template=class{constructor(t,o){if(l(typeof t=="string","Template source must be a string"),l(!t.includes("\0")&&!t.includes(""),"Template source cannot contain reserved control characters"),this.source=t,this.rendered=t,this._template=null,o){const{functions:r,...a}=o;this._settings=Object.keys(a).length?b(a):void 0,this._functions=r,this._functions&&(l(Object.keys(this._functions).every(u=>typeof u=="string"),"Functions keys must be strings"),l(Object.values(this._functions).every(u=>typeof u=="function"),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const t=s.encode(this.source),o=s.split(t);let r=!1;const a=[],u=o.shift();u&&a.push(u);for(const d of o){const f=d[0]!=="{",_=f?"}":"}}",y=d.indexOf(_);if(y===-1||d[1]==="{"){a.push(`{${s.decode(d)}`);continue}let c=d.slice(f?0:1,y);const p=c[0]===":";p&&(c=c.slice(1));const h=this._ref(s.decode(c),{raw:f,wrapped:p});a.push(h),typeof h!="string"&&(r=!0);const w=d.slice(y+_.length);w&&a.push(s.decode(w))}r?this._template=a:this.rendered=a.join("")}static date(t,o){return s.dateFormat[o.dateFormat].call(t)}describe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this._settings&&t.compact)return this.source;const o={template:this.source};return this._settings&&(o.options=this._settings),this._functions&&(o.functions=this._functions),o}static build(t){return new s.Template(t.template,t.options||t.functions?{...t.options,functions:t.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(t){return!!t&&!!t[e.symbols.template]}refs(){if(!this._template)return;const t=[];for(const o of this._template)typeof o!="string"&&t.push(...o.refs);return t}resolve(t,o,r,a){return this._template&&this._template.length===1?this._part(this._template[0],t,o,r,a,{}):this.render(t,o,r,a)}_part(t){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return t.ref?t.ref.resolve(...r):t.formula.evaluate(r)}render(t,o,r,a){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(!this.isDynamic())return this.rendered;const d=[];for(const f of this._template)if(typeof f=="string")d.push(f);else{const _=this._part(f,t,o,r,a,u),y=s.stringify(_,t,o,r,a,u);if(y!==void 0){const c=f.raw||(u.errors&&u.errors.escapeHtml)===!1?y:g(y);d.push(s.wrap(c,f.wrapped&&r.errors.wrap.label))}}return d.join("")}_ref(t,o){let{raw:r,wrapped:a}=o;const u=[],d=_=>{const y=i.create(_,this._settings);return u.push(y),c=>{const p=y.resolve(...c);return p!==void 0?p:null}};try{const _=this._functions?{...s.functions,...this._functions}:s.functions;var f=new m.Parser(t,{reference:d,functions:_,constants:s.constants})}catch(_){throw _.message=`Invalid template variable "${t}" fails due to: ${_.message}`,_}if(f.single){if(f.single.type==="reference"){const _=u[0];return{ref:_,raw:r,refs:u,wrapped:a||_.type==="local"&&_.key==="label"}}return s.stringify(f.single.value)}return{formula:f,raw:r,refs:u}}toString(){return this.source}},s.Template.prototype[e.symbols.template]=!0,s.Template.prototype.isImmutable=!0,s.encode=function(t){return t.replace(/\\(\{+)/g,(o,r)=>s.opens.slice(0,r.length)).replace(/\\(\}+)/g,(o,r)=>s.closes.slice(0,r.length))},s.decode=function(t){return t.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},s.split=function(t){const o=[];let r="";for(let a=0;a<t.length;++a){const u=t[a];if(u==="{"){let d="";for(;a+1<t.length&&t[a+1]==="{";)d+="{",++a;o.push(r),r=d}else r+=u}return o.push(r),o},s.wrap=function(t,o){return o?o.length===1?`${o}${t}${o}`:`${o[0]}${t}${o[1]}`:t},s.stringify=function(t,o,r,a,u){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};const f=typeof t,_=a&&a.errors&&a.errors.wrap||{};let y=!1;if(i.isRef(t)&&t.render&&(y=t.in,t=t.resolve(o,r,a,u,{in:t.in,...d})),t===null)return"null";if(f==="string")return s.wrap(t,d.arrayItems&&_.string);if(f==="number"||f==="function"||f==="symbol")return t.toString();if(f!=="object")return JSON.stringify(t);if(t instanceof Date)return s.Template.date(t,a);if(t instanceof Map){const p=[];for(const[h,w]of t.entries())p.push(`${h.toString()} -> ${w.toString()}`);t=p}if(!Array.isArray(t))return t.toString();const c=[];for(const p of t)c.push(s.stringify(p,o,r,a,u,{arrayItems:!0,...d}));return s.wrap(c.join(", "),!y&&_.array)},s.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},s.functions={if:(t,o,r)=>t?o:r,length:t=>typeof t=="string"?t.length:t&&typeof t=="object"?Array.isArray(t)?t.length:Object.keys(t).length:null,msg(t){const[o,r,a,u,d]=this,f=d.messages;if(!f)return"";const _=n.template(o,f[0],t,r,a)||n.template(o,f[1],t,r,a);return _?_.render(o,r,a,u,d):""},number:t=>typeof t=="number"?t:typeof t=="string"?parseFloat(t):typeof t=="boolean"?t?1:0:t instanceof Date?t.getTime():null}},4946:(E,x,v)=>{const l=v(375),b=v(1687),g=v(8068),m=v(8160),e=v(3292),n=v(6354),i=v(6133),s={};E.exports=g.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:i.toSibling}},args(t){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return r.length===1&&Array.isArray(r[0])?t.try(...r[0]):t.try(...r)},validate(t,o){const{schema:r,error:a,state:u,prefs:d}=o;if(r._flags.match){const _=[],y=[];for(let p=0;p<r.$_terms.matches.length;++p){const h=r.$_terms.matches[p],w=u.nest(h.schema,`match.${p}`);w.snapshot();const A=h.schema.$_validate(t,w,d);A.errors?(y.push(A.errors),w.restore()):(_.push(A.value),w.commit())}if(_.length===0)return{errors:a("alternatives.any",{details:y.map(p=>n.details(p,{override:!1}))})};if(r._flags.match==="one")return _.length===1?{value:_[0]}:{errors:a("alternatives.one")};if(_.length!==r.$_terms.matches.length)return{errors:a("alternatives.all",{details:y.map(p=>n.details(p,{override:!1}))})};const c=p=>p.$_terms.matches.some(h=>h.schema.type==="object"||h.schema.type==="alternatives"&&c(h.schema));return c(r)?{value:_.reduce((p,h)=>b(p,h,{mergeArrays:!1}))}:{value:_[_.length-1]}}const f=[];for(let _=0;_<r.$_terms.matches.length;++_){const y=r.$_terms.matches[_];if(y.schema){const h=u.nest(y.schema,`match.${_}`);h.snapshot();const w=y.schema.$_validate(t,h,d);if(!w.errors)return h.commit(),w;h.restore(),f.push({schema:y.schema,reports:w.errors});continue}const c=y.ref?y.ref.resolve(t,u,d):t,p=y.is?[y]:y.switch;for(let h=0;h<p.length;++h){const w=p[h],{is:A,then:C,otherwise:R}=w,j=`match.${_}${y.switch?"."+h:""}`;if(A.$_match(c,u.nest(A,`${j}.is`),d)){if(C)return C.$_validate(t,u.nest(C,`${j}.then`),d)}else if(R)return R.$_validate(t,u.nest(R,`${j}.otherwise`),d)}}return s.errors(f,o)},rules:{conditional:{method(t,o){l(!this._flags._endedSwitch,"Unreachable condition"),l(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),l(o.break===void 0,"Cannot use break option with alternatives conditional");const r=this.clone(),a=e.when(r,t,o),u=a.is?[a]:a.switch;for(const d of u)if(d.then&&d.otherwise){r.$_setFlag("_endedSwitch",!0,{clone:!1});break}return r.$_terms.matches.push(a),r.$_mutateRebuild()}},match:{method(t){if(l(["any","one","all"].includes(t),"Invalid alternatives match mode",t),t!=="any")for(const o of this.$_terms.matches)l(o.schema,"Cannot combine match mode",t,"with conditional rules");return this.$_setFlag("match",t)}},try:{method(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];l(o.length,"Missing alternative schemas"),m.verifyFlat(o,"try"),l(!this._flags._endedSwitch,"Unreachable condition");const a=this.clone();for(const u of o)a.$_terms.matches.push({schema:a.$_compile(u)});return a.$_mutateRebuild()}}},overrides:{label(t){return this.$_parent("label",t).$_modify({each:(o,r)=>r.path[0]!=="is"?o.label(t):void 0,ref:!1})}},rebuild(t){t.$_modify({each:o=>{m.isSchema(o)&&o.type==="array"&&t.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(t,o){if(o.matches)for(const r of o.matches){const{schema:a,ref:u,is:d,not:f,then:_,otherwise:y}=r;t=a?t.try(a):u?t.conditional(u,{is:d,then:_,not:f,otherwise:y,switch:r.switch}):t.conditional(d,{then:_,otherwise:y})}return t}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),s.errors=function(t,o){let{error:r,state:a}=o;if(!t.length)return{errors:r("alternatives.any")};if(t.length===1)return{errors:t[0].reports};const u=new Set,d=[];for(const{reports:f,schema:_}of t){if(f.length>1)return s.unmatched(t,r);const y=f[0];if(y instanceof n.Report==0)return s.unmatched(t,r);if(y.state.path.length!==a.path.length){d.push({type:_.type,report:y});continue}if(y.code==="any.only"){for(const h of y.local.valids)u.add(h);continue}const[c,p]=y.code.split(".");p==="base"?u.add(c):d.push({type:_.type,report:y})}return d.length?d.length===1?{errors:d[0].report}:s.unmatched(t,r):{errors:r("alternatives.types",{types:[...u]})}},s.unmatched=function(t,o){const r=[];for(const a of t)r.push(...a.reports);return{errors:o("alternatives.match",n.details(r,{override:!1}))}}},8068:(E,x,v)=>{const l=v(375),b=v(7629),g=v(8160),m=v(6914);E.exports=b.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,n){return l(typeof e=="function","Method must be a function"),l(n===void 0||n&&typeof n=="string","Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:n}})},validate(e,n,i){let{method:s}=i;try{return s(e,n)}catch(t){return n.error("any.custom",{error:t})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){l(g.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const n=this.clone();return n.$_terms.shared=n.$_terms.shared||[],n.$_terms.shared.push(e),n.$_mutateRegister(e),n}},warning:{method(e,n){return l(e&&typeof e=="string","Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:n},warn:!0})},validate(e,n,i){let{code:s,local:t}=i;return n.error(s,t)},args:["code","local"],multi:!0}},modifiers:{keep(e){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];e.keep=n},message(e,n){e.message=m.compile(n)},warn(e){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];e.warn=n}},manifest:{build(e,n){for(const i in n){const s=n[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const t of s)e=e[i.slice(0,-1)](t);else if(i!=="alterations")if(i!=="whens"){if(i==="shared")for(const t of s)e=e.shared(t)}else for(const t of s){const{ref:o,is:r,not:a,then:u,otherwise:d,concat:f}=t;e=f?e.concat(f):o?e.when(o,{is:r,not:a,then:u,otherwise:d,switch:t.switch,break:t.break}):e.when(r,{then:u,otherwise:d,break:t.break})}else{const t={};for(const{target:o,adjuster:r}of s)t[o]=r;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(E,x,v)=>{const l=v(375),b=v(9474),g=v(9621),m=v(8068),e=v(8160),n=v(3292),i={};E.exports=m.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(s,t){let{schema:o,state:r,prefs:a}=t;if(!Array.isArray(s))return;const u=o.$_getRule("sort");return u?i.sort(o,s,u.args.options,r,a):void 0}},validate(s,t){let{schema:o,error:r}=t;if(!Array.isArray(s)){if(o._flags.single){const a=[s];return a[e.symbols.arraySingle]=!0,{value:a}}return{errors:r("array.base")}}if(o.$_getRule("items")||o.$_terms.externals)return{value:s.slice()}},rules:{has:{method(s){s=this.$_compile(s,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:s}});return t.$_mutateRegister(s),t},validate(s,t,o){let{state:r,prefs:a,error:u}=t,{schema:d}=o;const f=[s,...r.ancestors];for(let y=0;y<s.length;++y){const c=r.localize([...r.path,y],f,d);if(d.$_match(s[y],c,a))return s}const _=d._flags.label;return _?u("array.hasKnown",{patternLabel:_}):u("array.hasUnknown",null)},multi:!0},items:{method(){for(var s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];e.verifyFlat(t,"items");const r=this.$_addRule("items");for(let a=0;a<t.length;++a){const u=e.tryWithPath(()=>this.$_compile(t[a]),a,{append:!0});r.$_terms.items.push(u)}return r.$_mutateRebuild()},validate(s,t){let{schema:o,error:r,state:a,prefs:u,errorsArray:d}=t;const f=o.$_terms._requireds.slice(),_=o.$_terms.ordered.slice(),y=[...o.$_terms._inclusions,...f],c=!s[e.symbols.arraySingle];delete s[e.symbols.arraySingle];const p=d();let h=s.length;for(let w=0;w<h;++w){const A=s[w];let C=!1,R=!1;const j=c?w:new Number(w),B=[...a.path,j];if(!o._flags.sparse&&A===void 0){if(p.push(r("array.sparse",{key:j,path:B,pos:w,value:void 0},a.localize(B))),u.abortEarly)return p;_.shift();continue}const O=[s,...a.ancestors];for(const I of o.$_terms._exclusions)if(I.$_match(A,a.localize(B,O,I),u,{presence:"ignore"})){if(p.push(r("array.excludes",{pos:w,value:A},a.localize(B))),u.abortEarly)return p;C=!0,_.shift();break}if(C)continue;if(o.$_terms.ordered.length){if(_.length){const I=_.shift(),M=I.$_validate(A,a.localize(B,O,I),u);if(M.errors){if(p.push(...M.errors),u.abortEarly)return p}else if(I._flags.result==="strip")i.fastSplice(s,w),--w,--h;else{if(!o._flags.sparse&&M.value===void 0){if(p.push(r("array.sparse",{key:j,path:B,pos:w,value:void 0},a.localize(B))),u.abortEarly)return p;continue}s[w]=M.value}continue}if(!o.$_terms.items.length){if(p.push(r("array.orderedLength",{pos:w,limit:o.$_terms.ordered.length})),u.abortEarly)return p;break}}const L=[];let N=f.length;for(let I=0;I<N;++I){const M=a.localize(B,O,f[I]);M.snapshot();const z=f[I].$_validate(A,M,u);if(L[I]=z,!z.errors){if(M.commit(),s[w]=z.value,R=!0,i.fastSplice(f,I),--I,--N,!o._flags.sparse&&z.value===void 0&&(p.push(r("array.sparse",{key:j,path:B,pos:w,value:void 0},a.localize(B))),u.abortEarly))return p;break}M.restore()}if(R)continue;const U=u.stripUnknown&&!!u.stripUnknown.arrays||!1;N=y.length;for(const I of y){let M;const z=f.indexOf(I);if(z!==-1)M=L[z];else{const P=a.localize(B,O,I);if(P.snapshot(),M=I.$_validate(A,P,u),!M.errors){P.commit(),I._flags.result==="strip"?(i.fastSplice(s,w),--w,--h):o._flags.sparse||M.value!==void 0?s[w]=M.value:(p.push(r("array.sparse",{key:j,path:B,pos:w,value:void 0},a.localize(B))),C=!0),R=!0;break}P.restore()}if(N===1){if(U){i.fastSplice(s,w),--w,--h,R=!0;break}if(p.push(...M.errors),u.abortEarly)return p;C=!0;break}}if(!C&&(o.$_terms._inclusions.length||o.$_terms._requireds.length)&&!R){if(U){i.fastSplice(s,w),--w,--h;continue}if(p.push(r("array.includes",{pos:w,value:A},a.localize(B))),u.abortEarly)return p}}return f.length&&i.fillMissedErrors(o,p,f,s,a,u),_.length&&(i.fillOrderedErrors(o,p,_,s,a,u),p.length||i.fillDefault(_,s,a,u)),p.length?p:s},priority:!0,manifest:!1},length:{method(s){return this.$_addRule({name:"length",args:{limit:s},operator:"="})},validate(s,t,o,r){let{limit:a}=o,{name:u,operator:d,args:f}=r;return e.compare(s.length,a,d)?s:t.error("array."+u,{limit:f.limit,value:s})},args:[{name:"limit",ref:!0,assert:e.limit,message:"must be a positive integer"}]},max:{method(s){return this.$_addRule({name:"max",method:"length",args:{limit:s},operator:"<="})}},min:{method(s){return this.$_addRule({name:"min",method:"length",args:{limit:s},operator:">="})}},ordered:{method(){for(var s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];e.verifyFlat(t,"ordered");const r=this.$_addRule("items");for(let a=0;a<t.length;++a){const u=e.tryWithPath(()=>this.$_compile(t[a]),a,{append:!0});i.validateSingle(u,r),r.$_mutateRegister(u),r.$_terms.ordered.push(u)}return r.$_mutateRebuild()}},single:{method(s){const t=s===void 0||!!s;return l(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.assertOptions(s,["by","order"]);const t={order:s.order||"ascending"};return s.by&&(t.by=n.ref(s.by,{ancestor:0}),l(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(s,t,o){let{error:r,state:a,prefs:u,schema:d}=t,{options:f}=o;const{value:_,errors:y}=i.sort(d,s,f,a,u);if(y)return y;for(let c=0;c<s.length;++c)if(s[c]!==_[c])return r("array.sort",{order:f.order,by:f.by?f.by.key:"value"});return s},convert:!0},sparse:{method(s){const t=s===void 0||!!s;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(!s||typeof s=="function"||typeof s=="string","comparator must be a function or a string"),e.assertOptions(t,["ignoreUndefined","separator"]);const o={name:"unique",args:{options:t,comparator:s}};if(s)if(typeof s=="string"){const r=e.default(t.separator,".");o.path=r?s.split(r):[s]}else o.comparator=s;return this.$_addRule(o)},validate(s,t,o,r){let{state:a,error:u,schema:d}=t,{comparator:f,options:_}=o,{comparator:y,path:c}=r;const p={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},h=y||b,w=_.ignoreUndefined;for(let A=0;A<s.length;++A){const C=c?g(s[A],c):s[A],R=y?p.custom:p[typeof C];if(l(R,"Failed to find unique map container for type",typeof C),R instanceof Map){const j=R.entries();let B;for(;!(B=j.next()).done;)if(h(B.value[0],C)){const O=a.localize([...a.path,A],[s,...a.ancestors]),L={pos:A,value:s[A],dupePos:B.value[1],dupeValue:s[B.value[1]]};return c&&(L.path=f),u("array.unique",L,O)}R.set(C,A)}else{if((!w||C!==void 0)&&R[C]!==void 0){const j={pos:A,value:s[A],dupePos:R[C],dupeValue:s[R[C]]};return c&&(j.path=f),u("array.unique",j,a.localize([...a.path,A],[s,...a.ancestors]))}R[C]=A}}return s},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(s,t)=>new Set(s)}},rebuild(s){s.$_terms._inclusions=[],s.$_terms._exclusions=[],s.$_terms._requireds=[];for(const t of s.$_terms.items)i.validateSingle(t,s),t._flags.presence==="required"?s.$_terms._requireds.push(t):t._flags.presence==="forbidden"?s.$_terms._exclusions.push(t):s.$_terms._inclusions.push(t);for(const t of s.$_terms.ordered)i.validateSingle(t,s)},manifest:{build:(s,t)=>(t.items&&(s=s.items(...t.items)),t.ordered&&(s=s.ordered(...t.ordered)),s)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),i.fillMissedErrors=function(s,t,o,r,a,u){const d=[];let f=0;for(const _ of o){const y=_._flags.label;y?d.push(y):++f}d.length?f?t.push(s.$_createError("array.includesRequiredBoth",r,{knownMisses:d,unknownMisses:f},a,u)):t.push(s.$_createError("array.includesRequiredKnowns",r,{knownMisses:d},a,u)):t.push(s.$_createError("array.includesRequiredUnknowns",r,{unknownMisses:f},a,u))},i.fillOrderedErrors=function(s,t,o,r,a,u){const d=[];for(const f of o)f._flags.presence==="required"&&d.push(f);d.length&&i.fillMissedErrors(s,t,d,r,a,u)},i.fillDefault=function(s,t,o,r){const a=[];let u=!0;for(let d=s.length-1;d>=0;--d){const f=s[d],_=[t,...o.ancestors],y=f.$_validate(void 0,o.localize(o.path,_,f),r).value;if(u){if(y===void 0)continue;u=!1}a.unshift(y)}a.length&&t.push(...a)},i.fastSplice=function(s,t){let o=t;for(;o<s.length;)s[o++]=s[o];--s.length},i.validateSingle=function(s,t){(s.type==="array"||s._flags._arrayItems)&&(l(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},i.sort=function(s,t,o,r,a){const u=o.order==="ascending"?1:-1,d=-1*u,f=u,_=(y,c)=>{let p=i.compare(y,c,d,f);if(p!==null||(o.by&&(y=o.by.resolve(y,r,a),c=o.by.resolve(c,r,a)),p=i.compare(y,c,d,f),p!==null))return p;const h=typeof y;if(h!==typeof c)throw s.$_createError("array.sort.mismatching",t,null,r,a);if(h!=="number"&&h!=="string")throw s.$_createError("array.sort.unsupported",t,{type:h},r,a);return h==="number"?(y-c)*u:y<c?d:f};try{return{value:t.slice().sort(_)}}catch(y){return{errors:y}}},i.compare=function(s,t,o,r){return s===t?0:s===void 0?1:t===void 0?-1:s===null?r:t===null?o:null}},4937:(E,x,v)=>{const l=v(375),b=v(8068),g=v(8160),m=v(2036),e={isBool:function(n){return typeof n=="boolean"}};E.exports=b.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(n,i){let{schema:s}=i;if(typeof n!="boolean"){if(typeof n=="string"){const t=s._flags.sensitive?n:n.toLowerCase();n=t==="true"||t!=="false"&&n}return typeof n!="boolean"&&(n=s.$_terms.truthy&&s.$_terms.truthy.has(n,null,null,!s._flags.sensitive)||(!s.$_terms.falsy||!s.$_terms.falsy.has(n,null,null,!s._flags.sensitive))&&n),{value:n}}},validate(n,i){let{error:s}=i;if(typeof n!="boolean")return{value:n,errors:s("boolean.base")}},rules:{truthy:{method(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];g.verifyFlat(i,"truthy");const t=this.clone();t.$_terms.truthy=t.$_terms.truthy||new m;for(let o=0;o<i.length;++o){const r=i[o];l(r!==void 0,"Cannot call truthy with undefined"),t.$_terms.truthy.add(r)}return t}},falsy:{method(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];g.verifyFlat(i,"falsy");const t=this.clone();t.$_terms.falsy=t.$_terms.falsy||new m;for(let o=0;o<i.length;++o){const r=i[o];l(r!==void 0,"Cannot call falsy with undefined"),t.$_terms.falsy.add(r)}return t}},sensitive:{method(){let n=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("sensitive",n)}}},cast:{number:{from:e.isBool,to:(n,i)=>n?1:0},string:{from:e.isBool,to:(n,i)=>n?"true":"false"}},manifest:{build:(n,i)=>(i.truthy&&(n=n.truthy(...i.truthy)),i.falsy&&(n=n.falsy(...i.falsy)),n)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(E,x,v)=>{const l=v(375),b=v(8068),g=v(8160),m=v(3328),e={isDate:function(n){return n instanceof Date}};E.exports=b.extend({type:"date",coerce:{from:["number","string"],method(n,i){let{schema:s}=i;return{value:e.parse(n,s._flags.format)||n}}},validate(n,i){let{schema:s,error:t,prefs:o}=i;if(n instanceof Date&&!isNaN(n.getTime()))return;const r=s._flags.format;return o.convert&&r&&typeof n=="string"?{value:n,errors:t("date.format",{format:r})}:{value:n,errors:t("date.base")}},rules:{compare:{method:!1,validate(n,i,s,t){let{date:o}=s,{name:r,operator:a,args:u}=t;const d=o==="now"?Date.now():o.getTime();return g.compare(n.getTime(),d,a)?n:i.error("date."+r,{limit:u.date,value:n})},args:[{name:"date",ref:!0,normalize:n=>n==="now"?n:e.parse(n),assert:n=>n!==null,message:"must have a valid date format"}]},format:{method(n){return l(["iso","javascript","unix"].includes(n),"Unknown date format",n),this.$_setFlag("format",n)}},greater:{method(n){return this.$_addRule({name:"greater",method:"compare",args:{date:n},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(n){return this.$_addRule({name:"less",method:"compare",args:{date:n},operator:"<"})}},max:{method(n){return this.$_addRule({name:"max",method:"compare",args:{date:n},operator:"<="})}},min:{method(n){return this.$_addRule({name:"min",method:"compare",args:{date:n},operator:">="})}},timestamp:{method(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"javascript";return l(["javascript","unix"].includes(n),'"type" must be one of "javascript, unix"'),this.format(n)}}},cast:{number:{from:e.isDate,to:(n,i)=>n.getTime()},string:{from:e.isDate,to(n,i){let{prefs:s}=i;return m.date(n,s)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),e.parse=function(n,i){if(n instanceof Date)return n;if(typeof n!="string"&&(isNaN(n)||!isFinite(n))||/^\s*$/.test(n))return null;if(i==="iso")return g.isIsoDate(n)?e.date(n.toString()):null;const s=n;if(typeof n=="string"&&/^[+-]?\d+(\.\d+)?$/.test(n)&&(n=parseFloat(n)),i){if(i==="javascript")return e.date(1*n);if(i==="unix")return e.date(1e3*n);if(typeof s=="string")return null}return e.date(n)},e.date=function(n){const i=new Date(n);return isNaN(i.getTime())?null:i}},390:(E,x,v)=>{const l=v(375),b=v(7824);E.exports=b.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(g){return l(Number.isSafeInteger(g)&&g>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:g}})},validate(g,m,e){let{n}=e;return g.length===n?g:m.error("function.arity",{n})}},class:{method(){return this.$_addRule("class")},validate:(g,m)=>/^\s*class\s/.test(g.toString())?g:m.error("function.class",{value:g})},minArity:{method(g){return l(Number.isSafeInteger(g)&&g>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:g}})},validate(g,m,e){let{n}=e;return g.length>=n?g:m.error("function.minArity",{n})}},maxArity:{method(g){return l(Number.isSafeInteger(g)&&g>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:g}})},validate(g,m,e){let{n}=e;return g.length<=n?g:m.error("function.maxArity",{n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(E,x,v)=>{const l=v(978),b=v(375),g=v(8571),m=v(3652),e=v(8068),n=v(8160),i=v(3292),s=v(6354),t=v(6133),o=v(3328),r={renameDefaults:{alias:!1,multiple:!1,override:!1}};E.exports=e.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(a,u)=>a.keys(u),validate(a,u){let{schema:d,error:f,state:_,prefs:y}=u;if(!a||typeof a!==d.$_property("typeof")||Array.isArray(a))return{value:a,errors:f("object.base",{type:d.$_property("typeof")})};if(!(d.$_terms.renames||d.$_terms.dependencies||d.$_terms.keys||d.$_terms.patterns||d.$_terms.externals))return;a=r.clone(a,y);const c=[];if(d.$_terms.renames&&!r.rename(d,a,_,y,c))return{value:a,errors:c};if(!d.$_terms.keys&&!d.$_terms.patterns&&!d.$_terms.dependencies)return{value:a,errors:c};const p=new Set(Object.keys(a));if(d.$_terms.keys){const h=[a,..._.ancestors];for(const w of d.$_terms.keys){const A=w.key,C=a[A];p.delete(A);const R=_.localize([..._.path,A],h,w),j=w.schema.$_validate(C,R,y);if(j.errors){if(y.abortEarly)return{value:a,errors:j.errors};j.value!==void 0&&(a[A]=j.value),c.push(...j.errors)}else w.schema._flags.result==="strip"||j.value===void 0&&C!==void 0?delete a[A]:j.value!==void 0&&(a[A]=j.value)}}if(p.size||d._flags._hasPatternMatch){const h=r.unknown(d,a,p,c,_,y);if(h)return h}if(d.$_terms.dependencies)for(const h of d.$_terms.dependencies){if(h.key!==null&&r.isPresent(h.options)(h.key.resolve(a,_,y,null,{shadow:!1}))===!1)continue;const w=r.dependencies[h.rel](d,h,a,_,y);if(w){const A=d.$_createError(w.code,a,w.context,_,y);if(y.abortEarly)return{value:a,errors:A};c.push(A)}}return{value:a,errors:c}},rules:{and:{method(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return n.verifyFlat(u,"and"),r.dependency(this,"and",null,u)}},append:{method(a){return a==null||Object.keys(a).length===0?this:this.keys(a)}},assert:{method(a,u,d){o.isTemplate(a)||(a=i.ref(a)),b(d===void 0||typeof d=="string","Message must be a string"),u=this.$_compile(u,{appendPath:!0});const f=this.$_addRule({name:"assert",args:{subject:a,schema:u,message:d}});return f.$_mutateRegister(a),f.$_mutateRegister(u),f},validate(a,u,d){let{error:f,prefs:_,state:y}=u,{subject:c,schema:p,message:h}=d;const w=c.resolve(a,y,_),A=t.isRef(c)?c.absolute(y):[];return p.$_match(w,y.localize(A,[a,...y.ancestors],p),_)?a:f("object.assert",{subject:c,message:h})},args:["subject","schema","message"],multi:!0},instance:{method(a,u){return b(typeof a=="function","constructor must be a function"),u=u||a.name,this.$_addRule({name:"instance",args:{constructor:a,name:u}})},validate(a,u,d){let{constructor:f,name:_}=d;return a instanceof f?a:u.error("object.instance",{type:_,value:a})},args:["constructor","name"]},keys:{method(a){b(a===void 0||typeof a=="object","Object schema must be a valid object"),b(!n.isSchema(a),"Object schema cannot be a joi schema");const u=this.clone();if(a)if(Object.keys(a).length){u.$_terms.keys=u.$_terms.keys?u.$_terms.keys.filter(d=>!a.hasOwnProperty(d.key)):new r.Keys;for(const d in a)n.tryWithPath(()=>u.$_terms.keys.push({key:d,schema:this.$_compile(a[d])}),d)}else u.$_terms.keys=new r.Keys;else u.$_terms.keys=null;return u.$_mutateRebuild()}},length:{method(a){return this.$_addRule({name:"length",args:{limit:a},operator:"="})},validate(a,u,d,f){let{limit:_}=d,{name:y,operator:c,args:p}=f;return n.compare(Object.keys(a).length,_,c)?a:u.error("object."+y,{limit:p.limit,value:a})},args:[{name:"limit",ref:!0,assert:n.limit,message:"must be a positive integer"}]},max:{method(a){return this.$_addRule({name:"max",method:"length",args:{limit:a},operator:"<="})}},min:{method(a){return this.$_addRule({name:"min",method:"length",args:{limit:a},operator:">="})}},nand:{method(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return n.verifyFlat(u,"nand"),r.dependency(this,"nand",null,u)}},or:{method(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return n.verifyFlat(u,"or"),r.dependency(this,"or",null,u)}},oxor:{method(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return r.dependency(this,"oxor",null,u)}},pattern:{method(a,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const f=a instanceof RegExp;f||(a=this.$_compile(a,{appendPath:!0})),b(u!==void 0,"Invalid rule"),n.assertOptions(d,["fallthrough","matches"]),f&&b(!a.flags.includes("g")&&!a.flags.includes("y"),"pattern should not use global or sticky mode"),u=this.$_compile(u,{appendPath:!0});const _=this.clone();_.$_terms.patterns=_.$_terms.patterns||[];const y={[f?"regex":"schema"]:a,rule:u};return d.matches&&(y.matches=this.$_compile(d.matches),y.matches.type!=="array"&&(y.matches=y.matches.$_root.array().items(y.matches)),_.$_mutateRegister(y.matches),_.$_setFlag("_hasPatternMatch",!0,{clone:!1})),d.fallthrough&&(y.fallthrough=!0),_.$_terms.patterns.push(y),_.$_mutateRegister(u),_}},ref:{method(){return this.$_addRule("ref")},validate:(a,u)=>t.isRef(a)?a:u.error("object.refType",{value:a})},regex:{method(){return this.$_addRule("regex")},validate:(a,u)=>a instanceof RegExp?a:u.error("object.regex",{value:a})},rename:{method(a,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};b(typeof a=="string"||a instanceof RegExp,"Rename missing the from argument"),b(typeof u=="string"||u instanceof o,"Invalid rename to argument"),b(u!==a,"Cannot rename key to same name:",a),n.assertOptions(d,["alias","ignoreUndefined","override","multiple"]);const f=this.clone();f.$_terms.renames=f.$_terms.renames||[];for(const _ of f.$_terms.renames)b(_.from!==a,"Cannot rename the same key multiple times");return u instanceof o&&f.$_mutateRegister(u),f.$_terms.renames.push({from:a,to:u,options:l(r.renameDefaults,d)}),f}},schema:{method(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:a}})},validate(a,u,d){let{type:f}=d;return!n.isSchema(a)||f!=="any"&&a.type!==f?u.error("object.schema",{type:f}):a}},unknown:{method(a){return this.$_setFlag("unknown",a!==!1)}},with:{method(a,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.dependency(this,"with",a,u,d)}},without:{method(a,u){let d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return r.dependency(this,"without",a,u,d)}},xor:{method(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];return n.verifyFlat(u,"xor"),r.dependency(this,"xor",null,u)}}},overrides:{default(a,u){return a===void 0&&(a=n.symbols.deepDefault),this.$_parent("default",a,u)}},rebuild(a){if(a.$_terms.keys){const u=new m.Sorter;for(const d of a.$_terms.keys)n.tryWithPath(()=>u.add(d,{after:d.schema.$_rootReferences(),group:d.key}),d.key);a.$_terms.keys=new r.Keys(...u.nodes)}},manifest:{build(a,u){if(u.keys&&(a=a.keys(u.keys)),u.dependencies)for(const{rel:d,key:f=null,peers:_,options:y}of u.dependencies)a=r.dependency(a,d,f,_,y);if(u.patterns)for(const{regex:d,schema:f,rule:_,fallthrough:y,matches:c}of u.patterns)a=a.pattern(d||f,_,{fallthrough:y,matches:c});if(u.renames)for(const{from:d,to:f,options:_}of u.renames)a=a.rename(d,f,_);return a}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),r.clone=function(a,u){if(typeof a=="object"){if(u.nonEnumerables)return g(a,{shallow:!0});const f=Object.create(Object.getPrototypeOf(a));return Object.assign(f,a),f}const d=function(){for(var f=arguments.length,_=new Array(f),y=0;y<f;y++)_[y]=arguments[y];return a.apply(this,_)};return d.prototype=g(a.prototype),Object.defineProperty(d,"name",{value:a.name,writable:!1}),Object.defineProperty(d,"length",{value:a.length,writable:!1}),Object.assign(d,a),d},r.dependency=function(a,u,d,f,_){b(d===null||typeof d=="string",u,"key must be a strings"),_||(_=f.length>1&&typeof f[f.length-1]=="object"?f.pop():{}),n.assertOptions(_,["separator","isPresent"]),f=[].concat(f);const y=n.default(_.separator,"."),c=[];for(const h of f)b(typeof h=="string",u,"peers must be strings"),c.push(i.ref(h,{separator:y,ancestor:0,prefix:!1}));d!==null&&(d=i.ref(d,{separator:y,ancestor:0,prefix:!1}));const p=a.clone();return p.$_terms.dependencies=p.$_terms.dependencies||[],p.$_terms.dependencies.push(new r.Dependency(u,d,c,f,_)),p},r.dependencies={and(a,u,d,f,_){const y=[],c=[],p=u.peers.length,h=r.isPresent(u.options);for(const w of u.peers)h(w.resolve(d,f,_,null,{shadow:!1}))===!1?y.push(w.key):c.push(w.key);if(y.length!==p&&c.length!==p)return{code:"object.and",context:{present:c,presentWithLabels:r.keysToLabels(a,c),missing:y,missingWithLabels:r.keysToLabels(a,y)}}},nand(a,u,d,f,_){const y=[],c=r.isPresent(u.options);for(const w of u.peers)c(w.resolve(d,f,_,null,{shadow:!1}))&&y.push(w.key);if(y.length!==u.peers.length)return;const p=u.paths[0],h=u.paths.slice(1);return{code:"object.nand",context:{main:p,mainWithLabel:r.keysToLabels(a,p),peers:h,peersWithLabels:r.keysToLabels(a,h)}}},or(a,u,d,f,_){const y=r.isPresent(u.options);for(const c of u.peers)if(y(c.resolve(d,f,_,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)}}},oxor(a,u,d,f,_){const y=[],c=r.isPresent(u.options);for(const h of u.peers)c(h.resolve(d,f,_,null,{shadow:!1}))&&y.push(h.key);if(!y.length||y.length===1)return;const p={peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)};return p.present=y,p.presentWithLabels=r.keysToLabels(a,y),{code:"object.oxor",context:p}},with(a,u,d,f,_){const y=r.isPresent(u.options);for(const c of u.peers)if(y(c.resolve(d,f,_,null,{shadow:!1}))===!1)return{code:"object.with",context:{main:u.key.key,mainWithLabel:r.keysToLabels(a,u.key.key),peer:c.key,peerWithLabel:r.keysToLabels(a,c.key)}}},without(a,u,d,f,_){const y=r.isPresent(u.options);for(const c of u.peers)if(y(c.resolve(d,f,_,null,{shadow:!1})))return{code:"object.without",context:{main:u.key.key,mainWithLabel:r.keysToLabels(a,u.key.key),peer:c.key,peerWithLabel:r.keysToLabels(a,c.key)}}},xor(a,u,d,f,_){const y=[],c=r.isPresent(u.options);for(const h of u.peers)c(h.resolve(d,f,_,null,{shadow:!1}))&&y.push(h.key);if(y.length===1)return;const p={peers:u.paths,peersWithLabels:r.keysToLabels(a,u.paths)};return y.length===0?{code:"object.missing",context:p}:(p.present=y,p.presentWithLabels=r.keysToLabels(a,y),{code:"object.xor",context:p})}},r.keysToLabels=function(a,u){return Array.isArray(u)?u.map(d=>a.$_mapLabels(d)):a.$_mapLabels(u)},r.isPresent=function(a){return typeof a.isPresent=="function"?a.isPresent:u=>u!==void 0},r.rename=function(a,u,d,f,_){const y={};for(const c of a.$_terms.renames){const p=[],h=typeof c.from!="string";if(h)for(const w in u){if(u[w]===void 0&&c.options.ignoreUndefined||w===c.to)continue;const A=c.from.exec(w);A&&p.push({from:w,to:c.to,match:A})}else!Object.prototype.hasOwnProperty.call(u,c.from)||u[c.from]===void 0&&c.options.ignoreUndefined||p.push(c);for(const w of p){const A=w.from;let C=w.to;if(C instanceof o&&(C=C.render(u,d,f,w.match)),A!==C){if(!c.options.multiple&&y[C]&&(_.push(a.$_createError("object.rename.multiple",u,{from:A,to:C,pattern:h},d,f)),f.abortEarly)||Object.prototype.hasOwnProperty.call(u,C)&&!c.options.override&&!y[C]&&(_.push(a.$_createError("object.rename.override",u,{from:A,to:C,pattern:h},d,f)),f.abortEarly))return!1;u[A]===void 0?delete u[C]:u[C]=u[A],y[C]=!0,c.options.alias||delete u[A]}}}return!0},r.unknown=function(a,u,d,f,_,y){if(a.$_terms.patterns){let c=!1;const p=a.$_terms.patterns.map(w=>{if(w.matches)return c=!0,[]}),h=[u,..._.ancestors];for(const w of d){const A=u[w],C=[..._.path,w];for(let R=0;R<a.$_terms.patterns.length;++R){const j=a.$_terms.patterns[R];if(j.regex){const L=j.regex.test(w);if(_.mainstay.tracer.debug(_,"rule",`pattern.${R}`,L?"pass":"error"),!L)continue}else if(!j.schema.$_match(w,_.nest(j.schema,`pattern.${R}`),y))continue;d.delete(w);const B=_.localize(C,h,{schema:j.rule,key:w}),O=j.rule.$_validate(A,B,y);if(O.errors){if(y.abortEarly)return{value:u,errors:O.errors};f.push(...O.errors)}if(j.matches&&p[R].push(w),u[w]=O.value,!j.fallthrough)break}}if(c)for(let w=0;w<p.length;++w){const A=p[w];if(!A)continue;const C=a.$_terms.patterns[w].matches,R=_.localize(_.path,h,C),j=C.$_validate(A,R,y);if(j.errors){const B=s.details(j.errors,{override:!1});B.matches=A;const O=a.$_createError("object.pattern.match",u,B,_,y);if(y.abortEarly)return{value:u,errors:O};f.push(O)}}}if(d.size&&(a.$_terms.keys||a.$_terms.patterns)){if(y.stripUnknown&&!a._flags.unknown||y.skipFunctions){const c=!(!y.stripUnknown||y.stripUnknown!==!0&&!y.stripUnknown.objects);for(const p of d)c?(delete u[p],d.delete(p)):typeof u[p]=="function"&&d.delete(p)}if(!n.default(a._flags.unknown,y.allowUnknown))for(const c of d){const p=_.localize([..._.path,c],[]),h=a.$_createError("object.unknown",u[c],{child:c},p,y,{flags:!1});if(y.abortEarly)return{value:u,errors:h};f.push(h)}}},r.Dependency=class{constructor(a,u,d,f,_){this.rel=a,this.key=u,this.peers=d,this.paths=f,this.options=_}describe(){const a={rel:this.rel,peers:this.paths};return this.key!==null&&(a.key=this.key.key),this.peers[0].separator!=="."&&(a.options={...a.options,separator:this.peers[0].separator}),this.options.isPresent&&(a.options={...a.options,isPresent:this.options.isPresent}),a}},r.Keys=class extends Array{concat(a){const u=this.slice(),d=new Map;for(let f=0;f<u.length;++f)d.set(u[f].key,f);for(const f of a){const _=f.key,y=d.get(_);y!==void 0?u[y]={key:_,schema:u[y].schema.concat(f.schema)}:u.push(f)}return u}}},8785:(E,x,v)=>{const l=v(375),b=v(8068),g=v(8160),m=v(3292),e=v(6354),n={};E.exports=b.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(i,s)=>i.ref(s),validate(i,s){let{schema:t,state:o,prefs:r}=s;l(t.$_terms.link,"Uninitialized link schema");const a=n.generate(t,i,o,r),u=t.$_terms.link[0].ref;return a.$_validate(i,o.nest(a,`link:${u.display}:${a.type}`),r)},generate:(i,s,t,o)=>n.generate(i,s,t,o),rules:{ref:{method(i){l(!this.$_terms.link,"Cannot reinitialize schema"),i=m.ref(i),l(i.type==="value"||i.type==="local","Invalid reference type:",i.type),l(i.type==="local"||i.ancestor==="root"||i.ancestor>0,"Link cannot reference itself");const s=this.clone();return s.$_terms.link=[{ref:i}],s}},relative:{method(){let i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.$_setFlag("relative",i)}}},overrides:{concat(i){l(this.$_terms.link,"Uninitialized link schema"),l(g.isSchema(i),"Invalid schema object"),l(i.type!=="link","Cannot merge type link with another link");const s=this.clone();return s.$_terms.whens||(s.$_terms.whens=[]),s.$_terms.whens.push({concat:i}),s.$_mutateRebuild()}},manifest:{build:(i,s)=>(l(s.link,"Invalid link description missing link"),i.ref(s.link))}}),n.generate=function(i,s,t,o){let r=t.mainstay.links.get(i);if(r)return r._generate(s,t,o).schema;const a=i.$_terms.link[0].ref,{perspective:u,path:d}=n.perspective(a,t);n.assert(u,"which is outside of schema boundaries",a,i,t,o);try{r=d.length?u.$_reach(d):u}catch{n.assert(!1,"to non-existing schema",a,i,t,o)}return n.assert(r.type!=="link","which is another link",a,i,t,o),i._flags.relative||t.mainstay.links.set(i,r),r._generate(s,t,o).schema},n.perspective=function(i,s){if(i.type==="local"){for(const{schema:t,key:o}of s.schemas){if((t._flags.id||o)===i.path[0])return{perspective:t,path:i.path.slice(1)};if(t.$_terms.shared){for(const r of t.$_terms.shared)if(r._flags.id===i.path[0])return{perspective:r,path:i.path.slice(1)}}}return{perspective:null,path:null}}return i.ancestor==="root"?{perspective:s.schemas[s.schemas.length-1].schema,path:i.path}:{perspective:s.schemas[i.ancestor]&&s.schemas[i.ancestor].schema,path:i.path}},n.assert=function(i,s,t,o,r,a){i||l(!1,`"${e.label(o._flags,r,a)}" contains link reference "${t.display}" ${s}`)}},3832:(E,x,v)=>{const l=v(375),b=v(8068),g=v(8160),m={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};E.exports=b.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,n){let{schema:i,error:s}=n;if(!e.match(m.numberRx))return;e=e.trim();const t={value:parseFloat(e)};if(t.value===0&&(t.value=0),!i._flags.unsafe)if(e.match(/e/i)){if(m.extractSignificantDigits(e)!==m.extractSignificantDigits(String(t.value)))return t.errors=s("number.unsafe"),t}else{const o=t.value.toString();if(o.match(/e/i))return t;if(o!==m.normalizeDecimal(e))return t.errors=s("number.unsafe"),t}return t}},validate(e,n){let{schema:i,error:s,prefs:t}=n;if(e===1/0||e===-1/0)return{value:e,errors:s("number.infinity")};if(!g.isNumber(e))return{value:e,errors:s("number.base")};const o={value:e};if(t.convert){const r=i.$_getRule("precision");if(r){const a=Math.pow(10,r.args.limit);o.value=Math.round(o.value*a)/a}}return o.value===0&&(o.value=0),!i._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(o.errors=s("number.unsafe")),o},rules:{compare:{method:!1,validate(e,n,i,s){let{limit:t}=i,{name:o,operator:r,args:a}=s;return g.compare(e,t,r)?e:n.error("number."+o,{limit:a.limit,value:e})},args:[{name:"limit",ref:!0,assert:g.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,n)=>Math.trunc(e)-e==0?e:n.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,n,i,s){let{base:t}=i;return e*(1/t)%1==0?e:n.error("number.multiple",{multiple:s.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>typeof e=="number"&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,n)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:n.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return l(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,n,i){let{limit:s}=i;const t=e.toString().match(m.precisionRx);return Math.max((t[1]?t[1].length:0)-(t[2]?parseInt(t[2],10):0),0)<=s?e:n.error("number.precision",{limit:s,value:e})},convert:!0},sign:{method(e){return l(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,n,i){let{sign:s}=i;return s==="negative"&&e<0||s==="positive"&&e>0?e:n.error(`number.${s}`)}},unsafe:{method(){let e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return l(typeof e=="boolean","enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>typeof e=="number",to:(e,n)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),m.extractSignificantDigits=function(e){return e.replace(m.exponentialPartRegex,"").replace(m.dotRegex,"").replace(m.trailingZerosRegex,"").replace(m.leadingSignAndZerosRegex,"")},m.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),e==="-0"?"0":e}},8966:(E,x,v)=>{const l=v(7824);E.exports=l.extend({type:"object",cast:{map:{from:b=>b&&typeof b=="object",to:(b,g)=>new Map(Object.entries(b))}}})},7417:(E,x,v)=>{const l=v(375),b=v(5380),g=v(1745),m=v(9959),e=v(6064),n=v(9926),i=v(5752),s=v(8068),t=v(8160),o={tlds:n instanceof Set&&{tlds:{allow:n,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:m.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};E.exports=s.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(r,a){let{schema:u,state:d,prefs:f}=a;const _=u.$_getRule("normalize");_&&(r=r.normalize(_.args.form));const y=u.$_getRule("case");y&&(r=y.args.direction==="upper"?r.toLocaleUpperCase():r.toLocaleLowerCase());const c=u.$_getRule("trim");if(c&&c.args.enabled&&(r=r.trim()),u.$_terms.replacements)for(const h of u.$_terms.replacements)r=r.replace(h.pattern,h.replacement);const p=u.$_getRule("hex");if(p&&p.args.options.byteAligned&&r.length%2!=0&&(r=`0${r}`),u.$_getRule("isoDate")){const h=o.isoDate(r);h&&(r=h)}if(u._flags.truncate){const h=u.$_getRule("max");if(h){let w=h.args.limit;if(t.isResolvable(w)&&(w=w.resolve(r,d,f),!t.limit(w)))return{value:r,errors:u.$_createError("any.ref",w,{ref:h.args.limit,arg:"limit",reason:"must be a positive integer"},d,f)};r=r.slice(0,w)}}return{value:r}}},validate(r,a){let{schema:u,error:d}=a;if(typeof r!="string")return{value:r,errors:d("string.base")};if(r===""){const f=u.$_getRule("min");return f&&f.args.limit===0?void 0:{value:r,errors:d("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(r,a)=>/^[a-zA-Z0-9]+$/.test(r)?r:a.error("string.alphanum")},base64:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["paddingRequired","urlSafe"]),r={urlSafe:!1,paddingRequired:!0,...r},l(typeof r.paddingRequired=="boolean","paddingRequired must be boolean"),l(typeof r.urlSafe=="boolean","urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:r}})},validate(r,a,u){let{options:d}=u;return o.base64Regex[d.paddingRequired][d.urlSafe].test(r)?r:a.error("string.base64")}},case:{method(r){return l(["lower","upper"].includes(r),"Invalid case:",r),this.$_addRule({name:"case",args:{direction:r}})},validate(r,a,u){let{direction:d}=u;return d==="lower"&&r===r.toLocaleLowerCase()||d==="upper"&&r===r.toLocaleUpperCase()?r:a.error(`string.${d}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(r,a){let u=r.length,d=0,f=1;for(;u--;){const _=r.charAt(u)*f;d+=_-9*(_>9),f^=3}return d>0&&d%10==0?r:a.error("string.creditCard")}},dataUri:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["paddingRequired"]),r={paddingRequired:!0,...r},l(typeof r.paddingRequired=="boolean","paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:r}})},validate(r,a,u){let{options:d}=u;const f=r.match(o.dataUriRegex);return f&&(!f[2]||f[2]!=="base64"||o.base64Regex[d.paddingRequired].false.test(f[3]))?r:a.error("string.dataUri")}},domain:{method(r){r&&t.assertOptions(r,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const a=o.addressOptions(r);return this.$_addRule({name:"domain",args:{options:r},address:a})},validate(r,a,u,d){let{address:f}=d;return b.isValid(r,f)?r:a.error("string.domain")}},email:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),l(r.multiple===void 0||typeof r.multiple=="boolean","multiple option must be an boolean");const a=o.addressOptions(r),u=new RegExp(`\\s*[${r.separator?e(r.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:r},regex:u,address:a})},validate(r,a,u,d){let{options:f}=u,{regex:_,address:y}=d;const c=f.multiple?r.split(_):[r],p=[];for(const h of c)g.isValid(h,y)||p.push(h);return p.length?a.error("string.email",{value:r,invalids:p}):r}},guid:{alias:"uuid",method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["version","separator"]);let a="";if(r.version){const f=[].concat(r.version);l(f.length>=1,"version must have at least 1 valid version specified");const _=new Set;for(let y=0;y<f.length;++y){const c=f[y];l(typeof c=="string","version at position "+y+" must be a string");const p=o.guidVersions[c.toLowerCase()];l(p,"version at position "+y+" must be one of "+Object.keys(o.guidVersions).join(", ")),l(!_.has(p),"version at position "+y+" must not be a duplicate"),a+=p,_.add(p)}}l(o.guidSeparators.has(r.separator),'separator must be one of true, false, "-", or ":"');const u=r.separator===void 0?"[:-]?":r.separator===!0?"[:-]":r.separator===!1?"[]?":`\\${r.separator}`,d=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${u})[0-9A-F]{4}\\2?[${a||"0-9A-F"}][0-9A-F]{3}\\2?[${a?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:r},regex:d})},validate(r,a,u,d){let{regex:f}=d;const _=f.exec(r);return _?o.guidBrackets[_[1]]!==_[_.length-1]?a.error("string.guid"):r:a.error("string.guid")}},hex:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.assertOptions(r,["byteAligned"]),r={byteAligned:!1,...r},l(typeof r.byteAligned=="boolean","byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:r}})},validate(r,a,u){let{options:d}=u;return o.hexRegex.test(r)?d.byteAligned&&r.length%2!=0?a.error("string.hexAlign"):r:a.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(r,a)=>b.isValid(r,{minDomainSegments:1})||o.ipRegex.test(r)?r:a.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["cidr","version"]);const{cidr:a,versions:u,regex:d}=m.regex(r),f=r.version?u:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:a,version:f}},regex:d})},validate(r,a,u,d){let{options:f}=u,{regex:_}=d;return _.test(r)?r:f.version?a.error("string.ipVersion",{value:r,cidr:f.cidr,version:f.version}):a.error("string.ip",{value:r,cidr:f.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(r,a){let{error:u}=a;return o.isoDate(r)?r:u("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(r,a)=>o.isoDurationRegex.test(r)?r:a.error("string.isoDuration")},length:{method(r,a){return o.length(this,"length",r,"=",a)},validate(r,a,u,d){let{limit:f,encoding:_}=u,{name:y,operator:c,args:p}=d;const h=!_&&r.length;return t.compare(h,f,c)?r:a.error("string."+y,{limit:p.limit,value:r,encoding:_})},args:[{name:"limit",ref:!0,assert:t.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(r,a){return o.length(this,"max",r,"<=",a)},args:["limit","encoding"]},min:{method(r,a){return o.length(this,"min",r,">=",a)},args:["limit","encoding"]},normalize:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"NFC";return l(o.normalizationForms.includes(r),"normalization form must be one of "+o.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:r}})},validate(r,a,u){let{error:d}=a,{form:f}=u;return r===r.normalize(f)?r:d("string.normalize",{value:r,form:f})},convert:!0},pattern:{alias:"regex",method(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(r instanceof RegExp,"regex must be a RegExp"),l(!r.flags.includes("g")&&!r.flags.includes("y"),"regex should not use global or sticky mode"),typeof a=="string"&&(a={name:a}),t.assertOptions(a,["invert","name"]);const u=["string.pattern",a.invert?".invert":"",a.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:r,options:a},errorCode:u})},validate(r,a,u,d){let{regex:f,options:_}=u,{errorCode:y}=d;return f.test(r)^_.invert?r:a.error(y,{name:_.name,regex:f,value:r})},args:["regex","options"],multi:!0},replace:{method(r,a){typeof r=="string"&&(r=new RegExp(e(r),"g")),l(r instanceof RegExp,"pattern must be a RegExp"),l(typeof a=="string","replacement must be a String");const u=this.clone();return u.$_terms.replacements||(u.$_terms.replacements=[]),u.$_terms.replacements.push({pattern:r,replacement:a}),u}},token:{method(){return this.$_addRule("token")},validate:(r,a)=>/^\w+$/.test(r)?r:a.error("string.token")},trim:{method(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return l(typeof r=="boolean","enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:r}})},validate(r,a,u){let{enabled:d}=u;return d&&r!==r.trim()?a.error("string.trim"):r},convert:!0},truncate:{method(){let r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return l(typeof r=="boolean","enabled must be a boolean"),this.$_setFlag("truncate",r)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.assertOptions(r,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),r.domain&&t.assertOptions(r.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:a,scheme:u}=i.regex(r),d=r.domain?o.addressOptions(r.domain):null;return this.$_addRule({name:"uri",args:{options:r},regex:a,domain:d,scheme:u})},validate(r,a,u,d){let{options:f}=u,{regex:_,domain:y,scheme:c}=d;if(["http:/","https:/"].includes(r))return a.error("string.uri");const p=_.exec(r);if(p){const h=p[1]||p[2];return!y||f.allowRelative&&!h||b.isValid(h,y)?r:a.error("string.domain",{value:h})}return f.relativeOnly?a.error("string.uriRelativeOnly"):f.scheme?a.error("string.uriCustomScheme",{scheme:c,value:r}):a.error("string.uri")}}},manifest:{build(r,a){if(a.replacements)for(const{pattern:u,replacement:d}of a.replacements)r=r.replace(u,d);return r}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),o.addressOptions=function(r){if(!r||(l(r.minDomainSegments===void 0||Number.isSafeInteger(r.minDomainSegments)&&r.minDomainSegments>0,"minDomainSegments must be a positive integer"),l(r.maxDomainSegments===void 0||Number.isSafeInteger(r.maxDomainSegments)&&r.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),r.tlds===!1))return r;if(r.tlds===!0||r.tlds===void 0)return l(o.tlds,"Built-in TLD list disabled"),Object.assign({},r,o.tlds);l(typeof r.tlds=="object","tlds must be true, false, or an object");const a=r.tlds.deny;if(a)return Array.isArray(a)&&(r=Object.assign({},r,{tlds:{deny:new Set(a)}})),l(r.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),l(!r.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),o.validateTlds(r.tlds.deny,"tlds.deny"),r;const u=r.tlds.allow;return u?u===!0?(l(o.tlds,"Built-in TLD list disabled"),Object.assign({},r,o.tlds)):(Array.isArray(u)&&(r=Object.assign({},r,{tlds:{allow:new Set(u)}})),l(r.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),o.validateTlds(r.tlds.allow,"tlds.allow"),r):r},o.validateTlds=function(r,a){for(const u of r)l(b.isValid(u,{minDomainSegments:1,maxDomainSegments:1}),`${a} must contain valid top level domain names`)},o.isoDate=function(r){if(!t.isIsoDate(r))return null;/.*T.*[+-]\d\d$/.test(r)&&(r+="00");const a=new Date(r);return isNaN(a.getTime())?null:a.toISOString()},o.length=function(r,a,u,d,f){return l(!f||!1,"Invalid encoding:",f),r.$_addRule({name:a,method:"length",args:{limit:u,encoding:f},operator:d})}},8826:(E,x,v)=>{const l=v(375),b=v(8068),g={};g.Map=class extends Map{slice(){return new g.Map(this)}},E.exports=b.extend({type:"symbol",terms:{map:{init:new g.Map}},coerce:{method(m,e){let{schema:n,error:i}=e;const s=n.$_terms.map.get(m);return s&&(m=s),n._flags.only&&typeof m!="symbol"?{value:m,errors:i("symbol.map",{map:n.$_terms.map})}:{value:m}}},validate(m,e){let{error:n}=e;if(typeof m!="symbol")return{value:m,errors:n("symbol.base")}},rules:{map:{method(m){m&&!m[Symbol.iterator]&&typeof m=="object"&&(m=Object.entries(m)),l(m&&m[Symbol.iterator],"Iterable must be an iterable or object");const e=this.clone(),n=[];for(const i of m){l(i&&i[Symbol.iterator],"Entry must be an iterable");const[s,t]=i;l(typeof s!="object"&&typeof s!="function"&&typeof s!="symbol","Key must not be of type object, function, or Symbol"),l(typeof t=="symbol","Value must be a Symbol"),e.$_terms.map.set(s,t),n.push(t)}return e.valid(...n)}}},manifest:{build:(m,e)=>(e.map&&(m=m.map(e.map)),m)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(E,x,v)=>{const l=v(375),b=v(8571),g=v(738),m=v(9621),e=v(8160),n=v(6354),i=v(493),s={result:Symbol("result")};x.entry=function(t,o,r){let a=e.defaults;r&&(l(r.warnings===void 0,"Cannot override warnings preference in synchronous validation"),l(r.artifacts===void 0,"Cannot override artifacts preference in synchronous validation"),a=e.preferences(e.defaults,r));const u=s.entry(t,o,a);l(!u.mainstay.externals.length,"Schema with external rules must use validateAsync()");const d={value:u.value};return u.error&&(d.error=u.error),u.mainstay.warnings.length&&(d.warning=n.details(u.mainstay.warnings)),u.mainstay.debug&&(d.debug=u.mainstay.debug),u.mainstay.artifacts&&(d.artifacts=u.mainstay.artifacts),d},x.entryAsync=async function(t,o,r){let a=e.defaults;r&&(a=e.preferences(e.defaults,r));const u=s.entry(t,o,a),d=u.mainstay;if(u.error)throw d.debug&&(u.error.debug=d.debug),u.error;if(d.externals.length){let _=u.value;const y=[];for(const c of d.externals){const p=c.state.path,h=c.schema.type==="link"?d.links.get(c.schema):null;let w,A,C=_;const R=p.length?[_]:[],j=p.length?m(t,p):t;if(p.length){w=p[p.length-1];let B=_;for(const O of p.slice(0,-1))B=B[O],R.unshift(B);A=R[0],C=A[w]}try{const B=(L,N)=>(h||c.schema).$_createError(L,C,N,c.state,a),O=await c.method(C,{schema:c.schema,linked:h,state:c.state,prefs:r,original:j,error:B,errorsArray:s.errorsArray,warn:(L,N)=>d.warnings.push((h||c.schema).$_createError(L,C,N,c.state,a)),message:(L,N)=>(h||c.schema).$_createError("external",C,N,c.state,a,{messages:L})});if(O===void 0||O===C)continue;if(O instanceof n.Report){if(d.tracer.log(c.schema,c.state,"rule","external","error"),y.push(O),a.abortEarly)break;continue}if(Array.isArray(O)&&O[e.symbols.errors]){if(d.tracer.log(c.schema,c.state,"rule","external","error"),y.push(...O),a.abortEarly)break;continue}A?(d.tracer.value(c.state,"rule",C,O,"external"),A[w]=O):(d.tracer.value(c.state,"rule",_,O,"external"),_=O)}catch(B){throw a.errors.label&&(B.message+=` (${c.label})`),B}}if(u.value=_,y.length)throw u.error=n.process(y,t,a),d.debug&&(u.error.debug=d.debug),u.error}if(!a.warnings&&!a.debug&&!a.artifacts)return u.value;const f={value:u.value};return d.warnings.length&&(f.warning=n.details(d.warnings)),d.debug&&(f.debug=d.debug),d.artifacts&&(f.artifacts=d.artifacts),f},s.Mainstay=class{constructor(t,o,r){this.externals=[],this.warnings=[],this.tracer=t,this.debug=o,this.links=r,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const t=this._snapshots.pop();this.externals=t.externals,this.warnings=t.warnings}commit(){this._snapshots.pop()}},s.entry=function(t,o,r){const{tracer:a,cleanup:u}=s.tracer(o,r),d=r.debug?[]:null,f=o._ids._schemaChain?new Map:null,_=new s.Mainstay(a,d,f),y=o._ids._schemaChain?[{schema:o}]:null,c=new i([],[],{mainstay:_,schemas:y}),p=x.validate(t,o,c,r);u&&o.$_root.untrace();const h=n.process(p.errors,t,r);return{value:p.value,error:h,mainstay:_}},s.tracer=function(t,o){return t.$_root._tracer?{tracer:t.$_root._tracer._register(t)}:o.debug?(l(t.$_root.trace,"Debug mode not supported"),{tracer:t.$_root.trace()._register(t),cleanup:!0}):{tracer:s.ignore}},x.validate=function(t,o,r,a){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(o.$_terms.whens&&(o=o._generate(t,r,a).schema),o._preferences&&(a=s.prefs(o,a)),o._cache&&a.cache){const h=o._cache.get(t);if(r.mainstay.tracer.debug(r,"validate","cached",!!h),h)return h}const d=(h,w,A)=>o.$_createError(h,t,w,A||r,a),f={original:t,prefs:a,schema:o,state:r,error:d,errorsArray:s.errorsArray,warn:(h,w,A)=>r.mainstay.warnings.push(d(h,w,A)),message:(h,w)=>o.$_createError("custom",t,w,r,a,{messages:h})};r.mainstay.tracer.entry(o,r);const _=o._definition;if(_.prepare&&t!==void 0&&a.convert){const h=_.prepare(t,f);if(h){if(r.mainstay.tracer.value(r,"prepare",t,h.value),h.errors)return s.finalize(h.value,[].concat(h.errors),f);t=h.value}}if(_.coerce&&t!==void 0&&a.convert&&(!_.coerce.from||_.coerce.from.includes(typeof t))){const h=_.coerce.method(t,f);if(h){if(r.mainstay.tracer.value(r,"coerced",t,h.value),h.errors)return s.finalize(h.value,[].concat(h.errors),f);t=h.value}}const y=o._flags.empty;y&&y.$_match(s.trim(t,o),r.nest(y),e.defaults)&&(r.mainstay.tracer.value(r,"empty",t,void 0),t=void 0);const c=u.presence||o._flags.presence||(o._flags._endedSwitch?null:a.presence);if(t===void 0){if(c==="forbidden")return s.finalize(t,null,f);if(c==="required")return s.finalize(t,[o.$_createError("any.required",t,null,r,a)],f);if(c==="optional"){if(o._flags.default!==e.symbols.deepDefault)return s.finalize(t,null,f);r.mainstay.tracer.value(r,"default",t,{}),t={}}}else if(c==="forbidden")return s.finalize(t,[o.$_createError("any.unknown",t,null,r,a)],f);const p=[];if(o._valids){const h=o._valids.get(t,r,a,o._flags.insensitive);if(h)return a.convert&&(r.mainstay.tracer.value(r,"valids",t,h.value),t=h.value),r.mainstay.tracer.filter(o,r,"valid",h),s.finalize(t,null,f);if(o._flags.only){const w=o.$_createError("any.only",t,{valids:o._valids.values({display:!0})},r,a);if(a.abortEarly)return s.finalize(t,[w],f);p.push(w)}}if(o._invalids){const h=o._invalids.get(t,r,a,o._flags.insensitive);if(h){r.mainstay.tracer.filter(o,r,"invalid",h);const w=o.$_createError("any.invalid",t,{invalids:o._invalids.values({display:!0})},r,a);if(a.abortEarly)return s.finalize(t,[w],f);p.push(w)}}if(_.validate){const h=_.validate(t,f);if(h&&(r.mainstay.tracer.value(r,"base",t,h.value),t=h.value,h.errors)){if(!Array.isArray(h.errors))return p.push(h.errors),s.finalize(t,p,f);if(h.errors.length)return p.push(...h.errors),s.finalize(t,p,f)}}return o._rules.length?s.rules(t,p,f):s.finalize(t,p,f)},s.rules=function(t,o,r){const{schema:a,state:u,prefs:d}=r;for(const f of a._rules){const _=a._definition.rules[f.method];if(_.convert&&d.convert){u.mainstay.tracer.log(a,u,"rule",f.name,"full");continue}let y,c=f.args;if(f._resolve.length){c=Object.assign({},c);for(const h of f._resolve){const w=_.argsByName.get(h),A=c[h].resolve(t,u,d),C=w.normalize?w.normalize(A):A,R=e.validateArg(C,null,w);if(R){y=a.$_createError("any.ref",A,{arg:h,ref:c[h],reason:R},u,d);break}c[h]=C}}y=y||_.validate(t,r,c,f);const p=s.rule(y,f);if(p.errors){if(u.mainstay.tracer.log(a,u,"rule",f.name,"error"),f.warn){u.mainstay.warnings.push(...p.errors);continue}if(d.abortEarly)return s.finalize(t,p.errors,r);o.push(...p.errors)}else u.mainstay.tracer.log(a,u,"rule",f.name,"pass"),u.mainstay.tracer.value(u,"rule",t,p.value,f.name),t=p.value}return s.finalize(t,o,r)},s.rule=function(t,o){return t instanceof n.Report?(s.error(t,o),{errors:[t],value:null}):Array.isArray(t)&&t[e.symbols.errors]?(t.forEach(r=>s.error(r,o)),{errors:t,value:null}):{errors:null,value:t}},s.error=function(t,o){return o.message&&t._setTemplate(o.message),t},s.finalize=function(t,o,r){o=o||[];const{schema:a,state:u,prefs:d}=r;if(o.length){const _=s.default("failover",void 0,o,r);_!==void 0&&(u.mainstay.tracer.value(u,"failover",t,_),t=_,o=[])}if(o.length&&a._flags.error)if(typeof a._flags.error=="function"){o=a._flags.error(o),Array.isArray(o)||(o=[o]);for(const _ of o)l(_ instanceof Error||_ instanceof n.Report,"error() must return an Error object")}else o=[a._flags.error];if(t===void 0){const _=s.default("default",t,o,r);u.mainstay.tracer.value(u,"default",t,_),t=_}if(a._flags.cast&&t!==void 0){const _=a._definition.cast[a._flags.cast];if(_.from(t)){const y=_.to(t,r);u.mainstay.tracer.value(u,"cast",t,y,a._flags.cast),t=y}}if(a.$_terms.externals&&d.externals&&d._externals!==!1)for(const{method:_}of a.$_terms.externals)u.mainstay.externals.push({method:_,schema:a,state:u,label:n.label(a._flags,u,d)});const f={value:t,errors:o.length?o:null};return a._flags.result&&(f.value=a._flags.result==="strip"?void 0:r.original,u.mainstay.tracer.value(u,a._flags.result,t,f.value),u.shadow(t,a._flags.result)),a._cache&&d.cache!==!1&&!a._refs.length&&a._cache.set(r.original,f),t===void 0||f.errors||a._flags.artifact===void 0||(u.mainstay.artifacts=u.mainstay.artifacts||new Map,u.mainstay.artifacts.has(a._flags.artifact)||u.mainstay.artifacts.set(a._flags.artifact,[]),u.mainstay.artifacts.get(a._flags.artifact).push(u.path)),f},s.prefs=function(t,o){const r=o===e.defaults;return r&&t._preferences[e.symbols.prefs]?t._preferences[e.symbols.prefs]:(o=e.preferences(o,t._preferences),r&&(t._preferences[e.symbols.prefs]=o),o)},s.default=function(t,o,r,a){const{schema:u,state:d,prefs:f}=a,_=u._flags[t];if(f.noDefaults||_===void 0)return o;if(d.mainstay.tracer.log(u,d,"rule",t,"full"),!_)return _;if(typeof _=="function"){const y=_.length?[b(d.ancestors[0]),a]:[];try{return _(...y)}catch(c){return void r.push(u.$_createError(`any.${t}`,null,{error:c},d,f))}}return typeof _!="object"?_:_[e.symbols.literal]?_.literal:e.isResolvable(_)?_.resolve(o,d,f):b(_)},s.trim=function(t,o){if(typeof t!="string")return t;const r=o.$_getRule("trim");return r&&r.args.enabled?t.trim():t},s.ignore={active:!1,debug:g,entry:g,filter:g,log:g,resolve:g,value:g},s.errorsArray=function(){const t=[];return t[e.symbols.errors]=!0,t}},2036:(E,x,v)=>{const l=v(375),b=v(9474),g=v(8160),m={};E.exports=m.Values=class{constructor(e,n){this._values=new Set(e),this._refs=new Set(n),this._lowercase=m.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,n){g.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),n&&n.register(e)):this.has(e,null,null,!1)||(this._values.add(e),typeof e=="string"&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,n,i){if(e=e||new m.Values,n){if(n._override)return n.clone();for(const s of[...n._values,...n._refs])e.add(s)}if(i)for(const s of[...i._values,...i._refs])e.remove(s);return e.length?e:null}remove(e){g.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),typeof e=="string"&&this._lowercase.delete(e.toLowerCase()))}has(e,n,i,s){return!!this.get(e,n,i,s)}get(e,n,i,s){if(!this.length)return!1;if(this._values.has(e))return{value:e};if(typeof e=="string"&&e&&s){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&typeof e!="object")return!1;if(typeof e=="object"){for(const t of this._values)if(b(t,e))return{value:t}}if(n)for(const t of this._refs){const o=t.resolve(e,n,i,null,{in:!0});if(o===void 0)continue;const r=t.in&&typeof o=="object"?Array.isArray(o)?o:Object.keys(o):[o];for(const a of r)if(typeof a==typeof e){if(s&&e&&typeof e=="string"){if(a.toLowerCase()===e.toLowerCase())return{value:a,ref:t}}else if(b(a,e))return{value:a,ref:t}}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const n=[];for(const i of[...this._values,...this._refs])i!==void 0&&n.push(i);return n}return Array.from([...this._values,...this._refs])}clone(){const e=new m.Values(this._values,this._refs);return e._override=this._override,e}concat(e){l(!e._override,"Cannot concat override set of values");const n=new m.Values([...this._values,...e._values],[...this._refs,...e._refs]);return n._override=this._override,n}describe(){const e=[];this._override&&e.push({override:!0});for(const n of this._values.values())e.push(n&&typeof n=="object"?{value:n}:n);for(const n of this._refs.values())e.push(n.describe());return e}},m.Values.prototype[g.symbols.values]=!0,m.Values.prototype.slice=m.Values.prototype.clone,m.lowercases=function(e){const n=new Map;if(e)for(const i of e)typeof i=="string"&&n.set(i.toLowerCase(),i);return n}},978:(E,x,v)=>{const l=v(375),b=v(8571),g=v(1687),m=v(9621),e={};E.exports=function(n,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(l(n&&typeof n=="object","Invalid defaults value: must be an object"),l(!i||i===!0||typeof i=="object","Invalid source value: must be true, falsy or an object"),l(typeof s=="object","Invalid options: must be an object"),!i)return null;if(s.shallow)return e.applyToDefaultsWithShallow(n,i,s);const t=b(n);if(i===!0)return t;const o=s.nullOverride!==void 0&&s.nullOverride;return g(t,i,{nullOverride:o,mergeArrays:!1})},e.applyToDefaultsWithShallow=function(n,i,s){const t=s.shallow;l(Array.isArray(t),"Invalid keys");const o=new Map,r=i===!0?null:new Set;for(let d of t){d=Array.isArray(d)?d:d.split(".");const f=m(n,d);f&&typeof f=="object"?o.set(f,r&&m(i,d)||f):r&&r.add(d)}const a=b(n,{},o);if(!r)return a;for(const d of r)e.reachCopy(a,i,d);const u=s.nullOverride!==void 0&&s.nullOverride;return g(a,i,{nullOverride:u,mergeArrays:!1})},e.reachCopy=function(n,i,s){for(const r of s){if(!(r in i))return;const a=i[r];if(typeof a!="object"||a===null)return;i=a}const t=i;let o=n;for(let r=0;r<s.length-1;++r){const a=s[r];typeof o[a]!="object"&&(o[a]={}),o=o[a]}o[s[s.length-1]]=t}},375:(E,x,v)=>{const l=v(7916);E.exports=function(b){if(!b){for(var g=arguments.length,m=new Array(g>1?g-1:0),e=1;e<g;e++)m[e-1]=arguments[e];throw m.length===1&&m[0]instanceof Error?m[0]:new l(m)}}},8571:(E,x,v)=>{const l=v(9621),b=v(4277),g=v(7043),m={needsProtoHack:new Set([b.set,b.map,b.weakSet,b.weakMap])};E.exports=m.clone=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof e!="object"||e===null)return e;let s=m.clone,t=i;if(n.shallow){if(n.shallow!==!0)return m.cloneWithShallow(e,n);s=u=>u}else if(t){const u=t.get(e);if(u)return u}else t=new Map;const o=b.getInternalProto(e);if(o===b.buffer)return!1;if(o===b.date)return new Date(e.getTime());if(o===b.regex)return new RegExp(e);const r=m.base(e,o,n);if(r===e)return e;if(t&&t.set(e,r),o===b.set)for(const u of e)r.add(s(u,n,t));else if(o===b.map)for(const[u,d]of e)r.set(u,s(d,n,t));const a=g.keys(e,n);for(const u of a){if(u==="__proto__")continue;if(o===b.array&&u==="length"){r.length=e.length;continue}const d=Object.getOwnPropertyDescriptor(e,u);d?d.get||d.set?Object.defineProperty(r,u,d):d.enumerable?r[u]=s(e[u],n,t):Object.defineProperty(r,u,{enumerable:!1,writable:!0,configurable:!0,value:s(e[u],n,t)}):Object.defineProperty(r,u,{enumerable:!0,writable:!0,configurable:!0,value:s(e[u],n,t)})}return r},m.cloneWithShallow=function(e,n){const i=n.shallow;(n=Object.assign({},n)).shallow=!1;const s=new Map;for(const t of i){const o=l(e,t);typeof o!="object"&&typeof o!="function"||s.set(o,o)}return m.clone(e,n,s)},m.base=function(e,n,i){if(i.prototype===!1)return m.needsProtoHack.has(n)?new n.constructor:n===b.array?[]:{};const s=Object.getPrototypeOf(e);if(s&&s.isImmutable)return e;if(n===b.array){const t=[];return s!==n&&Object.setPrototypeOf(t,s),t}if(m.needsProtoHack.has(n)){const t=new s.constructor;return s!==n&&Object.setPrototypeOf(t,s),t}return Object.create(s)}},9474:(E,x,v)=>{const l=v(4277),b={mismatched:null};E.exports=function(g,m,e){return e=Object.assign({prototype:!0},e),!!b.isDeepEqual(g,m,e,[])},b.isDeepEqual=function(g,m,e,n){if(g===m)return g!==0||1/g==1/m;const i=typeof g;if(i!==typeof m||g===null||m===null)return!1;if(i==="function"){if(!e.deepFunction||g.toString()!==m.toString())return!1}else if(i!=="object")return g!=g&&m!=m;const s=b.getSharedType(g,m,!!e.prototype);switch(s){case l.buffer:return!1;case l.promise:return g===m;case l.regex:return g.toString()===m.toString();case b.mismatched:return!1}for(let t=n.length-1;t>=0;--t)if(n[t].isSame(g,m))return!0;n.push(new b.SeenEntry(g,m));try{return!!b.isDeepEqualObj(s,g,m,e,n)}finally{n.pop()}},b.getSharedType=function(g,m,e){if(e)return Object.getPrototypeOf(g)!==Object.getPrototypeOf(m)?b.mismatched:l.getInternalProto(g);const n=l.getInternalProto(g);return n!==l.getInternalProto(m)?b.mismatched:n},b.valueOf=function(g){const m=g.valueOf;if(m===void 0)return g;try{return m.call(g)}catch(e){return e}},b.hasOwnEnumerableProperty=function(g,m){return Object.prototype.propertyIsEnumerable.call(g,m)},b.isSetSimpleEqual=function(g,m){for(const e of Set.prototype.values.call(g))if(!Set.prototype.has.call(m,e))return!1;return!0},b.isDeepEqualObj=function(g,m,e,n,i){const{isDeepEqual:s,valueOf:t,hasOwnEnumerableProperty:o}=b,{keys:r,getOwnPropertySymbols:a}=Object;if(g===l.array){if(!n.part){if(m.length!==e.length)return!1;for(let y=0;y<m.length;++y)if(!s(m[y],e[y],n,i))return!1;return!0}for(const y of m)for(const c of e)if(s(y,c,n,i))return!0}else if(g===l.set){if(m.size!==e.size)return!1;if(!b.isSetSimpleEqual(m,e)){const y=new Set(Set.prototype.values.call(e));for(const c of Set.prototype.values.call(m)){if(y.delete(c))continue;let p=!1;for(const h of y)if(s(c,h,n,i)){y.delete(h),p=!0;break}if(!p)return!1}}}else if(g===l.map){if(m.size!==e.size)return!1;for(const[y,c]of Map.prototype.entries.call(m))if(c===void 0&&!Map.prototype.has.call(e,y)||!s(c,Map.prototype.get.call(e,y),n,i))return!1}else if(g===l.error&&(m.name!==e.name||m.message!==e.message))return!1;const u=t(m),d=t(e);if((m!==u||e!==d)&&!s(u,d,n,i))return!1;const f=r(m);if(!n.part&&f.length!==r(e).length&&!n.skip)return!1;let _=0;for(const y of f)if(n.skip&&n.skip.includes(y))e[y]===void 0&&++_;else if(!o(e,y)||!s(m[y],e[y],n,i))return!1;if(!n.part&&f.length-_!==r(e).length)return!1;if(n.symbols!==!1){const y=a(m),c=new Set(a(e));for(const p of y){if(!n.skip||!n.skip.includes(p)){if(o(m,p)){if(!o(e,p)||!s(m[p],e[p],n,i))return!1}else if(o(e,p))return!1}c.delete(p)}for(const p of c)if(o(e,p))return!1}return!0},b.SeenEntry=class{constructor(g,m){this.obj=g,this.ref=m}isSame(g,m){return this.obj===g&&this.ref===m}}},7916:(E,x,v)=>{const l=v(8761);E.exports=class extends Error{constructor(b){super(b.filter(g=>g!=="").map(g=>typeof g=="string"?g:g instanceof Error?g.message:l(g)).join(" ")||"Unknown error"),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,x.assert)}}},5277:E=>{const x={};E.exports=function(v){if(!v)return"";let l="";for(let b=0;b<v.length;++b){const g=v.charCodeAt(b);x.isSafe(g)?l+=v[b]:l+=x.escapeHtmlChar(g)}return l},x.escapeHtmlChar=function(v){return x.namedHtml.get(v)||(v>=256?"&#"+v+";":`&#x${v.toString(16).padStart(2,"0")};`)},x.isSafe=function(v){return x.safeCharCodes.has(v)},x.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),x.safeCharCodes=function(){const v=new Set;for(let l=32;l<123;++l)(l>=97||l>=65&&l<=90||l>=48&&l<=57||l===32||l===46||l===44||l===45||l===58||l===95)&&v.add(l);return v}()},6064:E=>{E.exports=function(x){return x.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:E=>{E.exports=function(){}},1687:(E,x,v)=>{const l=v(375),b=v(8571),g=v(7043),m={};E.exports=m.merge=function(e,n,i){if(l(e&&typeof e=="object","Invalid target value: must be an object"),l(n==null||typeof n=="object","Invalid source value: must be null, undefined, or an object"),!n)return e;if(i=Object.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(n)){l(Array.isArray(e),"Cannot merge array onto an object"),i.mergeArrays||(e.length=0);for(let t=0;t<n.length;++t)e.push(b(n[t],{symbols:i.symbols}));return e}const s=g.keys(n,i);for(let t=0;t<s.length;++t){const o=s[t];if(o==="__proto__"||!Object.prototype.propertyIsEnumerable.call(n,o))continue;const r=n[o];if(r&&typeof r=="object"){if(e[o]===r)continue;!e[o]||typeof e[o]!="object"||Array.isArray(e[o])!==Array.isArray(r)||r instanceof Date||r instanceof RegExp?e[o]=b(r,{symbols:i.symbols}):m.merge(e[o],r,i)}else(r!=null||i.nullOverride)&&(e[o]=r)}return e}},9621:(E,x,v)=>{const l=v(375),b={};E.exports=function(g,m,e){if(m===!1||m==null)return g;typeof(e=e||{})=="string"&&(e={separator:e});const n=Array.isArray(m);l(!n||!e.separator,"Separator option is not valid for array-based chain");const i=n?m:m.split(e.separator||".");let s=g;for(let t=0;t<i.length;++t){let o=i[t];const r=e.iterables&&b.iterables(s);if(Array.isArray(s)||r==="set"){const a=Number(o);Number.isInteger(a)&&(o=a<0?s.length+a:a)}if(!s||typeof s=="function"&&e.functions===!1||!r&&s[o]===void 0){l(!e.strict||t+1===i.length,"Missing segment",o,"in reach path ",m),l(typeof s=="object"||e.functions===!0||typeof s!="function","Invalid segment",o,"in reach path ",m),s=e.default;break}s=r?r==="set"?[...s][o]:s.get(o):s[o]}return s},b.iterables=function(g){return g instanceof Set?"set":g instanceof Map?"map":void 0}},8761:E=>{E.exports=function(){try{return JSON.stringify(...arguments)}catch(x){return"[Cannot display object: "+x.message+"]"}}},4277:(E,x)=>{const v={};x=E.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},v.typeMap=new Map([["[object Error]",x.error],["[object Map]",x.map],["[object Promise]",x.promise],["[object Set]",x.set],["[object WeakMap]",x.weakMap],["[object WeakSet]",x.weakSet]]),x.getInternalProto=function(l){if(Array.isArray(l))return x.array;if(l instanceof Date)return x.date;if(l instanceof RegExp)return x.regex;if(l instanceof Error)return x.error;const b=Object.prototype.toString.call(l);return v.typeMap.get(b)||x.generic}},7043:(E,x)=>{x.keys=function(v){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).symbols!==!1?Reflect.ownKeys(v):Object.getOwnPropertyNames(v)}},3652:(E,x,v)=>{const l=v(375),b={};x.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(g,m){const e=[].concat((m=m||{}).before||[]),n=[].concat(m.after||[]),i=m.group||"?",s=m.sort||0;l(!e.includes(i),`Item cannot come before itself: ${i}`),l(!e.includes("?"),"Item cannot come before unassociated items"),l(!n.includes(i),`Item cannot come after itself: ${i}`),l(!n.includes("?"),"Item cannot come after unassociated items"),Array.isArray(g)||(g=[g]);for(const t of g){const o={seq:this._items.length,sort:s,before:e,after:n,group:i,node:t};this._items.push(o)}if(!m.manual){const t=this._sort();l(t,"item",i!=="?"?`added into group ${i}`:"","created a dependencies error")}return this.nodes}merge(g){Array.isArray(g)||(g=[g]);for(const e of g)if(e)for(const n of e._items)this._items.push(Object.assign({},n));this._items.sort(b.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const m=this._sort();return l(m,"merge created a dependencies error"),this.nodes}sort(){const g=this._sort();return l(g,"sort created a dependencies error"),this.nodes}_sort(){const g={},m=Object.create(null),e=Object.create(null);for(const o of this._items){const r=o.seq,a=o.group;e[a]=e[a]||[],e[a].push(r),g[r]=o.before;for(const u of o.after)m[u]=m[u]||[],m[u].push(r)}for(const o in g){const r=[];for(const a in g[o]){const u=g[o][a];e[u]=e[u]||[],r.push(...e[u])}g[o]=r}for(const o in m)if(e[o])for(const r of e[o])g[r].push(...m[o]);const n={};for(const o in g){const r=g[o];for(const a of r)n[a]=n[a]||[],n[a].push(o)}const i={},s=[];for(let o=0;o<this._items.length;++o){let r=o;if(n[o]){r=null;for(let a=0;a<this._items.length;++a){if(i[a]===!0)continue;n[a]||(n[a]=[]);const u=n[a].length;let d=0;for(let f=0;f<u;++f)i[n[a][f]]&&++d;if(d===u){r=a;break}}}r!==null&&(i[r]=!0,s.push(r))}if(s.length!==this._items.length)return!1;const t={};for(const o of this._items)t[o.seq]=o;this._items=[],this.nodes=[];for(const o of s){const r=t[o];this.nodes.push(r.node),this._items.push(r)}return!0}},b.mergeSort=(g,m)=>g.sort===m.sort?0:g.sort<m.sort?-1:1},5380:(E,x,v)=>{const l=v(443),b=v(2178),g={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:l.URL||URL};x.analyze=function(m){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!m)return b.code("DOMAIN_NON_EMPTY_STRING");if(typeof m!="string")throw new Error("Invalid input: domain must be a string");if(m.length>256)return b.code("DOMAIN_TOO_LONG");if(g.nonAsciiRx.test(m)){if(e.allowUnicode===!1)return b.code("DOMAIN_INVALID_UNICODE_CHARS");m=m.normalize("NFC")}if(g.domainControlRx.test(m))return b.code("DOMAIN_INVALID_CHARS");m=g.punycode(m),e.allowFullyQualified&&m[m.length-1]==="."&&(m=m.slice(0,-1));const n=e.minDomainSegments||g.minDomainSegments,i=m.split(".");if(i.length<n)return b.code("DOMAIN_SEGMENTS_COUNT");if(e.maxDomainSegments&&i.length>e.maxDomainSegments)return b.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=e.tlds;if(s){const t=i[i.length-1].toLowerCase();if(s.deny&&s.deny.has(t)||s.allow&&!s.allow.has(t))return b.code("DOMAIN_FORBIDDEN_TLDS")}for(let t=0;t<i.length;++t){const o=i[t];if(!o.length)return b.code("DOMAIN_EMPTY_SEGMENT");if(o.length>63)return b.code("DOMAIN_LONG_SEGMENT");if(t<i.length-1){if(!g.domainSegmentRx.test(o))return b.code("DOMAIN_INVALID_CHARS")}else if(!g.tldSegmentRx.test(o))return b.code("DOMAIN_INVALID_TLDS_CHARS")}return null},x.isValid=function(m,e){return!x.analyze(m,e)},g.punycode=function(m){m.includes("%")&&(m=m.replace(/%/g,"%25"));try{return new g.URL(`http://${m}`).host}catch{return m}}},1745:(E,x,v)=>{const l=v(9848),b=v(5380),g=v(2178),m={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(l.TextEncoder||TextEncoder)};x.analyze=function(e,n){return m.email(e,n)},x.isValid=function(e,n){return!m.email(e,n)},m.email=function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e!="string")throw new Error("Invalid input: email must be a string");if(!e)return g.code("EMPTY_STRING");const i=!m.nonAsciiRx.test(e);if(!i){if(n.allowUnicode===!1)return g.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const s=e.split("@");if(s.length!==2)return s.length>2?g.code("MULTIPLE_AT_CHAR"):g.code("MISSING_AT_CHAR");const[t,o]=s;if(!t)return g.code("EMPTY_LOCAL");if(!n.ignoreLength){if(e.length>254)return g.code("ADDRESS_TOO_LONG");if(m.encoder.encode(t).length>64)return g.code("LOCAL_TOO_LONG")}return m.local(t,i)||b.analyze(o,n)},m.local=function(e,n){const i=e.split(".");for(const s of i){if(!s.length)return g.code("EMPTY_LOCAL_SEGMENT");if(n){if(!m.atextRx.test(s))return g.code("INVALID_LOCAL_CHARS")}else for(const t of s){if(m.atextRx.test(t))continue;const o=m.binary(t);if(!m.atomRx.test(o))return g.code("INVALID_LOCAL_CHARS")}}},m.binary=function(e){return Array.from(m.encoder.encode(e)).map(n=>String.fromCharCode(n)).join("")},m.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,m.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(E,x)=>{x.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},x.code=function(v){return{code:v,error:x.codes[v]}}},9959:(E,x,v)=>{const l=v(375),b=v(5752);x.regex=function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};l(g.cidr===void 0||typeof g.cidr=="string","options.cidr must be a string");const m=g.cidr?g.cidr.toLowerCase():"optional";l(["required","optional","forbidden"].includes(m),"options.cidr must be one of required, optional, forbidden"),l(g.version===void 0||typeof g.version=="string"||Array.isArray(g.version),"options.version must be a string or an array of string");let e=g.version||["ipv4","ipv6","ipvfuture"];Array.isArray(e)||(e=[e]),l(e.length>=1,"options.version must have at least 1 version specified");for(let s=0;s<e.length;++s)l(typeof e[s]=="string","options.version must only contain strings"),e[s]=e[s].toLowerCase(),l(["ipv4","ipv6","ipvfuture"].includes(e[s]),"options.version contains unknown version "+e[s]+" - must be one of ipv4, ipv6, ipvfuture");e=Array.from(new Set(e));const n=`(?:${e.map(s=>{if(m==="forbidden")return b.ip[s];const t=`\\/${s==="ipv4"?b.ip.v4Cidr:b.ip.v6Cidr}`;return m==="required"?`${b.ip[s]}${t}`:`${b.ip[s]}(?:${t})?`}).join("|")})`,i=new RegExp(`^${n}$`);return{cidr:m,versions:e,regex:i,raw:n}}},5752:(E,x,v)=>{const l=v(375),b=v(6064),g={generate:function(){const m={},e="\\dA-Fa-f",n="["+e+"]",i="\\w-\\.~",s="!\\$&'\\(\\)\\*\\+,;=",t="%"+e,o=i+t+s+":@",r="["+o+"]",a="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";m.ipv4address="(?:"+a+"\\.){3}"+a;const u=n+"{1,4}",d="(?:"+u+":"+u+"|"+m.ipv4address+")",f="(?:"+u+":){6}"+d,_="::(?:"+u+":){5}"+d,y="(?:"+u+")?::(?:"+u+":){4}"+d,c="(?:(?:"+u+":){0,1}"+u+")?::(?:"+u+":){3}"+d,p="(?:(?:"+u+":){0,2}"+u+")?::(?:"+u+":){2}"+d,h="(?:(?:"+u+":){0,3}"+u+")?::"+u+":"+d,w="(?:(?:"+u+":){0,4}"+u+")?::"+d,A="(?:(?:"+u+":){0,5}"+u+")?::"+u,C="(?:(?:"+u+":){0,6}"+u+")?::";m.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",m.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",m.ipv6address="(?:"+f+"|"+_+"|"+y+"|"+c+"|"+p+"|"+h+"|"+w+"|"+A+"|"+C+")",m.ipvFuture="v"+n+"+\\.["+i+s+":]+",m.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",m.schemeRegex=new RegExp(m.scheme);const R="["+i+t+s+":]*",j="["+i+t+s+"]{1,255}",B="(?:\\[(?:"+m.ipv6address+"|"+m.ipvFuture+")\\]|"+m.ipv4address+"|"+j+")",O="(?:"+R+"@)?"+B+"(?::\\d*)?",L="(?:"+R+"@)?("+B+")(?::\\d*)?",N=r+"*",U=r+"+",I="(?:\\/"+N+")*",M="\\/(?:"+U+I+")?",z=U+I,P="["+i+t+s+"@]+"+I,K="(?:\\/\\/\\/"+N+I+")";return m.hierPart="(?:(?:\\/\\/"+O+I+")|"+M+"|"+z+"|"+K+")",m.hierPartCapture="(?:(?:\\/\\/"+L+I+")|"+M+"|"+z+")",m.relativeRef="(?:(?:\\/\\/"+O+I+")|"+M+"|"+P+"|)",m.relativeRefCapture="(?:(?:\\/\\/"+L+I+")|"+M+"|"+P+"|)",m.query="["+o+"\\/\\?]*(?=#|$)",m.queryWithSquareBrackets="["+o+"\\[\\]\\/\\?]*(?=#|$)",m.fragment="["+o+"\\/\\?]*",m}};g.rfc3986=g.generate(),x.ip={v4Cidr:g.rfc3986.ipv4Cidr,v6Cidr:g.rfc3986.ipv6Cidr,ipv4:g.rfc3986.ipv4address,ipv6:g.rfc3986.ipv6address,ipvfuture:g.rfc3986.ipvFuture},g.createRegex=function(m){const e=g.rfc3986,n="(?:\\?"+(m.allowQuerySquareBrackets?e.queryWithSquareBrackets:e.query)+")?(?:#"+e.fragment+")?",i=m.domain?e.relativeRefCapture:e.relativeRef;if(m.relativeOnly)return g.wrap(i+n);let s="";if(m.scheme){l(m.scheme instanceof RegExp||typeof m.scheme=="string"||Array.isArray(m.scheme),"scheme must be a RegExp, String, or Array");const r=[].concat(m.scheme);l(r.length>=1,"scheme must have at least 1 scheme specified");const a=[];for(let u=0;u<r.length;++u){const d=r[u];l(d instanceof RegExp||typeof d=="string","scheme at position "+u+" must be a RegExp or String"),d instanceof RegExp?a.push(d.source.toString()):(l(e.schemeRegex.test(d),"scheme at position "+u+" must be a valid scheme"),a.push(b(d)))}s=a.join("|")}const t="(?:"+(s?"(?:"+s+")":e.scheme)+":"+(m.domain?e.hierPartCapture:e.hierPart)+")",o=m.allowRelative?"(?:"+t+"|"+i+")":t;return g.wrap(o+n,s)},g.wrap=function(m,e){return{raw:m=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${m}`,regex:new RegExp(`^${m}$`),scheme:e}},g.uriRegex=g.createRegex({}),x.regex=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return m.scheme||m.allowRelative||m.relativeOnly||m.allowQuerySquareBrackets||m.domain?g.createRegex(m):g.uriRegex}},1447:(E,x)=>{const v={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};x.Parser=class{constructor(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b[v.settings]&&b.constants)for(const g in b.constants){const m=b.constants[g];if(m!==null&&!["boolean","number","string"].includes(typeof m))throw new Error(`Formula constant ${g} contains invalid ${typeof m} value type`)}this.settings=b[v.settings]?b:Object.assign({[v.settings]:!0,constants:{},functions:{}},b),this.single=null,this._parts=null,this._parse(l)}_parse(l){let b=[],g="",m=0,e=!1;const n=s=>{if(m)throw new Error("Formula missing closing parenthesis");const t=b.length?b[b.length-1]:null;if(e||g||s){if(t&&t.type==="reference"&&s===")")return t.type="function",t.value=this._subFormula(g,t.value),void(g="");if(s===")"){const o=new x.Parser(g,this.settings);b.push({type:"segment",value:o})}else if(e){if(e==="]")return b.push({type:"reference",value:g}),void(g="");b.push({type:"literal",value:g})}else if(v.operatorCharacters.includes(g))t&&t.type==="operator"&&v.operators.includes(t.value+g)?t.value+=g:b.push({type:"operator",value:g});else if(g.match(v.numberRx))b.push({type:"constant",value:parseFloat(g)});else if(this.settings.constants[g]!==void 0)b.push({type:"constant",value:this.settings.constants[g]});else{if(!g.match(v.tokenRx))throw new Error(`Formula contains invalid token: ${g}`);b.push({type:"reference",value:g})}g=""}};for(const s of l)e?s===e?(n(),e=!1):g+=s:m?s==="("?(g+=s,++m):s===")"?(--m,m?g+=s:n(s)):g+=s:s in v.literals?e=v.literals[s]:s==="("?(n(),++m):v.operatorCharacters.includes(s)?(n(),g=s,n()):s!==" "?g+=s:n();n(),b=b.map((s,t)=>s.type!=="operator"||s.value!=="-"||t&&b[t-1].type!=="operator"?s:{type:"operator",value:"n"});let i=!1;for(const s of b){if(s.type==="operator"){if(v.operatorsPrefix.includes(s.value))continue;if(!i)throw new Error("Formula contains an operator in invalid position");if(!v.operators.includes(s.value))throw new Error(`Formula contains an unknown operator ${s.value}`)}else if(i)throw new Error("Formula missing expected operator");i=!i}if(!i)throw new Error("Formula contains invalid trailing operator");b.length===1&&["reference","literal","constant"].includes(b[0].type)&&(this.single={type:b[0].type==="reference"?"reference":"value",value:b[0].value}),this._parts=b.map(s=>{if(s.type==="operator")return v.operatorsPrefix.includes(s.value)?s:s.value;if(s.type!=="reference")return s.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(s.value))throw new Error(`Formula contains invalid reference ${s.value}`);return this.settings.reference?this.settings.reference(s.value):v.reference(s.value)})}_subFormula(l,b){const g=this.settings.functions[b];if(typeof g!="function")throw new Error(`Formula contains unknown function ${b}`);let m=[];if(l){let e="",n=0,i=!1;const s=()=>{if(!e)throw new Error(`Formula contains function ${b} with invalid arguments ${l}`);m.push(e),e=""};for(let t=0;t<l.length;++t){const o=l[t];i?(e+=o,o===i&&(i=!1)):o in v.literals&&!n?(e+=o,i=v.literals[o]):o!==","||n?(e+=o,o==="("?++n:o===")"&&--n):s()}s()}return m=m.map(e=>new x.Parser(e,this.settings)),function(e){const n=[];for(const i of m)n.push(i.evaluate(e));return g.call(e,...n)}}evaluate(l){const b=this._parts.slice();for(let g=b.length-2;g>=0;--g){const m=b[g];if(m&&m.type==="operator"){const e=b[g+1];b.splice(g+1,1);const n=v.evaluate(e,l);b[g]=v.single(m.value,n)}}return v.operatorsOrder.forEach(g=>{for(let m=1;m<b.length-1;)if(g.includes(b[m])){const e=b[m],n=v.evaluate(b[m-1],l),i=v.evaluate(b[m+1],l);b.splice(m,2);const s=v.calculate(e,n,i);b[m-1]=s===0?0:s}else m+=2}),v.evaluate(b[0],l)}},x.Parser.prototype[v.symbol]=!0,v.reference=function(l){return function(b){return b&&b[l]!==void 0?b[l]:null}},v.evaluate=function(l,b){return l===null?null:typeof l=="function"?l(b):l[v.symbol]?l.evaluate(b):l},v.single=function(l,b){if(l==="!")return!b;const g=-b;return g===0?0:g},v.calculate=function(l,b,g){if(l==="??")return v.exists(b)?b:g;if(typeof b=="string"||typeof g=="string"){if(l==="+")return(b=v.exists(b)?b:"")+(v.exists(g)?g:"")}else switch(l){case"^":return Math.pow(b,g);case"*":return b*g;case"/":return b/g;case"%":return b%g;case"+":return b+g;case"-":return b-g}switch(l){case"<":return b<g;case"<=":return b<=g;case">":return b>g;case">=":return b>=g;case"==":return b===g;case"!=":return b!==g;case"&&":return b&&g;case"||":return b||g}return null},v.exists=function(l){return l!=null}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:E=>{E.exports=JSON.parse('{"version":"17.11.0"}')}},S={},function E(x){var v=S[x];if(v!==void 0)return v.exports;var l=S[x]={exports:{}};return F[x](l,l.exports,E),l.exports}(5107);var F,S})})(oe);const se=oe.exports,be=`:host {
  display: block;
}

* {
  box-sizing: border-box;
}

button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  color: inherit;
  margin: 0px;
  padding: 0px;
}

h1,
h2,
h3,
h4,
h5,
h6,
p,
span {
  margin: 0;
}

hr {
  border: 0;
  border-top: 1px solid #e5e7eb;
}

.mt-1\\.5 {
  margin-top: 0.375rem;
}

.mt-2 {
  margin-top: 0.5rem;
}

.gap-1 {
  gap: 0.25rem;
}

.flex {
  display: flex;
}

.items-center {
  align-items: center;
}

.block {
  display: block;
}

.text-6b7280 {
  color: #6b7280;
}

.text-ef4444 {
  color: #ef4444;
}

.text-sm {
  font-size: 0.875rem;
  /* 14px */
  line-height: 1.25rem;
  /* 20px */
}

.pr-6 {
  padding-right: 1.5rem;
}

.text-base {
  font-size: 1rem;
  /* 16px */
  line-height: 1.5rem;
  /* 24px */
}

.text-right {
  text-align: right;
}

.mr-1 {
  margin-right: 0.25em;
}

.mr-2 {
  margin-right: 0.5em;
}

select,
input:not([type='checkbox']):not([type='radio']) {
  display: block;
  width: 100%;
  height: 32px;
  padding: 6px 12px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

.h-8 {
  height: 2rem;
  /* 32px */
}

.leading-8 {
  line-height: 2rem;
  /* 32px */
}

select {
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 1rem center;
  background-size: 1em;
}

select:invalid {
  color: gray;
}

input::placeholder {
  color: gray;
}

.w-full {
  width: 100%;
}

.rounded-full {
  border-radius: 9999px;
}

.absolute {
  position: absolute;
}

.inline-block {
  display: inline-block;
}

.cursor-pointer {
  cursor: pointer;
}

.bg-white {
  background: white;
}

.opacity-100 {
  opacity: 1;
}

.opacity-0 {
  opacity: 0;
}

.relative {
  position: relative;
}

.whitespace-nowrap {
  white-space: nowrap;
}

.overflow-hidden {
  overflow: hidden;
}

.gap-2 {
  gap: 0.5rem;
}

.flex-1 {
  flex: 1 1 0%;
}

select:focus,
input:focus {
  outline: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
}

input[type='checkbox']:focus {
  outline: none;
}

input[type='radio']:focus {
  outline: none;
}

input[type='radio'] {
  accent-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
}

input[type='checkbox'] {
  accent-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
}

.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltip-text {
  visibility: hidden;
  width: auto;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 0 8px;
  position: absolute;
  z-index: 100000;
  top: 150%;
  left: 10px;
  margin-left: 0px;
  transform: translateX(-50%);
}

.tooltip::after {
  visibility: hidden;
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  top: 20px;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent black transparent;
}

.tooltip:hover::after {
  visibility: visible;
}

.tooltip:hover .tooltip-text {
  visibility: visible;
}

.icon {
  width: 16px;
  height: 16px;
  right: -6px;
  transition: all 0.2s ease-in-out;
}

.add {
  background-image: url('data:image/svg+xml;utf8,<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a9 9 0 100 18 9 9 0 000-18zM1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm12-5.5V11h4.5v2H13v4.5h-2V13H6.5v-2H11V6.5h2z" fill="%236b7280"></path></svg>');
  bottom: -3px;
}

.minus {
  background-image: url('data:image/svg+xml;utf8,<svg fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 3a9 9 0 100 18 9 9 0 000-18zM1 12C1 5.925 5.925 1 12 1s11 4.925 11 11-4.925 11-11 11S1 18.075 1 12zm5.5-1h11v2h-11v-2z" fill="%236b7280"></path></svg>');
  top: -3px;
}

.add:hover,
.minus:hover {
  transform: scale(1.1);
}

.button {
  border: none;
  display: inline-block;
  font-size: 14px;
  cursor: pointer;
  padding: 0 15px;
  height: 30px;
  line-height: 30px;
  border-radius: 3px;
}

:host {
  --omi-form-primary-hue: 142;
  --omi-form-primary-saturation: 50%;
  --omi-form-primary-lightness: 44%;
  --omi-form-primary-saturation-hover: 65%;
  --omi-form-primary-saturation-active: 35%;
}

.submit-button {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  color: white;
}

.reset-button {
  background-color: white;
  color: #000000e6;
  border: 1px solid #dddddd;
}

.submit-button:hover {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation-hover),
    var(--omi-form-primary-lightness)
  );
}

.submit-button:active {
  background-color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation-active),
    var(--omi-form-primary-lightness)
  );
}

.reset-button:hover {
  color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  border: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
}

.reset-button:active {
  color: hsl(
    var(--omi-form-primary-hue),
    var(--omi-form-primary-saturation),
    var(--omi-form-primary-lightness)
  );
  border: 1px solid
    hsl(
      var(--omi-form-primary-hue),
      var(--omi-form-primary-saturation),
      var(--omi-form-primary-lightness)
    );
  background-color: #dddddd51;
}

.grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 15px;
}

.col-span-1 {
  grid-column: span 1;
}

.col-span-2 {
  grid-column: span 2;
}

.col-span-3 {
  grid-column: span 3;
}

.col-span-4 {
  grid-column: span 4;
}

.col-span-5 {
  grid-column: span 5;
}

.col-span-6 {
  grid-column: span 6;
}

.col-span-7 {
  grid-column: span 7;
}

.col-span-8 {
  grid-column: span 8;
}

.col-span-9 {
  grid-column: span 9;
}

.col-span-10 {
  grid-column: span 10;
}

.col-span-11 {
  grid-column: span 11;
}

.col-span-12 {
  grid-column: span 12;
}

/* Small devices (landscape phones, 640px and up) */
@media (min-width: 640px) {
  .sm\\:col-span-1 {
    grid-column: span 1;
  }
  .sm\\:col-span-2 {
    grid-column: span 2;
  }
  .sm\\:col-span-3 {
    grid-column: span 3;
  }
  .sm\\:col-span-4 {
    grid-column: span 4;
  }
  .sm\\:col-span-5 {
    grid-column: span 5;
  }
  .sm\\:col-span-6 {
    grid-column: span 6;
  }
  .sm\\:col-span-7 {
    grid-column: span 7;
  }
  .sm\\:col-span-8 {
    grid-column: span 8;
  }
  .sm\\:col-span-9 {
    grid-column: span 9;
  }
  .sm\\:col-span-10 {
    grid-column: span 10;
  }
  .sm\\:col-span-11 {
    grid-column: span 11;
  }
  .sm\\:col-span-12 {
    grid-column: span 12;
  }

  /* Add other col-span classes for small devices as needed */
}

/* Medium devices (tablets, 768px and up) */
@media (min-width: 768px) {
  .md\\:col-span-1 {
    grid-column: span 1;
  }
  .md\\:col-span-2 {
    grid-column: span 2;
  }
  .md\\:col-span-3 {
    grid-column: span 3;
  }
  .md\\:col-span-4 {
    grid-column: span 4;
  }
  .md\\:col-span-5 {
    grid-column: span 5;
  }
  .md\\:col-span-6 {
    grid-column: span 6;
  }
  .md\\:col-span-7 {
    grid-column: span 7;
  }
  .md\\:col-span-8 {
    grid-column: span 8;
  }
  .md\\:col-span-9 {
    grid-column: span 9;
  }
  .md\\:col-span-10 {
    grid-column: span 10;
  }
  .md\\:col-span-11 {
    grid-column: span 11;
  }
  .md\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for medium devices as needed */
}

/* Large devices (desktops, 1024px and up) */
@media (min-width: 1024px) {
  .lg\\:col-span-1 {
    grid-column: span 1;
  }
  .lg\\:col-span-2 {
    grid-column: span 2;
  }
  .lg\\:col-span-3 {
    grid-column: span 3;
  }
  .lg\\:col-span-4 {
    grid-column: span 4;
  }
  .lg\\:col-span-5 {
    grid-column: span 5;
  }
  .lg\\:col-span-6 {
    grid-column: span 6;
  }
  .lg\\:col-span-7 {
    grid-column: span 7;
  }
  .lg\\:col-span-8 {
    grid-column: span 8;
  }
  .lg\\:col-span-9 {
    grid-column: span 9;
  }
  .lg\\:col-span-10 {
    grid-column: span 10;
  }
  .lg\\:col-span-11 {
    grid-column: span 11;
  }
  .lg\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for large devices as needed */
}

/* Extra large devices (large desktops, 1280px and up) */
@media (min-width: 1280px) {
  .xl\\:col-span-1 {
    grid-column: span 1;
  }
  .xl\\:col-span-2 {
    grid-column: span 2;
  }
  .xl\\:col-span-3 {
    grid-column: span 3;
  }
  .xl\\:col-span-4 {
    grid-column: span 4;
  }
  .xl\\:col-span-5 {
    grid-column: span 5;
  }
  .xl\\:col-span-6 {
    grid-column: span 6;
  }
  .xl\\:col-span-7 {
    grid-column: span 7;
  }
  .xl\\:col-span-8 {
    grid-column: span 8;
  }
  .xl\\:col-span-9 {
    grid-column: span 9;
  }
  .xl\\:col-span-10 {
    grid-column: span 10;
  }
  .xl\\:col-span-11 {
    grid-column: span 11;
  }
  .xl\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for extra large devices as needed */
}

/* Extra extra large devices (extra large desktops, 1536px and up) */
@media (min-width: 1536px) {
  .xxl\\:col-span-1 {
    grid-column: span 1;
  }
  .xxl\\:col-span-2 {
    grid-column: span 2;
  }
  .xxl\\:col-span-3 {
    grid-column: span 3;
  }
  .xxl\\:col-span-4 {
    grid-column: span 4;
  }
  .xxl\\:col-span-5 {
    grid-column: span 5;
  }
  .xxl\\:col-span-6 {
    grid-column: span 6;
  }
  .xxl\\:col-span-7 {
    grid-column: span 7;
  }
  .xxl\\:col-span-8 {
    grid-column: span 8;
  }
  .xxl\\:col-span-9 {
    grid-column: span 9;
  }
  .xxl\\:col-span-10 {
    grid-column: span 10;
  }
  .xxl\\:col-span-11 {
    grid-column: span 11;
  }
  .xxl\\:col-span-12 {
    grid-column: span 12;
  }
  /* Add other col-span classes for extra extra large devices as needed */
}

.group:hover .group-hover\\:opacity-100 {
  opacity: 1;
}
`,ye={en:{root:"value of form",custom:"{#message.en || #message}"},zh:{root:"表单值","number.base":"{#label} 必须是数字","number.min":"{#label} 最小值 {#limit}","number.max":"{#label} 最大值 {#limit}","any.required":"{#label} 是必须的","number.integer":"{#label} 必须是整数","string.uuid":"{#label} 必须是有效的 UUID","any.custom":"{#label} 未通过自定义验证","any.default":"{#label} 在运行默认方法时抛出错误","any.failover":"{#label} 在运行故障转移方法时抛出错误",custom:"{#message.zh || #message.en || #message}","any.invalid":"{#label} 包含无效值","any.only":"{#label} 必须与 {#valids} 相同","any.ref":"{#label} 引用了 {#ref}，它不是数字","any.unknown":"{#label} 不允许","object.with":'{#label} 缺少必需字段 "{#peer}"',"object.missing":'{#label} 缺少必需字段 "{#peers}"',"object.xor":"{#label} 包含冲突字段 {#peers}","alternatives.all":"{#label} 必须满足所有替代条件","alternatives.any":"{#label} 必须满足任一替代条件","alternatives.match":"{#label} 的类型不被允许","alternatives.one":"{#label} 只能满足一个替代条件","alternatives.types":"{#label} 的类型错误","array.base":"{#label} 必须是数组","array.excludes":"{#label} 包含不允许的值","array.includesRequiredBoth":"{#label} 必须同时包含指定的已知和未知值","array.includesRequiredKnowns":"{#label} 必须包含指定的已知值","array.includesRequiredUnknowns":"{#label} 必须包含指定的未知值","array.includes":"{#label} 必须包含指定值","array.length":"{#label} 的长度必须是 {#limit}","array.max":"{#label} 的最大长度是 {#limit}","array.min":"{#label} 的最小长度是 {#limit}","array.orderedLength":"{#label} 的顺序长度必须是 {#limit}","array.sort":"{#label} 必须按指定顺序排序","array.sort.mismatching":"{#label} 排序不匹配","array.sort.unsupported":"{#label} 不支持排序","array.sparse":"{#label} 不允许稀疏数组","array.unique":"{#label} 必须具有唯一的值","array.hasKnown":"{#label} 必须具有已知值","array.hasUnknown":"{#label} 必须具有未知值","binary.base":"{#label} 必须是二进制数据","binary.length":"{#label} 的长度必须是 {#limit}","binary.max":"{#label} 的最大长度是 {#limit}","binary.min":"{#label} 的最小长度是 {#limit}","boolean.base":"{#label} 必须是布尔值","date.base":"{#label} 必须是日期","date.format":"{#label} 日期格式错误","date.greater":"{#label} 必须大于 {#limit}","date.less":"{#label} 必须小于 {#limit}","date.max":"{#label} 必须早于或等于 {#limit}","date.min":"{#label} 必须晚于或等于 {#limit}","date.strict":"{#label} 日期格式必须严格遵循","function.arity":"{#label} 函数的参数个数必须是 {#n}","function.class":"{#label} 必须是一个类","function.maxArity":"{#label} 函数的最大参数个数是 {#n}","function.minArity":"{#label} 函数的最小参数个数是 {#n}","number.greater":"{#label} 必须大于 {#limit}","number.infinity":"{#label} 不能是无穷大","number.less":"{#label} 必须小于 {#limit}","number.multiple":"{#label} 必须是 {#base} 的倍数","number.negative":"{#label} 必须是负数","number.port":"{#label} 必须是有效的端口号","number.positive":"{#label} 必须是正数","number.precision":"{#label} 必须精确到 {#limit} 位小数","number.unsafe":"{#label} 是不安全的数字","object.unknown":"{#label} 是未知的对象","object.and":"{#label} 必须同时满足 {#peers}","object.assert":"{#label} 不满足指定条件","object.base":"{#label} 必须是对象","object.length":"{#label} 的键数必须是 {#limit}","object.max":"{#label} 的最大键数是 {#limit}","object.min":"{#label} 的最小键数是 {#limit}","object.nand":"{#label} 不能同时满足 {#peers}","object.pattern.match":"{#label} 键值对必须匹配指定模式","object.refType":"{#label} 引用了错误的类型","object.regex":"{#label} 键必须满足正则表达式","object.rename.multiple":"{#label} 不能重命名多个键","object.rename.override":"{#label} 重命名不能覆盖现有键","object.schema":"{#label} 必须是 Joi schema","object.instance":"{#label} 必须是类的实例","object.without":"{#label} 不能和 {#peers} 同时存在","object.oxor":"{#label} 只能满足一个互斥条件","string.alphanum":"{#label} 必须是字母数字字符","string.base64":"{#label} 必须是有效的 base64 字符串","string.base":"{#label} 必须是字符串","string.creditCard":"{#label} 必须是有效的信用卡号","string.dataUri":"{#label} 必须是有效的 dataUri 字符串","string.domain":"{#label} 必须是有效的域名","string.email":"{#label} 必须是有效的电子邮件地址","string.empty":"{#label} 不能为空","string.guid":"{#label} 必须是有效的 GUID","string.hexAlign":"{#label} 十六进制对齐失败","string.hex":"{#label} 必须是有效的十六进制字符串","string.hostname":"{#label} 必须是有效的主机名","string.ipVersion":"{#label} 必须是有效的 IP 版本","string.ip":"{#label} 必须是有效的 IP 地址","string.isoDate":"{#label} 必须是有效的 ISO 日期","string.isoDuration":"{#label} 必须是有效的 ISO 时长","string.length":"{#label} 的长度必须是 {#limit}","string.lowercase":"{#label} 必须是小写字符串","string.max":"{#label} 的最大长度是 {#limit}","string.min":"{#label} 的最小长度是 {#limit}","string.normalize":"{#label} 必须是 unicode 规范化的字符串","string.pattern.base":"{#label} 的值 {#value} 未能匹配所需的模式","string.pattern.name":"{#label} 的值 {#value} 未能匹配 {#name} 模式","string.pattern.invert.base":"{#label} 的值 {#value} 匹配了反向模式","string.pattern.invert.name":"{#label} 的值 {#value} 匹配了反向的 {#name} 模式","string.token":"{#label} 必须是有效的令牌","string.trim":"{#label} 必须是修剪过的字符串","string.uppercase":"{#label} 必须是大写字符串","string.uri":"{#label} 必须是有效的 URI","string.uriCustomScheme":"{#label} 必须是符合 {#scheme} 模式的有效 uri","string.uriRelativeOnly":"{#label} 必须是有效的相对 uri","symbol.base":"{#label} 必须是符号","symbol.map":"{#label} 必须是符号映射"}};function ve($,k){var F;const S=((F=$.props)==null?void 0:F.type)||"text";return D("input",{type:S,placeholder:$.placeholder,value:$.value,onChange:E=>k($,E.target.value),...$.props})}function _e($,k){return D("select",{value:$.value,onChange:F=>k($,F.target.value)},$.options.map(F=>D("option",{value:F.value},F.label)))}function we($,k){return D("label",{class:"text-base"},D("input",{type:"checkbox",class:"mr-1",checked:$.value,onChange:F=>k($,F.target.checked)}),$.text)}function xe($,k){return D("div",null,$.options.map(F=>D("label",{class:"mr-2"},D("input",{type:"radio",class:"mr-1",name:$.name,value:F.value,checked:$.value===F.value,onChange:S=>k($,S.target.value)}),F.label)))}function $e($,k){return D("textarea",{value:$.value,onChange:F=>k($,F.target.value)})}function Fe(){return D("hr",null)}function ke($){return D("img",{src:$.src,alt:$.alt})}function Ee($){return $.tooltip?D("span",{class:"tooltip block relative",style:{height:20,width:20,top:-1}},D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"#d1d5db",style:{width:20,height:20}},D("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 01.67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 11-.671-1.34l.041-.022zM12 9a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})),D("span",{class:"tooltip-text"},$.tooltip)):null}const le={input:ve,select:_e,checkbox:we,radio:xe,textarea:$e,divider:Fe,img:ke,tooltip:Ee};function Y($,k){const F=le[$.type];if(!F)throw new Error(`No renderer for component type "${$.type}"`);try{return F($,k)}catch(S){return console.error(S),null}}const Ae=125,Ce="#45a049",Se=20,Re={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"##808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function je($){const k=parseInt($.slice(1),16),F=k>>16&255,S=k>>8&255,E=k&255;return[F,S,E]}function De($){const[k,F,S]=je(Re[$.toLowerCase()]||$);return Be(k,F,S)}function Be($,k,F){$/=255,k/=255,F/=255;const S=Math.max($,k,F),E=Math.min($,k,F);let x=0,v=0;const l=(S+E)/2;if(S!==E){const b=S-E;switch(v=l>.5?b/(2-S-E):b/(S+E),S){case $:x=(k-F)/b+(k<F?6:0);break;case k:x=(F-$)/b+2;break;case F:x=($-k)/b+4;break}x/=6}return[x*360,v*100,l*100]}function ee($){if($===null||typeof $!="object")return $;const k=Array.isArray($)?[]:{};for(const F in $)Object.prototype.hasOwnProperty.call($,F)&&(k[F]=ee($[F]));return k}function V($){let k={};for(let F of $)if(F.type==="group"){let S={};if(F.components)for(let E of F.components)if(E.type==="group"){let x=V(E.components||E.items);E.name?S[E.name]=x:Object.assign(S,x)}else if(E.type==="list"){let x=[];if(E.items)for(let v of E.items)v.type==="group"?x.push(V([v])):v.name&&x.push({[v.name]:v.value});E.name?S[E.name]=x:Object.assign(S,x)}else E.name&&(S[E.name]=E.value);F.name?k[F.name]=S:Object.assign(k,S)}else if(F.type==="list"){let S=[];if(F.items)for(let E of F.items)E.type==="group"&&S.push(V([E])),E.type==="list"?S.push(V(E.items||[])):E.name&&S.push({[E.name]:E.value});F.name&&(k[F.name]=S)}else F.name&&(k[F.name]=F.value);return k}function ne($){return typeof $=="number"?$+"px":($===void 0||!["px","em","rem","ex","ch","vw","vh","vmin","vmax","%","cm","mm","in","pt","pc"].some(k=>typeof $=="string"&&$.endsWith(k))&&typeof $=="string"&&($=$+"px"),$)}var Oe=Object.defineProperty,Ie=Object.getOwnPropertyDescriptor,Me=($,k,F,S)=>{for(var E=S>1?void 0:S?Ie(k,F):k,x=$.length-1,v;x>=0;x--)(v=$[x])&&(E=(S?v(k,F,E):v(E))||E);return S&&E&&Oe(k,F,E),E},X;let ae=(X=class extends re{constructor(){super(...arguments),T(this,"config",{components:[],submitButton:!0,resetButton:!0,labelStyle:{width:Ae,align:"right"}}),T(this,"values",{}),T(this,"joiSchema"),T(this,"resetErrors",$=>{var k;for(const F of $)F.error=null,F.type==="list"?(k=F.items)==null||k.forEach(S=>this.resetErrors(S.components||[])):F.type==="group"&&this.resetErrors(F.components||[])}),T(this,"onSubmit",$=>{$.preventDefault();const k=this.validate();k!=null&&k.error?this.update():this.fire("submit",{values:this.values,nativeEvent:$})}),T(this,"resetComponent",$=>{var k;$.value=void 0,$.error=null,$.type==="list"?$.items=[]:$.type==="group"&&((k=$.components)==null||k.forEach(F=>this.resetComponent(F)))}),T(this,"onReset",()=>{this.config.error=null;for(const $ of this.config.components)this.resetComponent($);this.update()}),T(this,"addListItem",($,k)=>{if(!$.itemTemplate)throw new Error("itemTemplate is required for list");$.items||($.items=[]),k!==void 0?$.items.splice(k+1,0,ee($.itemTemplate)):$.items.push(ee($.itemTemplate)),this.values=V(this.config.components),this.resetValues(this.values),this.update()}),T(this,"removeListItem",($,k)=>{var F;(F=$.items)==null||F.splice(k,1),this.update(),this.values=V(this.config.components)}),T(this,"handleChange",($,k)=>{$.value=k,this.validate(),this.resetValues(this.values),this.update(),this.fire("change",{values:this.values})}),T(this,"findFieldByName",($,k)=>{for(const F of $){if(F.name===k)return F;if((F.type==="list"||F.type==="group")&&F.components){const S=this.findFieldByName(F.components,k);if(S)return S}}return null}),T(this,"getValueFromNestedStructure",($,k)=>{if(!$)return;const F=$.split(".");let S=k;for(const E of F){if(S==null)return;Array.isArray(S)&&/^\d+$/.test(E)?S=S[parseInt(E,10)]:S=S[E]}return S}),T(this,"renderComponent",($,k,F)=>{var S,E,x,v;if($.dependsOn){let m;if(typeof $.dependsOn=="string"?m=new Function("values",`return ${$.dependsOn}`):typeof $.dependsOn=="function"&&(m=$.dependsOn),m){const e=this.config.components.reduce((n,i)=>(i.name&&(n[i.name]=i.value),n),{});if(!m(e))return this.resetComponent($),null}else{const e=this.findFieldByName(k,$.dependsOn.name);if(e&&e.value!==$.dependsOn.value)return this.resetComponent($),null}}let l;switch($.type){case"input":case"select":case"checkbox":case"radio":case"textarea":l=Y($,this.handleChange);break;case"list":l=D("div",{class:"relative",style:{marginLeft:F*Se}},(S=$.items)==null?void 0:S.map((e,n)=>D("div",{class:q("relative group",{"mt-2":n>0})},this.renderComponent(e,$.items,F+1),D("i",{class:"minus icon rounded-full absolute inline-block cursor-pointer bg-white opacity-0 group-hover:opacity-100",onClick:()=>this.removeListItem($,n)}),D("i",{class:"add icon rounded-full absolute inline-block cursor-pointer bg-white opacity-0 group-hover:opacity-100",onClick:()=>this.addListItem($,n)}))),D("i",{class:"add icon rounded-full inline-block cursor-pointer bg-white relative",onClick:()=>this.addListItem($)}));break;case"group":l=D("div",{class:"grid"},(E=$.components)==null?void 0:E.map((e,n)=>D("div",{class:q(`col-span-${e.span||12}`,{[`sm:col-span-${e.sm}`]:e.sm,[`md:col-span-${e.md}`]:e.md,[`lg:col-span-${e.lg}`]:e.lg,[`xl:col-span-${e.xl}`]:e.xl,[`xxl:col-span-${e.xxl}`]:e.xxl})},D("div",{class:"w-full"},$.components&&this.renderComponent(e,$.components,F+1)))));break;case"custom":l=D($.component,{...$.props});break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"span":return D($.type,null,$.text);case"divider":case"img":return Y($);default:const m=le[$.type];if(m)if(m.isFormComponent)l=Y($,this.handleChange);else return Y($,this.handleChange);else throw new Error(`Unsupported type: ${$.type}`)}const b=F?(x=$.labelStyle)==null?void 0:x.align:this.config.labelStyle.align,g=F?(v=$.labelStyle)==null?void 0:v.width:this.config.labelStyle.width;return D("div",{class:q({flex:b!=="top"})},($.label||F===0&&b!=="top")&&D("div",{class:q("inline-block items-center h-8 leading-8 text-sm pr-6",{"text-right":b==="right","text-left":b!=="right"}),style:{width:b!=="top"?ne(g):void 0}},D("div",{class:"inline-block whitespace-nowrap"},D("label",{class:"flex items-center gap-1"},D("span",null,$.label),Y({type:"tooltip",tooltip:$.tooltip})))),D("div",{class:"flex-1"},l,$.description&&D("div",{class:"text-6b7280 text-sm mt-1.5",style:"grid-column: span 12"},$.description),$.error&&D("div",{class:"text-ef4444 text-sm"},$.error)))}),T(this,"initValue",($,k,F="",S)=>{var E,x;const v=F?$.name?`${F}.${$.name}`:F:$.name,l=this.getValueFromNestedStructure(v,S),b=l!==void 0?l:$.defaultValue;switch($.value=b,$.type){case"list":(E=$.items)==null||E.forEach((g,m)=>this.initValue(g,k+1,`${v}.${m}`,S));break;case"group":(x=$.components)==null||x.forEach(g=>{this.initValue(g,k+1,v,S)});break}})}install(){Object.assign(this.config,this.props.config),this.resetValues(this.props.config.values)}receiveProps($){var k,F;Object.assign(this.config,$.config),this.resetValues($.config.values),this.initPrimaryColor(),this.joiSchema=(F=(k=$.config)==null?void 0:k.validate)==null?void 0:F.call(k,se)}validate(){var $,k,F;this.values=V(this.props.config.components);const S=($=this.joiSchema)==null?void 0:$.validate(this.values,{abortEarly:!1,errors:{language:this.props.config.locale||"en"},messages:ye});if(this.resetErrors(this.config.components),S)return(F=(k=S.error)==null?void 0:k.details)==null||F.forEach(E=>{const x=this.findFieldByName(this.config.components,E.path[0]);x&&(x.error=E.message)}),this.config.error=S.error,S}initPrimaryColor(){const $=De(this.props.config.primaryColor||Ce);if(this.shadowRoot){const k=this.shadowRoot.host.style;k.setProperty("--omi-form-primary-hue",$[0]+""),k.setProperty("--omi-form-primary-saturation",$[1]+"%"),k.setProperty("--omi-form-primary-lightness",$[2]+"%"),k.setProperty("--omi-form-primary-saturation-hover",Math.min(100,$[1]+15)+"%"),k.setProperty("--omi-form-primary-saturation-active",Math.max(0,$[1]-15)+"%")}return $}installed(){var $,k;this.initPrimaryColor(),this.joiSchema=(k=($=this.props.config)==null?void 0:$.validate)==null?void 0:k.call($,se)}resetValues($){this.config.components.forEach(k=>this.initValue(k,0,"",$))}render($){const k={marginLeft:this.config.labelStyle.align==="top"?0:ne(this.config.labelStyle.width)};return D("form",{onSubmit:this.onSubmit,onReset:this.onReset,class:"grid",style:$.config.style},this.config.components.map((F,S)=>D("div",{class:q(`col-span-${F.span||12}`,{[`sm:col-span-${F.sm}`]:F.sm,[`md:col-span-${F.md}`]:F.md,[`lg:col-span-${F.lg}`]:F.lg,[`xl:col-span-${F.xl}`]:F.xl,[`xxl:col-span-${F.xxl}`]:F.xxl})},this.renderComponent(F,this.config.components,0))),this.config.error&&D("div",{style:{"grid-column":"span 12",...k}}," ",this.config.error.details.map(F=>{if(F.path.length===0)return D("div",{class:"text-ef4444 text-sm"},"* ",F.message)})," "),D("div",{class:"flex gap-2",style:k},this.config.submitButton&&D("button",{class:"button submit-button",type:"submit"},"Submit"),this.config.resetButton&&D("button",{class:"button reset-button",type:"reset"},"Reset")))}},T(X,"css",be),X);ae=Me([te("o-form")],ae);const Le={wrapper:"relative",tagWrapper:"flex items-center flex-wrap transition-all duration-300 ease-[cubic-bezier(0.25,0.1,0.25,1)] p-[5px]",tagInput:"w-[100px] py-[0.32rem] leading-[1.6] dark:text-gray-200 dark:placeholder:text-gray-200",input:"peer block min-h-[auto] w-full rounded border-0 bg-transparent outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary motion-reduce:transition-none placeholder:opacity-0 disabled:bg-neutral-100 read-only:bg-neutral-100 dark:disabled:bg-neutral-700 dark:read-only:bg-neutral-700 dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:peer-focus:text-primary",activeInput:"placeholder:opacity-100",label:"pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate text-neutral-500 transition-all duration-200 ease-out peer-focus:scale-[0.8] peer-focus:text-primary motion-reduce:transition-none dark:text-neutral-200 dark:peer-focus:text-primary",activeLabel:"scale-[0.8]",notch:"group flex absolute left-0 top-0 w-full max-w-full h-full text-left pointer-events-none",notchLeading:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none left-0 top-0 h-full w-2 border-r-0 rounded-l-[0.25rem]",activeNotchLeading:"border-r-0",focusedNotchLeading:"border-r-0",notchLeadingDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchLeadingDefault:"shadow-[-1px_0_0_#3b71ca,_0_1px_0_0_#3b71ca,_0_-1px_0_0_#3b71ca] border-primary dark:border-primary",notchLeadingWhite:"border-neutral-200",focusedNotchLeadingWhite:"shadow-[-1px_0_0_#ffffff,_0_1px_0_0_#ffffff,_0_-1px_0_0_#ffffff] border-white",notchMiddle:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none grow-0 shrink-0 basis-auto w-auto max-w-[calc(100%-1rem)] h-full border-r-0 border-l-0",activeNotchMiddle:"border-x-0 border-t border-solid border-t-transparent dark:border-t-transparent",focusedNotchMiddle:"border-x-0 border-t border-solid border-t-transparent dark:border-t-transparent",notchMiddleDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchMiddleDefault:"shadow-[0_1px_0_0_#3b71ca] border-primary dark:border-primary",notchMiddleWhite:"border-neutral-200",focusedNotchMiddleWhite:"shadow-[0_1px_0_0_#ffffff] border-white",notchTrailing:"pointer-events-none border border-solid box-border bg-transparent transition-all duration-200 ease-linear motion-reduce:transition-none grow h-full border-l-0 rounded-r-[0.25rem]",activeNotchTrailing:"border-l-0",focusedNotchTrailing:"border-l-0",notchTrailingDefault:"border-neutral-300 dark:border-neutral-600",focusedNotchTrailingDefault:"shadow-[1px_0_0_#3b71ca,_0_-1px_0_0_#3b71ca,_0_1px_0_0_#3b71ca] border-primary dark:border-primary",notchTrailingWhite:"border-neutral-200",focusedNotchTrailingWhite:"shadow-[1px_0_0_#ffffff,_0_-1px_0_0_#ffffff,_0_1px_0_0_#ffffff] border-white",counter:"text-right leading-[1.6]",inputSizeLg:"px-3 py-[0.32rem] leading-[2.15]",inputSizeBase:"px-3 py-[0.32rem] leading-[1.6]",inputSizeSm:"px-3 py-[0.33rem] text-xs leading-[1.5]",labelSizeLg:"pt-[0.36rem] leading-[2.15] peer-focus:-translate-y-[1.15rem]",activeLabelSizeLg:"-translate-y-[1.15rem]",labelSizeBase:"pt-[0.30rem] leading-[1.6] peer-focus:-translate-y-[0.9rem]",activeLabelSizeBase:"-translate-y-[0.9rem]",labelSizeSm:"pt-[0.36rem] text-xs leading-[1.5] peer-focus:-translate-y-[0.75rem]",activeLabelSizeSm:"-translate-y-[0.75rem]"};var ue=Object.defineProperty,Ne=Object.getOwnPropertyDescriptor,Te=($,k,F)=>k in $?ue($,k,{enumerable:!0,configurable:!0,writable:!0,value:F}):$[k]=F,H=($,k,F,S)=>{for(var E=S>1?void 0:S?Ne(k,F):k,x=$.length-1,v;x>=0;x--)(v=$[x])&&(E=(S?v(k,F,E):v(E))||E);return S&&E&&ue(k,F,E),E},ce=($,k,F)=>(Te($,typeof k!="symbol"?k+"":k,F),F);let W=class extends re{constructor(){super(...arguments);Z(this,"state",{active:!1,focus:!1,value:"",tags:[],labelWidth:0});Z(this,"labelReference",pe());Z(this,"inputRef",null)}install(){var k;this.state.value=this.props.value||this.props.defaultValue,this.state.tags=this.props.tags,(this.state.value||(k=this.state.tags)!=null&&k.length)&&(this.state.active=!0)}installed(){setTimeout(()=>{var k,F;this.state.labelWidth=((F=(k=this.labelReference)==null?void 0:k.current)==null?void 0:F.clientWidth)*.8+8,this.update()},400)}onFocus(){var k,F;this.state.focus=!0,this.state.labelWidth=((F=(k=this.labelReference)==null?void 0:k.current)==null?void 0:F.clientWidth)*.8+8,this.update()}handleChange(k){this.state.value=k.target.value,this.fire("change",this.state.value),this.update()}receiveProps(k,F){k.value!==F.value&&(this.state.value=k.value,this.state.value&&(this.state.active=!0),this.update())}removeTag(k,F){var S;this.state.tags.splice(this.state.tags.indexOf(k),1),this.update(),this.fire("change",{nativeEvent:F}),(S=this.inputRef)==null||S.focus()}onBlur(k){var F;this.state.value=k.target.value.trim(),this.state.tags&&this.state.value&&(this.state.tags.push({label:this.state.value}),this.state.value="",this.fire("change")),k.target.value||(F=this.state.tags)!=null&&F.length?this.state.active=!0:this.state.active=!1,this.state.focus=!1,k.stopPropagation(),this.fire("blur",this.state.value),this.update()}onKeyUp(k){k.keyCode===13&&(this.state.tags.push({label:this.state.value}),this.state.value="",this.fire("change"),this.update())}render(k){var a;const F={...Le,...k.customTheme},{size:S,defaultValue:E,id:x,label:v,children:l,type:b,readonly:g,formWhite:m,counter:e,maxLength:n}=k,i=q(F.input,this.state.active&&F.activeInput,S==="lg"?F.inputSizeLg:S==="base"?F.inputSizeBase:S==="sm"?F.inputSizeSm:F.inputSizeBase),s=q(F.label,this.state.active&&F.activeLabel,this.state.active&&(S==="lg"?F.activeLabelSizeLg:S==="base"?F.activeLabelSizeBase:S==="sm"?F.activeLabelSizeSm:F.activeLabelSizeBase),S==="lg"?F.labelSizeLg:S==="base"?F.labelSizeBase:S==="sm"?F.labelSizeSm:F.labelSizeBase),t=q(F.notchLeading,m?F.notchLeadingWhite:F.notchLeadingDefault,this.state.active&&F.activeNotchLeading,this.state.focus&&F.focusedNotchLeading,this.state.focus&&(m?F.focusedNotchLeadingWhite:F.focusedNotchLeadingDefault)),o=q(F.notchMiddle,m?F.notchMiddleWhite:F.notchMiddleDefault,this.state.active&&F.activeNotchMiddle,this.state.focus&&F.focusedNotchMiddle,this.state.focus&&(m?F.focusedNotchMiddleWhite:F.focusedNotchMiddleDefault)),r=q(F.notchTrailing,m?F.notchTrailingWhite:F.notchTrailingDefault,this.state.active&&F.activeNotchTrailing,this.state.focus&&F.focusedNotchTrailing,this.state.focus&&(m?F.focusedNotchTrailingWhite:F.focusedNotchTrailingDefault));return D(k.wrapperTag,null,D(k.wrapperTag,{class:q(F.wrapper,{[F.tagWrapper]:this.state.tags})},this.state.tags&&this.state.tags.map(u=>D("div",{class:"flex justify-between items-center h-[32px] leading-loose py-[5px] px-[12px] mr-2 my-[5px] text-[13px] font-normal text-[#4f4f4f] cursor-pointer bg-[#eceff1] dark:text-white dark:bg-neutral-600 rounded-[16px] transition-[opacity] duration-300 ease-linear [word-wrap: break-word] shadow-none normal-case hover:!shadow-none active:bg-[#cacfd1] inline-block font-medium leading-normal text-[#4f4f4f] text-center no-underline align-middle cursor-pointer select-none border-[.125rem] border-solid border-transparent py-1.5 px-3 text-xs rounded"},D("span",null,u.label),D("span",{onClick:d=>this.removeTag(u,d),class:"w-4 float-right pl-[8px] text-[16px] opacity-[.53] cursor-pointer fill-[#afafaf] hover:fill-[#8b8b8b] dark:fill-gray-400 dark:hover:fill-gray-100 transition-all duration-200 ease-in-out"},D("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3"},D("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}))))),D(k.tag,{type:b==="date"?"text":b,disabled:k.disabled,readOnly:g,class:q(i,{[F.tagInput]:this.state.tags}),onBlur:this.onBlur,onInput:this.handleChange,onFocus:this.onFocus,onKeyUp:this.onKeyUp,value:this.state.value,defaultValue:E,rows:k.rows,id:x,ref:u=>this.inputRef=u,maxLength:n}),v&&D("label",{class:s,htmlFor:x,ref:this.labelReference},v),b==="date"&&D("button",{type:"button",class:"pointer-events-none flex items-center justify-content-center [&>svg]:w-5 [&>svg]:h-5 absolute outline-none border-none bg-transparent right-0.5 top-1/2 -translate-x-1/2 -translate-y-1/2 hover:text-primary focus:text-primary dark:hover:text-primary-400 dark:focus:text-primary-400 dark:text-neutral-200","data-te-datepicker-toggle-button-ref":"","data-te-datepicker-toggle-ref":""},D("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},D("path",{"fill-rule":"evenodd",d:"M6.75 2.25A.75.75 0 017.5 3v1.5h9V3A.75.75 0 0118 3v1.5h.75a3 3 0 013 3v11.25a3 3 0 01-3 3H5.25a3 3 0 01-3-3V7.5a3 3 0 013-3H6V3a.75.75 0 01.75-.75zm13.5 9a1.5 1.5 0 00-1.5-1.5H5.25a1.5 1.5 0 00-1.5 1.5v7.5a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5v-7.5z","clip-rule":"evenodd"}))),D("div",{class:F.notch},D("div",{class:t}),D("div",{class:o,style:{width:this.state.labelWidth}}),D("div",{class:r})),l),e&&n!==void 0&&n>0&&D("div",{class:F.counter},D("span",null,((a=this.state.value)==null?void 0:a.toString().length)||0," / ",n)))}};ce(W,"css",[he,`:host {
  display: block;
}`]);ce(W,"defaultProps",{size:"base",wrapperTag:"div",readonly:!1,formWhite:!1,counter:!1,disabled:!1,tag:"input",rows:1});H([J],W.prototype,"onFocus",1);H([J],W.prototype,"handleChange",1);H([J],W.prototype,"removeTag",1);H([J],W.prototype,"onBlur",1);H([J],W.prototype,"onKeyUp",1);W=H([te("o-input")],W);var ze=Object.defineProperty,Pe=Object.getOwnPropertyDescriptor,qe=($,k,F,S)=>{for(var E=S>1?void 0:S?Pe(k,F):k,x=$.length-1,v;x>=0;x--)(v=$[x])&&(E=(S?v(k,F,E):v(E))||E);return S&&E&&ze(k,F,E),E};let ie=class extends re{constructor(){super(...arguments);Z(this,"state",{date:""})}render(){return D("o-popover",{placement:"bottom"},D("o-input",{type:"date",value:this.state.date,label:""}),D("o-calendar",{onSelect:k=>{this.state.date=k.detail.date,this.update()},slot:"content"}))}};ie=qe([te("o-date-picker")],ie);
